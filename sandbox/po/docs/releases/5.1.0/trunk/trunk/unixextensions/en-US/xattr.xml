<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "unixextensions.ent">
%BOOK_ENTITIES;
]>
<!--#########################################################################
    #
    # Description: Open Object Rexx: Unix Extensions XML file.
    #
    # Copyright (c) 2005-2022, Rexx Language Association. All rights reserved.
    # Portions Copyright (c) 2004, IBM Corporation. All rights reserved.
    #
    # This program and the accompanying materials are made available under
    # the terms of the Common Public License v1.0 which accompanies this
    # distribution. A copy is also available at the following address:
    # https://www.oorexx.org/license.html
    #
    # Redistribution and use in source and binary forms, with or
    # without modification, are permitted provided that the following
    # conditions are met:
    #
    # Redistributions of source code must retain the above copyright
    # notice, this list of conditions and the following disclaimer.
    # Redistributions in binary form must reproduce the above copyright
    # notice, this list of conditions and the following disclaimer in
    # the documentation and/or other materials provided with the distribution.
    #
    # Neither the name of Rexx Language Association nor the names
    # of its contributors may be used to endorse or promote products
    # derived from this software without specific prior written permission.
    #
    # THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
    # "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
    # LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
    # FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
    # OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
    # SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
    # TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
    # OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
    # OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
    # NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
    # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
    #
    #########################################################################
-->
<chapter id="xattr"><title id="xattr.title">Extended Attribute Functions</title>
<para>This chapter covers the available extended attribute functions.
These functions are probably not available on anything but a Linux
system. They are definitely not available for AIX.</para>


<section id="utlSysGetxattr"><title>SysGetxattr (not available on all systems)</title>
<indexterm><primary>SysGetxattr</primary></indexterm>

<mediaobject>
<imageobject>
<imagedata fileref="images/funcs/xattr_sysgetxattr.svg" scale="50" />
</imageobject>
</mediaobject>

<para>Gets an extended attribute from the specified file.</para>
<para>This function uses the <filename>getxattr()</filename>
C API to perform the action.</para>
<para><emphasis role="bold">Parameter:</emphasis></para>
<variablelist>
<varlistentry><term><emphasis role="italic">fname</emphasis></term>
<listitem><para>The file name.
</para></listitem></varlistentry>
<varlistentry><term><emphasis role="italic">xname</emphasis></term>
<listitem><para>The extended attribute name.
</para></listitem></varlistentry>
</variablelist>
<para><emphasis role="bold">Returns</emphasis></para>
<para>Returns the extended attribute value on success or a zero-length string on an error.</para>
<example id="ex.sysGetxattr">
<title>SysGetxattr</title>
<programlisting>
<![CDATA[
/* get an extended attribute */

mimetype = SysGetxattr('/home/dashley/example.txt', 'mimetype')
]]>
</programlisting>
</example>
</section>


<section id="utlSysListxattr"><title>SysListxattr (not available on all systems)</title>
<indexterm><primary>SysListxattr</primary></indexterm>

<mediaobject>
<imageobject>
<imagedata fileref="images/funcs/xattr_syslistxattr.svg" scale="50" />
</imageobject>
</mediaobject>

<para>Returns an array of the extended attribute names from the specified file.</para>
<para>This function uses the <filename>listxattr()</filename>
C API to perform the action.</para>
<para><emphasis role="bold">Parameter:</emphasis></para>
<variablelist>
<varlistentry><term><emphasis role="italic">fname</emphasis></term>
<listitem><para>The file name.
</para></listitem></varlistentry>
</variablelist>
<para><emphasis role="bold">Returns</emphasis></para>
<para>Returns an array of the extended attribute names on success. The array will be empty on an error.</para>
<example id="ex.sysListxattr">
<title>SysListxattr</title>
<programlisting>
<![CDATA[
/* list the extended attribute names */

names = SysListxattr('/home/dashley/example.txt')
do name over names
   say name
end
]]>
</programlisting>
</example>
</section>


<section id="utlSysRemovexattr"><title>SysRemovexattr (not available on all systems)</title>
<indexterm><primary>SysRemovexattr</primary></indexterm>

<mediaobject>
<imageobject>
<imagedata fileref="images/funcs/xattr_sysremovexattr.svg" scale="50" />
</imageobject>
</mediaobject>

<para>Removes an extended attribute from the specified file.</para>
<para>This function uses the <filename>removexattr()</filename>
C API to perform the action.</para>
<para><emphasis role="bold">Parameter:</emphasis></para>
<variablelist>
<varlistentry><term><emphasis role="italic">fname</emphasis></term>
<listitem><para>The file name.
</para></listitem></varlistentry>
<varlistentry><term><emphasis role="italic">xname</emphasis></term>
<listitem><para>The extended attribute name.
</para></listitem></varlistentry>
</variablelist>
<para><emphasis role="bold">Returns</emphasis></para>
<para>Returns 0 on success or -1 on an error.</para>
<example id="ex.sysRemovexattr">
<title>SysRemovexattr</title>
<programlisting>
<![CDATA[
/* remove an extended attribute */

retc = SysRemovexattr('/home/dashley/example.txt', 'mimetype')
]]>
</programlisting>
</example>
</section>


<section id="utlSysSetxattr"><title>SysSetxattr (not available on all systems)</title>
<indexterm><primary>SysSetxattr</primary></indexterm>

<mediaobject>
<imageobject>
<imagedata fileref="images/funcs/xattr_syssetxattr.svg" scale="50" />
</imageobject>
</mediaobject>

<para>Sets/replaces an extended attribute on the specified file.</para>
<para>This function uses the <filename>removexattr()</filename>
C API to perform the action.</para>
<para><emphasis role="bold">Parameter:</emphasis></para>
<variablelist>
<varlistentry><term><emphasis role="italic">fname</emphasis></term>
<listitem><para>The file name.
</para></listitem></varlistentry>
<varlistentry><term><emphasis role="italic">xname</emphasis></term>
<listitem><para>The extended attribute name.
</para></listitem></varlistentry>
<varlistentry><term><emphasis role="italic">val</emphasis></term>
<listitem><para>The value to be set for the extended attribute.
</para></listitem></varlistentry>
</variablelist>
<para><emphasis role="bold">Returns</emphasis></para>
<para>Returns the 0 on success or -1 on an error.</para>
<example id="ex.sysSetxattr">
<title>SysSetxattr</title>
<programlisting>
<![CDATA[
/* set an extended attribute */

retc = SysSetxattr('/home/dashley/example.txt', 'mimetype', 'text/plain')
]]>
</programlisting>
</example>
</section>






</chapter>

