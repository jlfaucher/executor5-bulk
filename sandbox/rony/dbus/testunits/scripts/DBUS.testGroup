#!/usr/bin/rexx
/*

rexx DBUS.testgroup
start the script DBUStestServer.rexx and waits for its "ready" signal
to start the assertions

  SVN Revision: $Rev: 6332 $
  Change Date:  $Date: 2010-10-31 08:09:52 -0700 (Sun, 31 Oct 2010) $
*/
/*----------------------------------------------------------------------------*/
/*                                                                            */
/* Copyright (c) 2007 - 2010 Rexx Language Association. All rights reserved.  */
/*                                                                            */
/* This program and the accompanying materials are made available under       */
/* the terms of the Common Public License v1.0 which accompanies this         */
/* distribution. A copy is also available at the following address:           */
/* http://www.oorexx.org/license.html                                         */
/*                                                                            */
/* Redistribution and use in source and binary forms, with or                 */
/* without modification, are permitted provided that the following            */
/* conditions are met:                                                        */
/*                                                                            */
/* Redistributions of source code must retain the above copyright             */
/* notice, this list of conditions and the following disclaimer.              */
/* Redistributions in binary form must reproduce the above copyright          */
/* notice, this list of conditions and the following disclaimer in            */
/* the documentation and/or other materials provided with the distribution.   */
/*                                                                            */
/* Neither the name of Rexx Language Association nor the names                */
/* of its contributors may be used to endorse or promote products             */
/* derived from this software without specific prior written permission.      */
/*                                                                            */
/* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS        */
/* "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT          */
/* LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS          */
/* FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT   */
/* OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,      */
/* SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED   */
/* TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,        */
/* OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY     */
/* OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING    */
/* NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS         */
/* SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.               */
/*                                                                            */
/*----------------------------------------------------------------------------*/
  
  parse source . . s
  group = .TestGroup~new(s)

  -- To have set up and tear down run once for an entire set of test cases, all
  -- the test cases have to be added to a single TestSuite.  The test group
  -- will do this for us if we tell it which TestSuite class object goes with
  -- which set of test cases.  To do this we use the addWithSuite() method.
  group~addWithSuite(.DBUS.testGroup,.OneTimeSuite)
 
  if group~isAutomatedTest then return group

  testResult = group~suite~execute~~print

   return testResult
-- End of entry point.

/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -*\
  Directives, Classes, or Routines.
\* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -*/
::requires 'ooTest.frm'
::requires 'dbus.cls'                 -- get dbus support for ooRexx
--::requires BSF.CLS

::class 'OneTimeSuite' public subclass ooTestSuite
::method setUp
  --.dbus.dir~bDebug = .true    -- use this setting for debugging
  -- set ready to false and wait until the ready signal from the server changes it
  .local~server.ready=.false
  
  conn=.dbus~session     -- set up a connection to the session bus
  conn~listener("add",.rexxListener~new)      -- add the Signal Listener
  conn~match("add","type='signal',interface='oorexx.dbus.ooTestService'")  

-- start the external rexx program (responseserver) and wait for signal Ready
 "rexx DBUStestServer.rexx &"
 say "starting server"

 do while \.server.ready  -- wait until server program fully initializes and sends Ready
 end
 say '.. setUp done, starting assertions'
 
::method tearDown
-- calls the shutdown method of the started servers
-- only necessary to call the shutdown method of one of the servers if it listens for dbus.shutdown boolean
  .dbus~session~message("call","oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService", - 
                                              "oorexx.dbus.ooTestService","Shutdown", , ,)
  /*
  .local~conn~message("call","oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2", "oorexx.dbus.ooTestService","Shutdown", , ,)
  .local~conn~message("call","oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3", "oorexx.dbus.ooTestService","Shutdown", , ,)
  .local~conn~message("call","oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4", "oorexx.dbus.ooTestService","Shutdown", , ,)
  .local~conn~message("call","oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService5", "oorexx.dbus.ooTestService","Shutdown", , ,)
  -- servers are shutted down in the serverscript
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateserver~shutdown
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 =privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateserver2~shutdown
 */
  .dbus~session~close                              -- closes connection to session bus
  .dbus~system~close                               -- closes connection to system bus
   call syssleep 1                                 -- let server time to close correctly
   say '..tearDown done'
   exit -1
   
/* class: DBUS.testGroup - - - - - - - - - - - - - - - - - - - - - - - - -*\
 This class serves connects to the services and the servers and executes the assertions
\* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -*/
::class "DBUS.testGroup" public MIXINCLASS ooTestCase 
::method init class
  forward class (super) continue
  self~ooTestType = self~FRAMEWORK_EXAMPLE_TEST
  say "DBusVersion():" DBusVersion()
   
::method test_connectionNames                 -- test three different approaches to connect to DBus
  long_se = .DBus~connect('session')          -- tests system wide predefined session bus
  medium_se =.DBus~new('session')             -- test derived from testMultipleConnections.rex
  short_se = .DBus~session
  self~assertSame(short_se~busName('unique'),medium_se~busName('unique'))
  self~assertSame(medium_se~busName('unique'),long_se~busName('unique')) 
  long_sy = .DBus~connect('system')        -- tests system wide predefined system bus 
  medium_sy =.DBus~new('system')         
  short_sy = .DBus~system
  self~assertSame(short_sy~busName('unique'),medium_sy~busName('unique'))
  self~assertSame(medium_sy~busName('unique'),long_sy~busName('unique'))  
  
  self~assertNotSame(long_se,long_sy)   -- assert whether system and session bus are different
  self~assertNotSame(medium_se,medium_sy)
  self~assertNotSame(long_se,long_sy)
  
::method test_typecodes                                 -- assert availability of predefined typecodes
  conns = .array~of(.dbus~session,.dbus~system,.dbus~new("unix:path=/tmp/dbus-test;"), -
              .dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")) 
  do conn over conns 
  self~assertTrue(conn~query("typeCode", 'a'))		-- array
  self~assertTrue(conn~query("typeCode", 'b'))		-- boolean
  self~assertFalse(conn~query("typeCode", 'c'))		-- assert false typecode
  self~assertTrue(conn~query("typeCode", 'd'))		-- double
  self~assertFalse(conn~query("typeCode", 'f'))		-- assert false typecode
  self~assertTrue(conn~query("typeCode", 'g'))		-- signature
  --self~assertTrue(conn~query("typeCode", 'h'))	-- UNIX_FD not available on windows
  self~assertTrue(conn~query("typeCode", 'i'))		-- int32
  self~assertTrue(conn~query("typeCode", 'n'))		-- int16
  self~assertTrue(conn~query("typeCode", 'o'))		-- objectpath (String)
  self~assertTrue(conn~query("typeCode", 'q'))		-- unit16
  self~assertTrue(conn~query("typeCode", 's'))		-- string
  self~assertTrue(conn~query("typeCode", 't'))		-- unit64
  self~assertTrue(conn~query("typeCode", 'u'))  	-- unit32
  self~assertTrue(conn~query("typeCode", 'v'))  	-- variant
  self~assertTrue(conn~query("typeCode", 'x'))  	-- int64
  self~assertTrue(conn~query("typeCode", 'y'))		-- byte
  self~assertFalse(conn~query("typeCode", 5))		-- assert false typecode
  self~assertFalse(conn~query("typeCode", 6.5))		-- assert false typecode
/* these typeCodes must not appear in signatures on Bus*/
  self~assertTrue(conn~query("typeCode", 'r'))		-- struct, must not appear in signature
  self~assertTrue(conn~query("typeCode", 'e')) 		-- Dict entry, must not appear in signature
  end
 
::method test_misc                                      
  conns = .array~of(.dbus~session,.dbus~system)
  do conn over conns            
  self~assertTrue(conn~query('Authenticated'))		-- different methods to query authentication
  self~assertTrue(conn~query('A'))			-- should be true
  self~assertTrue(conn~query('isAuthenticated'))
  self~assertTrue(conn~query('isA'))
  
  self~assertTrue(conn~query('Open'))    		-- different methods to query openness
  self~assertTrue(conn~query('O'))  			-- should be true
  self~assertTrue(conn~query('isOpen'))  
  self~assertTrue(conn~query('isO'))   
  
  self~assertTrue(conn~query('Connected'))		-- different methods to query openness
  self~assertTrue(conn~query('C'))			-- should be true
  self~assertTrue(conn~query('isConnected'))  
  self~assertTrue(conn~query('isC'))   
  end 
  
  conns = .array~of(.dbus~new("unix:path=/tmp/dbus-test;"), -
       .dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;"))
  do conn over conns            
  self~assertTrue(conn~query('Open'))    		-- different methods to query openness
  self~assertTrue(conn~query('O'))  			-- should be true
  self~assertTrue(conn~query('isOpen'))  
  self~assertTrue(conn~query('isO'))   
  
  self~assertTrue(conn~query('Connected'))		-- different methods to query openness
  self~assertTrue(conn~query('C'))			-- should be true
  self~assertTrue(conn~query('isConnected'))  
  self~assertTrue(conn~query('isC'))   
  end 
  
::method test_properties          -- test if write, read and readwrite parameters work
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  dbustest2 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  
  dbustest3 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  
  dbustest4 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  
  dbustest5 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService5")  
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 =privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
    
  -- Info is the readonly, Setinfo the writeonly, and methodCalled the read/write property
  -- short syssleep is necessary beteen setting and getting the value
  nfo = dbustest~Info
  readwritevalue = dbustest~MethodName
  dbustest~SetInfo('test_properties')
  dbustest~MethodName('test_properties')
  call syssleep 0.1
  self~assertNotSame(nfo,dbustest~Info, "should not be the same as set to another value") 
  self~assertNotSame(readwritevalue,dbustest~MethodName, "should not be the same as set to another value") 
  dbustest~SetInfo(nfo)
  dbustest~MethodName(readwritevalue)
  call syssleep 0.1 
  self~assertSame(readwritevalue,dbustest~MethodName, "should be the same as set so") 
  self~assertSame(nfo,dbustest~Info, "should be the same as set so") 
  
  nfo = dbustest2~Info
  readwritevalue = dbustest2~MethodName
  dbustest2~SetInfo('test_properties')
  dbustest2~MethodName('test_properties')
  call syssleep 0.1
  self~assertNotSame(nfo,dbustest2~Info, "should not be the same as set to another value") 
  self~assertNotSame(readwritevalue,dbustest2~MethodName, "should not be the same as set to another value") 
  dbustest2~SetInfo(nfo)
  dbustest2~MethodName(readwritevalue)
  call syssleep 0.1 
  self~assertSame(readwritevalue,dbustest2~MethodName, "should be the same as set so") 
  self~assertSame(nfo,dbustest2~Info, "should be the same as set so") 
  
  nfo = dbustest3~Info
  readwritevalue = dbustest3~MethodName
  dbustest3~SetInfo('test_properties')
  dbustest3~MethodName('test_properties')
  call syssleep 0.1
  self~assertNotSame(nfo,dbustest3~Info, "should not be the same as set to another value") 
  self~assertNotSame(readwritevalue,dbustest3~MethodName, "should not be the same as set to another value") 
  dbustest3~SetInfo(nfo)
  dbustest3~MethodName(readwritevalue)
  call syssleep 0.1 
  self~assertSame(readwritevalue,dbustest3~MethodName, "should be the same as set so") 
  self~assertSame(nfo,dbustest3~Info, "should be the same as set so") 
 
  nfo = dbustest4~Info
  readwritevalue = dbustest4~MethodName
  dbustest4~SetInfo('test_properties')
  dbustest4~MethodName('test_properties')
  call syssleep 0.1
  self~assertNotSame(nfo,dbustest4~Info, "should not be the same as set to another value") 
  self~assertNotSame(readwritevalue,dbustest4~MethodName, "should not be the same as set to another value") 
  dbustest4~SetInfo(nfo)
  dbustest4~MethodName(readwritevalue)
  call syssleep 0.1 
  self~assertSame(readwritevalue,dbustest4~MethodName, "should be the same as set so") 
  self~assertSame(nfo,dbustest4~Info, "should be the same as set so") 
  
  nfo = privateserver~Info
  readwritevalue = privateserver~MethodName
  privateserver~SetInfo('test_properties')
  privateserver~MethodName('test_properties')
  call syssleep 0.1
  self~assertNotSame(nfo,privateserver~Info, "should not be the same as set to another value") 
  self~assertNotSame(readwritevalue,privateserver~MethodName, "should not be the same as set to another value") 
  privateserver~SetInfo(nfo)
  privateserver~MethodName(readwritevalue)
  call syssleep 0.1 
  self~assertSame(readwritevalue,privateserver~MethodName, "should be the same as set so") 
  self~assertSame(nfo,privateserver~Info, "should be the same as set so")   
    
  nfo = privateserver2~Info
  readwritevalue = privateserver2~MethodName
  privateserver2~SetInfo('test_properties')
  privateserver2~MethodName('test_properties')
  call syssleep 0.1
  self~assertNotSame(nfo,privateserver2~Info, "should not be the same as set to another value") 
  self~assertNotSame(readwritevalue,privateserver2~MethodName, "should not be the same as set to another value") 
  privateserver2~SetInfo(nfo)
  privateserver2~MethodName(readwritevalue)
  call syssleep 0.1 
  self~assertSame(readwritevalue,privateserver2~MethodName, "should be the same as set so") 
  self~assertSame(nfo,privateserver2~Info, "should be the same as set so")     
      
::method test_properties_with_SetandGet
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  dbustest2 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")
  dbustest3 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")
  dbustest4 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")
  dbustest5 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService5")
  interface = 'oorexx.dbus.ooTestService'
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 =privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 

 -- set info with a boxed signature
 dbustest~Set(interface, 'SetInfo', dbus.box('s','boxed'))
 dbustest2~Set(interface, 'SetInfo', dbus.box('s','boxed'))
 dbustest3~Set(interface, 'SetInfo', dbus.box('s','boxed'))
 dbustest4~Set(interface, 'SetInfo', dbus.box('s','boxed'))
 privateserver~Set(interface, 'SetInfo', dbus.box('s','boxed'))
 privateserver2~Set(interface, 'SetInfo', dbus.box('s','boxed'))
    call syssleep 0.1
 self~assertSame('boxed',dbustest~Get(interface, 'Info'), "should be the same as set so") 
 self~assertSame('boxed',dbustest2~Get(interface, 'Info'), "should be the same as set so") 
 self~assertSame('boxed',dbustest3~Get(interface, 'Info'), "should be the same as set so")
 self~assertSame('boxed',dbustest4~Get(interface, 'Info'), "should be the same as set so") 
 self~assertSame('boxed',privateserver~Get(interface, 'Info'), "should be the same as set so")
 self~assertSame('boxed',privateserver2~Get(interface, 'Info'), "should be the same as set so") 
 -- set info unboxed
 dbustest~Set(interface, 'SetInfo', 'withoutboxing')
 dbustest2~Set(interface, 'SetInfo', 'withoutboxing')
 dbustest3~Set(interface, 'SetInfo', 'withoutboxing')
 dbustest4~Set(interface, 'SetInfo', 'withoutboxing')
 privateserver~Set(interface, 'SetInfo', 'withoutboxing')
 privateserver2~Set(interface, 'SetInfo', 'withoutboxing')
   call syssleep 0.1
 self~assertSame('withoutboxing',dbustest~Get(interface, 'Info'), "should be the same as set so") 
 self~assertSame('withoutboxing',dbustest2~Get(interface, 'Info'), "should be the same as set so") 
 self~assertSame('withoutboxing',dbustest3~Get(interface, 'Info'), "should be the same as set so") 
 self~assertSame('withoutboxing',dbustest4~Get(interface, 'Info'), "should be the same as set so") 
 self~assertSame('withoutboxing',privateserver~Get(interface, 'Info'), "should be the same as set so") 
 self~assertSame('withoutboxing',privateserver2~Get(interface, 'Info'), "should be the same as set so") 
  -- set methodname attribute
  dbustest~Set(interface, 'MethodName', dbus.box('s','boxed'))
  dbustest2~Set(interface, 'MethodName', dbus.box('s','boxed')) 
  dbustest3~Set(interface, 'MethodName', dbus.box('s','boxed')) 
  dbustest4~Set(interface, 'MethodName', dbus.box('s','boxed')) 
  privateserver~Set(interface, 'MethodName', dbus.box('s','boxed')) 
  privateserver2~Set(interface, 'MethodName', dbus.box('s','boxed')) 
    call syssleep 0.1
 self~assertSame('boxed',dbustest~Get(interface, 'MethodName'), "should be the same as set so") 
 self~assertSame('boxed',dbustest2~Get(interface, 'MethodName'), "should be the same as set so") 
 self~assertSame('boxed',dbustest3~Get(interface, 'MethodName'), "should be the same as set so") 
 self~assertSame('boxed',dbustest4~Get(interface, 'MethodName'), "should be the same as set so") 
 self~assertSame('boxed',privateserver~Get(interface, 'MethodName'), "should be the same as set so") 
 self~assertSame('boxed',privateserver2~Get(interface, 'MethodName'), "should be the same as set so") 
 -- set methodname attribute without boxing
 dbustest~Set(interface, 'MethodName', 'withoutboxing')
 dbustest2~Set(interface, 'MethodName', 'withoutboxing')
 dbustest3~Set(interface, 'MethodName', 'withoutboxing')
 dbustest4~Set(interface, 'MethodName', 'withoutboxing')
 privateserver~Set(interface, 'MethodName', 'withoutboxing')
 privateserver2~Set(interface, 'MethodName', 'withoutboxing')
   call syssleep 0.1
 self~assertSame('withoutboxing',dbustest~Get(interface, 'MethodName'), "should be the same as set so") 
 self~assertSame('withoutboxing',dbustest2~Get(interface, 'MethodName'), "should be the same as set so") 
 self~assertSame('withoutboxing',dbustest3~Get(interface, 'MethodName'), "should be the same as set so") 
 self~assertSame('withoutboxing',dbustest4~Get(interface, 'MethodName'), "should be the same as set so") 
  self~assertSame('withoutboxing',privateserver~Get(interface, 'MethodName'), "should be the same as set so") 
 self~assertSame('withoutboxing',privateserver2~Get(interface, 'MethodName'), "should be the same as set so") 
   
 ::method test_properties_error_set_readonly
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
 self~expectSyntax(93.900)
 dbustest~Info('set readonly value')
 
 ::method test_properties_error_set_readonly2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2") 
 self~expectSyntax(93.900)
 dbustest~Info('set readonly value')
 
  ::method test_properties_error_set_readonly3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3") 
 self~expectSyntax(93.900)
 dbustest~Info('set readonly value')

::method test_properties_error_set_readonly4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4") 
  self~expectSyntax(93.900)
  dbustest~Info('set readonly value')
 
::method test_properties_error_set_readonly5 
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  self~expectSyntax(93.900)
  privateserver~Info('set readonly value')
  
::method test_properties_error_set_readonly6  
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 =privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  self~expectSyntax(93.900)
  privateserver2~Info('set readonly value')

::method test_properties_set_version2
  -- it is also possible to set properties with test~property=newvalue 
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  
  dbustest~MethodName='set attribute with ='
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2") 
  dbustest~MethodName='set attribute with ='
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3") 
  dbustest~MethodName='set attribute with ='
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4") 
  dbustest~MethodName='set attribute with ='
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 =privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateserver~MethodName='set attribute with ='
  privateserver2~MethodName='set attribute with ='
   call syssleep 0.1

 self~assertSame('set attribute with =', dbustest~MethodName)
 self~assertSame('set attribute with =', dbustest~MethodName)
 self~assertSame('set attribute with =', dbustest~MethodName)
 self~assertSame('set attribute with =', dbustest~MethodName)
 self~assertSame('set attribute with =', privateserver~MethodName)
 self~assertSame('set attribute with =', privateserver2~MethodName)
 
::method test_properties_error_read_writeonly
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  
  self~expectSyntax(93.900)
  say dbustest~SetInfo
 
::method test_properties_error_read_writeonly2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2") 
  self~expectSyntax(93.900)
  say dbustest~SetInfo
 
::method test_properties_error_read_writeonly3
 dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  
 self~expectSyntax(93.900)
 say dbustest~SetInfo
 
::method test_properties_error_read_writeonly4
 dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  
 self~expectSyntax(93.900)
 say dbustest~SetInfo
    
::method test_properties_error_read_writeonly5  
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  self~expectSyntax(93.900)
  say privateserver~SetInfo
   
::method test_properties_error_read_writeonly6
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  self~expectSyntax(93.900)
  say privateserver2~SetInfo
   
::method test_dbusname                            -- test release and request of dbus names
  busName = 'oorexx.dbus.Test'
  conn = .dbus~session
  
  self~assertEquals(.false,conn~busName("hasowner", busName)) -- test if the busName already has an owner
  res= conn~busName("request", busName)                 -- request name for the first time
  self~assertEquals(.dbus.dir~PrimaryOwner,res)         -- test if service became primary owner of the name
  self~assertEquals(.true,conn~busName("hasowner", busName))  -- test if the busName is owned 
  res=conn~busName("release", busName)                  -- release name ownership
  self~assertEquals(.dbus.dir~Released,res)             -- test release ownership

  self~assertEquals(.false,conn~busName("hasowner", busName)) -- test if name release was successful
  res=conn~busName("request", busName)                 -- request name for the first time again
  self~assertEquals(.dbus.dir~PrimaryOwner,res)        -- test if service is primary owner of the name now - REQUEST_NAME_REPLY_PRIMARY_OWNER
  res=conn~busName("request", busName)                 -- request name again
  self~assertEquals(.dbus.dir~AlreadyOwner,res)        -- test if name was defined already - REQUEST_NAME_REPLY_ALREADY_OWNER 
  res=conn~busName("request", "org.freedesktop.Notifications")      -- request another name
  self~assertEquals(.dbus.dir~Exists,res)              -- DBUS_REQUEST_NAME_REPLY_EXISTS
  
  res=conn~busName("release", busName)                 -- release name ownership again 
  self~assertEquals(.dbus.dir~Released,res)            -- test if name release was successful - RELEASE_NAME_REPLY_RELEASED
  self~assertEquals(.false,conn~busName("hasowner", busName))      -- test if name has an owner
  res=conn~busName("release", busName)                -- release name ownership although already released
  self~assertEquals(.dbus.dir~NonExistent,res)        -- test if name release was successful 
  res=conn~busName("release","org.freedesktop.Notifications") -- release name ownership we are not owner  
  self~assertEquals(.dbus.dir~NotOwner,res)           -- test if ownership is not ours - RELEASE_NAME_REPLY_NOT_OWNER

  -- test flags 
  res=conn~busName("request", busName,.dbus.dir~AllowReplacement) 
  self~assertEquals(.dbus.dir~PrimaryOwner,res) 
  
   res=conn~busName("request", busName,.dbus.dir~AllowReplacement) 
  self~assertEquals(.dbus.dir~AlreadyOwner,res) 
 
   res=conn~busName("release", busName)         -- release name ownership again 
  self~assertEquals(.dbus.dir~Released,res)  
  
 -- how to test replacement and queuing? (same unique id) start extra program? 
 
 -- not allowed to own the service "org.freedesktop.DBus" because it is reserved for D-Bus' use only
  self~expectSyntax(93.900)
  res=conn~busName("request", "org.freedesktop.DBus", "not allowed to own")      
  
::method test_dbusname_codes                               -- test release and request of dbus names
  busName = 'oorexx.dbus.Test'
  conn=.dbus~session
  self~assertEquals(0,conn~busName("hasowner", busName))     -- test if the busName already has an owner
  self~assertEquals(1,conn~busName("request", busName))      -- test if service became primary owner of the name
  self~assertEquals(1,conn~busName("hasowner", busName))     -- test if the busName is owned 
  self~assertEquals(1,conn~busName("release", busName))      -- test if name has an owner
  self~assertEquals(0,conn~busName("hasowner", busName))     -- test if name release was successful
  self~assertEquals(1,conn~busName("request", busName))      -- test if service is primary owner of the name  
  
  self~assertEquals(4,conn~busName("request", busName))      -- test if name was defined already - REQUEST_NAME_REPLY_ALREADY_OWNER 
  res=conn~busName("request", "org.freedesktop.Notifications")      -- request another name
  self~assertEquals(3,res)                                   -- DBUS_REQUEST_NAME_REPLY_EXISTS
  self~assertEquals(1,conn~busName("release", busName))      -- test if name release was successful - RELEASE_NAME_REPLY_RELEASED
  self~assertEquals(0,conn~busName("hasowner", busName))           -- test if name has an owner
  self~assertEquals(2,conn~busName("release", busName)) -- test if name release was successful 
  self~assertEquals(3,conn~busName("release","org.freedesktop.Notifications"))   -- release name ownership we are not owner  

--  produce debug messages on command line 
::method test_dbusname_illegalvalues                   -- test release and request of dbus names
  busName = 'oorexx.dbus.Test'
  conn=.dbus~session 
  -- assert illegal busnames
  busName = ""  -- empty busname
  self~assertFalse(conn~busName("request", busName))
  busName = "."  -- illegal busname at least two elements necessary
  self~assertFalse(conn~busName("request", busName))
  busName = ".."  -- illegal busname, characters are required
  self~assertFalse(conn~busName("request", busName))
  busName = "ööRexx.sörviß"  -- illegal characters in busname
  self~assertFalse(conn~busName("request", busName))
  busName = "Test.Test"~copies(200)  -- illegal busname, to many characters
  self~assertFalse(conn~busName("request", busName))
   
::method test_dbusobjects_strings
  busname = "oorexx.dbus.ooTestService"
  dbustest = .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService")  -- get the dbus object
  dbustest2 = .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2")  -- get the dbus object
  dbustest3 = .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3")  -- get the dbus object
  dbustest4 = .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4")  -- get the dbus object
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
 
  self~assertEquals("",dbustest~ReplyString(""), "empty")
  self~assertEquals("a",dbustest~ReplyString("a"), "short")
  self~assertEquals("abcdefghijklmnopjrstuvwxyz123456789",dbustest~ReplyString("abcdefghijklmnopjrstuvwxyz123456789"), "longer")
  self~assertEquals(".nil",dbustest~ReplyString(".nil"), ".nil as string")
  self~assertEquals("",dbustest~ReplyString(.nil), ".nil")    -- .nil is converted to ""
  self~assertEquals("öäü",dbustest~ReplyString("öäü"), "german umlaute")
  self~assertEquals("*~<>|",dbustest~ReplyString("*~<>|"), "*~<>|")
  self~assertEquals(1.5,dbustest~ReplyString(1.5), "1.5 as digits")
  self~assertEquals("!$%&/()=?",dbustest~ReplyString("!$%&/()=?"), "!$%&/()=?") 
  
  self~assertEquals("",dbustest2~ReplyString(""), "empty")
  self~assertEquals("a",dbustest2~ReplyString("a"), "short")
  self~assertEquals("abcdefghijklmnopjrstuvwxyz123456789",dbustest2~ReplyString("abcdefghijklmnopjrstuvwxyz123456789"), "longer")
  self~assertEquals(".nil",dbustest2~ReplyString(".nil"), ".nil as string")
  self~assertEquals("",dbustest2~ReplyString(.nil), ".nil")     -- .nil is converted to ""
  self~assertEquals("öäü",dbustest2~ReplyString("öäü"), "german umlaute")
  self~assertEquals("*~<>|",dbustest2~ReplyString("*~<>|"), "*~<>|")
  self~assertEquals(1.5,dbustest2~ReplyString(1.5), "1.5 as digits")
  self~assertEquals("!$%&/()=?",dbustest2~ReplyString("!$%&/()=?"), "!$%&/()=?") 
  
  self~assertEquals("",dbustest3~ReplyString(""), "empty")
  self~assertEquals("a",dbustest3~ReplyString("a"), "short")
  self~assertEquals("abcdefghijklmnopjrstuvwxyz123456789",dbustest3~ReplyString("abcdefghijklmnopjrstuvwxyz123456789"), "longer")
  self~assertEquals(".nil",dbustest3~ReplyString(".nil"), ".nil as string")
  self~assertEquals("",dbustest3~ReplyString(.nil), ".nil")     -- .nil is converted to ""
  self~assertEquals("öäü",dbustest3~ReplyString("öäü"), "german umlaute")
  self~assertEquals("*~<>|",dbustest3~ReplyString("*~<>|"), "*~<>|")
  self~assertEquals(1.5,dbustest3~ReplyString(1.5), "1.5 as digits")
  self~assertEquals("!$%&/()=?",dbustest3~ReplyString("!$%&/()=?"), "!$%&/()=?") 
  
  self~assertEquals("",dbustest4~ReplyString(""), "empty")
  self~assertEquals("a",dbustest4~ReplyString("a"), "short")
  self~assertEquals("abcdefghijklmnopjrstuvwxyz123456789",dbustest4~ReplyString("abcdefghijklmnopjrstuvwxyz123456789"), "longer")
  self~assertEquals(".nil",dbustest4~ReplyString(".nil"), ".nil as string")
  self~assertEquals("",dbustest4~ReplyString(.nil), ".nil")       -- .nil is converted to ""
  self~assertEquals("öäü",dbustest4~ReplyString("öäü"), "german umlaute")
  self~assertEquals("*~<>|",dbustest4~ReplyString("*~<>|"), "*~<>|")
  self~assertEquals(1.5,dbustest4~ReplyString(1.5), "1.5 as digits")
  self~assertEquals("!$%&/()=?",dbustest4~ReplyString("!$%&/()=?"), "!$%&/()=?") 
  
  self~assertEquals("",privateserver~ReplyString(""), "empty")
  self~assertEquals("a",privateserver~ReplyString("a"), "short")
  self~assertEquals("abcdefghijklmnopjrstuvwxyz123456789",privateserver~ReplyString("abcdefghijklmnopjrstuvwxyz123456789"), "longer")
  self~assertEquals(".nil",privateserver~ReplyString(".nil"), ".nil as string")
  self~assertEquals("",privateserver~ReplyString(.nil), ".nil")      -- .nil is converted to ""
  self~assertEquals("öäü",privateserver~ReplyString("öäü"), "german umlaute")
  self~assertEquals("*~<>|",privateserver~ReplyString("*~<>|"), "*~<>|")
  self~assertEquals(1.5,privateserver~ReplyString(1.5), "1.5 as digits")
  self~assertEquals("!$%&/()=?",privateserver~ReplyString("!$%&/()=?"), "!$%&/()=?") 
  
    self~assertEquals("",privateserver2~ReplyString(""), "empty")
  self~assertEquals("a",privateserver2~ReplyString("a"), "short")
  self~assertEquals("abcdefghijklmnopjrstuvwxyz123456789",privateserver2~ReplyString("abcdefghijklmnopjrstuvwxyz123456789"), "longer")
  self~assertEquals(".nil",privateserver2~ReplyString(".nil"), ".nil as string")
  self~assertEquals("",privateserver2~ReplyString(.nil), ".nil")     -- .nil is converted to ""
  self~assertEquals("öäü",privateserver2~ReplyString("öäü"), "german umlaute")
  self~assertEquals("*~<>|",privateserver2~ReplyString("*~<>|"), "*~<>|")
  self~assertEquals(1.5,privateserver2~ReplyString(1.5), "1.5 as digits")
  self~assertEquals("!$%&/()=?",privateserver2~ReplyString("!$%&/()=?"), "!$%&/()=?")   
   
  
::method test_dbusobjects_strings_missingargument
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")
  self~expectSyntax(93.903)          -- when there is no argument, given syntax error is expected
  self~assertEquals( ,dbustest~ReplyString( ), "nothing")  
  
::method test_dbusobjects_strings_missingargument2
   dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")
   self~expectSyntax(93.903)           -- when there is no argument, given syntax error is expected
   self~assertEquals( ,dbustest~ReplyString( ), "nothing") 
 
::method test_dbusobjects_strings_missingargument3
   dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")
   self~expectSyntax(93.903)           -- when there is no argument, given syntax error is expected
   self~assertEquals( ,dbustest~ReplyString( ), "nothing") 
 
::method test_dbusobjects_strings_missingargument4
   dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")
   self~expectSyntax(93.903)           -- when there is no argument, given syntax error is expected
   self~assertEquals( ,dbustest~ReplyString( ), "nothing") 

::method test_dbusobjects_strings_missingargument5
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  self~expectSyntax(93.903)           -- when there is no argument, given syntax error is expected
  self~assertEquals( ,privateserver~ReplyString( ), "nothing") 
 
::method test_dbusobjects_strings_missingargument6
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  self~expectSyntax(93.903)           -- when there is no argument, given syntax error is expected
  self~assertEquals( ,privateserver2~ReplyString( ), "nothing")   
  
::method test_dbusobjects_strings_utf8_conversion  
  busname = "oorexx.dbus.ooTestService"
  dbustest = .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") 
  dbustest2 = .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") 
  dbustest3 = .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") 
  dbustest4 = .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4")
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  
  --test set properties 
  dbustest~MethodName("test_dbusobjects_strings_utf8")
  dbustest2~MethodName("test_dbusobjects_strings_utf8")
  dbustest3~MethodName("test_dbusobjects_strings_utf8")
  dbustest4~MethodName("test_dbusobjects_strings_utf8")
  privateserver~MethodName("test_dbusobjects_strings_utf8")
  privateserver2~MethodName("test_dbusobjects_strings_utf8")
  
  germanstring = "gemäß Übereinkommen, Behörde" 
  frenchstring = "à l’école, être évidente, la façon"

   self~assertSame(germanstring,dbustest~ReplyString(germanstring), "germanstring")
   self~assertSame(frenchstring,dbustest~ReplyString(frenchstring), "frenchstring")
   self~assertSame(frenchstring,dbustest~ReplyString(stringToUtf8(frenchstring)))
   self~assertSame(germanstring,dbustest2~ReplyString(germanstring), "germanstring")
   self~assertSame(frenchstring,dbustest2~ReplyString(frenchstring), "frenchstring")
   self~assertSame(frenchstring,dbustest2~ReplyString(stringToUtf8(frenchstring)))
   self~assertSame(germanstring,dbustest3~ReplyString(germanstring), "germanstring")
   self~assertSame(frenchstring,dbustest3~ReplyString(frenchstring), "frenchstring")
   self~assertSame(frenchstring,dbustest3~ReplyString(stringToUtf8(frenchstring)))
   self~assertSame(germanstring,dbustest4~ReplyString(germanstring), "germanstring")
   self~assertSame(frenchstring,dbustest4~ReplyString(frenchstring), "frenchstring")
   self~assertSame(frenchstring,dbustest4~ReplyString(stringToUtf8(frenchstring)))
   self~assertSame(germanstring,privateserver~ReplyString(germanstring), "germanstring")
   self~assertSame(frenchstring,privateserver~ReplyString(frenchstring), "frenchstring")
   self~assertSame(frenchstring,privateserver~ReplyString(stringToUtf8(frenchstring)))
   self~assertSame(germanstring,privateserver2~ReplyString(germanstring), "germanstring")
   self~assertSame(frenchstring,privateserver2~ReplyString(frenchstring), "frenchstring")
   self~assertSame(frenchstring,privateserver2~ReplyString(stringToUtf8(frenchstring)))

  -- send all printable characters within a string, starting from dec 32
  string = xrange('20'x,'7F'x)
  self~assertEquals(string ,dbustest~ReplyString(string ), "xrange('20'x,'7F'x)")  
  self~assertEquals(string ,dbustest2~ReplyString(string ), "xrange('20'x,'7F'x)") 
  self~assertEquals(string ,dbustest3~ReplyString(string ), "xrange('20'x,'7F'x)")  
  self~assertEquals(string ,dbustest4~ReplyString(string ), "xrange('20'x,'7F'x)")  
  self~assertEquals(string ,privateserver~ReplyString(string ), "xrange('20'x,'7F'x)")  
  self~assertEquals(string ,privateserver2~ReplyString(string ), "xrange('20'x,'7F'x)")    
   
  -- invalid character hex 81 do not reference a character
  -- self~assertEquals('8E'x,dbustest~ReplyString('8E'x), "'8E'x Ž")  
  -- self~assertEquals('81'x,dbustest2~ReplyString('81'x), "'81'x")  
  -- self~assertEquals('81'x,dbustest3~ReplyString('81'x), "'81'x")  
  -- self~assertEquals('81'x,dbustest4~ReplyString('81'x), "'81'x")  
  -- self~assertEquals('81'x,privateserver~ReplyString('81'x), "'81'x")  
  -- self~assertEquals('81'x,privateserver2~ReplyString('81'x), "'81'x")  
  
  -- special characters 
  self~assertEquals('03'x,dbustest~ReplyString('03'x), "'03'x")  -- non printable etx
  self~assertEquals('½',dbustest~ReplyString('c2bd'x), " ½  c2bd ")
  self~assertEquals('ö', dbustest2~ReplyString('c3b6'x), "'81'x")  
  self~assertEquals('€',dbustest~ReplyString('€'), "€")  
  self~assertEquals('†',dbustest~ReplyString('†'), "€") 
  self~assertEquals('Œ',dbustest~ReplyString('Œ'), "Œ") 
  self~assertEquals('©',dbustest~ReplyString('©'), "©") 
  self~assertEquals('03'x,dbustest2~ReplyString('03'x), "'03'x")  
  self~assertEquals('€',dbustest2~ReplyString('€'), "€")  
  self~assertEquals('†',dbustest2~ReplyString('†'), "€") 
  self~assertEquals('Œ',dbustest2~ReplyString('Œ'), "Œ") 
  self~assertEquals('©',dbustest2~ReplyString('©'), "©") 
  self~assertEquals('03'x,dbustest3~ReplyString('03'x), "'03'x")  
  self~assertEquals('€',dbustest3~ReplyString('€'), "€")  
  self~assertEquals('†',dbustest3~ReplyString('†'), "€") 
  self~assertEquals('Œ',dbustest3~ReplyString('Œ'), "Œ") 
  self~assertEquals('©',dbustest3~ReplyString('©'), "©") 
  self~assertEquals('03'x,dbustest4~ReplyString('03'x), "'03'x")  
  self~assertEquals('€',dbustest4~ReplyString('€'), "€")  
  self~assertEquals('†',dbustest4~ReplyString('†'), "€") 
  self~assertEquals('Œ',dbustest4~ReplyString('Œ'), "Œ") 
  self~assertEquals('©',dbustest4~ReplyString('©'), "©") 
  self~assertEquals('03'x,privateserver~ReplyString('03'x), "'03'x")  
  self~assertEquals('€',privateserver~ReplyString('€'), "€")  
  self~assertEquals('†',privateserver~ReplyString('†'), "€") 
  self~assertEquals('Œ',privateserver~ReplyString('Œ'), "Œ") 
  self~assertEquals('©',privateserver~ReplyString('©'), "©") 
  self~assertEquals('03'x,privateserver2~ReplyString('03'x), "'03'x")  
  self~assertEquals('€',privateserver2~ReplyString('€'), "€")  
  self~assertEquals('†',privateserver2~ReplyString('†'), "€") 
  self~assertEquals('Œ',privateserver2~ReplyString('Œ'), "Œ") 
  self~assertEquals('©',privateserver2~ReplyString('©'), "©") 
  
  -- test character Ö
  self~assertEquals('Ö',dbustest~ReplyString('c396'x), "Ö")  
  self~assertSame('Ö',dbustest~ReplyString('Ö'), "Ö") 
  self~assertEquals('Ö',dbustest~ReplyString('Ö'), "Ö") 
  self~assertEquals('Ö',dbustest2~ReplyString('c396'x), "Ö")  
  self~assertSame('Ö',dbustest2~ReplyString('Ö'), "Ö") 
  self~assertEquals('Ö',dbustest2~ReplyString('Ö'), "Ö") 
  self~assertEquals('Ö',dbustest3~ReplyString('c396'x), "Ö")  
  self~assertSame('Ö',dbustest3~ReplyString('Ö'), "Ö") 
  self~assertEquals('Ö',dbustest3~ReplyString('Ö'), "Ö") 
  self~assertEquals('Ö',dbustest4~ReplyString('c396'x), "Ö")  
  self~assertSame('Ö',dbustest4~ReplyString('Ö'), "Ö") 
  self~assertEquals('Ö',dbustest4~ReplyString('Ö'), "Ö") 
  self~assertEquals('Ö',privateserver~ReplyString('c396'x), "Ö")  
  self~assertSame('Ö',privateserver~ReplyString('Ö'), "Ö") 
  self~assertEquals('Ö',privateserver~ReplyString('Ö'), "Ö") 
  self~assertEquals('Ö',privateserver2~ReplyString('c396'x), "Ö")  
  self~assertSame('Ö',privateserver2~ReplyString('Ö'), "Ö") 
  self~assertEquals('Ö',privateserver2~ReplyString('Ö'), "Ö") 

-- test extended ASCII codes - these characters produce errors, if sent as regular string
-- if converted with stringToUtf8 it works, but only if expected and sent strings are both converted
  string = xrange('80'x,'FF'x)
  self~assertEquals(stringToUtf8(string) ,dbustest~ReplyString(stringToUtf8(string)), "xrange('80'x,'FF'x)") 
  self~assertEquals(stringToUtf8(string) ,dbustest2~ReplyString(stringToUtf8(string)), "xrange('80'x,'FF'x)") 
  self~assertEquals(stringToUtf8(string) ,dbustest3~ReplyString(stringToUtf8(string)), "xrange('80'x,'FF'x)") 
  self~assertEquals(stringToUtf8(string) ,dbustest4~ReplyString(stringToUtf8(string)), "xrange('80'x,'FF'x)") 
  self~assertEquals(stringToUtf8(string) ,privateserver~ReplyString(stringToUtf8(string)), "xrange('80'x,'FF'x)") 
  self~assertEquals(stringToUtf8(string) ,privateserver2~ReplyString(stringToUtf8(string)), "xrange('80'x,'FF'x)")  
  
   -- test get properties
  self~assertSame("test_dbusobjects_strings_utf8",dbustest~MethodName, "test if property set was sucessful")
  self~assertSame("test_dbusobjects_strings_utf8",dbustest2~MethodName, "test if property set was sucessful")
  self~assertSame("test_dbusobjects_strings_utf8",dbustest3~MethodName, "test if property set was sucessful")
  self~assertSame("test_dbusobjects_strings_utf8",dbustest4~MethodName, "test if property set was sucessful")
  self~assertSame("test_dbusobjects_strings_utf8",privateserver~MethodName, "test if property set was sucessful")
  self~assertSame("test_dbusobjects_strings_utf8",privateserver2~MethodName, "test if property set was sucessful")
  
  -- without conversion it is not possible to send the string
  self~expectSyntax(93.900)
  self~assertEquals(string ,dbustest~ReplyString(string), "xrange('80'x,'FF'x)") 
     
     
::method test_dbusobjects_strings_extendedcharacters     
  busname = "oorexx.dbus.ooTestService"

  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  
  dbustests=.array~of(.dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4"), -
                      privateserver, privateserver2)
  
  do dbustest over dbustests
  self~assertEquals("¡",dbustest~ReplyString("¡"), )
  self~assertEquals("¢",dbustest~ReplyString("¢"), ) 
  self~assertEquals("£",dbustest~ReplyString("£"), )
  self~assertEquals("¤",dbustest~ReplyString("¤"), )
  self~assertEquals("¥",dbustest~ReplyString("¥"), )
  self~assertEquals("¦",dbustest~ReplyString("¦"), )
  self~assertEquals("§",dbustest~ReplyString("§"), ) 
  self~assertEquals("¨",dbustest~ReplyString("¨"), )
  self~assertEquals("©",dbustest~ReplyString("©"), )
  self~assertEquals("ª",dbustest~ReplyString("ª"), )
  self~assertEquals("«",dbustest~ReplyString("«"), )
  self~assertEquals("¬",dbustest~ReplyString("¬"), ) 
  self~assertEquals("®",dbustest~ReplyString("®"), )
  self~assertEquals("¯",dbustest~ReplyString("¯"), )
  self~assertEquals("°",dbustest~ReplyString("°"), )
  self~assertEquals("±",dbustest~ReplyString("±"), )
  self~assertEquals("²",dbustest~ReplyString("²"), ) 
  self~assertEquals("³",dbustest~ReplyString("³"), )
  self~assertEquals("´",dbustest~ReplyString("´"), )
  self~assertEquals("µ",dbustest~ReplyString("µ"), )
  self~assertEquals("¶",dbustest~ReplyString("¶"), )
  self~assertEquals("·",dbustest~ReplyString("·"), ) 
  self~assertEquals("¸",dbustest~ReplyString("¸"), )
  self~assertEquals("¹",dbustest~ReplyString("¹"), )
  self~assertEquals("º",dbustest~ReplyString("º"), )
  self~assertEquals("»",dbustest~ReplyString("»"), )
  self~assertEquals("¼",dbustest~ReplyString("¼"), ) 
  self~assertEquals("½",dbustest~ReplyString("½"), )
  self~assertEquals("¾",dbustest~ReplyString("¾"), )
  self~assertEquals("¿",dbustest~ReplyString("¿"), )
  self~assertEquals("À",dbustest~ReplyString("À"), )
  self~assertEquals("Á",dbustest~ReplyString("Á"), ) 
  self~assertEquals("Â",dbustest~ReplyString("Â"), )
  self~assertEquals("Ã",dbustest~ReplyString("Ã"), )
  self~assertEquals("Ä",dbustest~ReplyString("Ä"), )
  self~assertEquals("Å",dbustest~ReplyString("Å"), )
  self~assertEquals("Æ",dbustest~ReplyString("Æ"), ) 
  self~assertEquals("Ç",dbustest~ReplyString("Ç"), )
  self~assertEquals("È",dbustest~ReplyString("È"), )
  self~assertEquals("É",dbustest~ReplyString("É"), )
  self~assertEquals("Ê",dbustest~ReplyString("Ê"), ) 
  self~assertEquals("Ë",dbustest~ReplyString("Ë"), ) 
  self~assertEquals("Ì",dbustest~ReplyString("Ì"), ) 
  self~assertEquals("Í",dbustest~ReplyString("Í"), ) 
  self~assertEquals("Î",dbustest~ReplyString("Î"), ) 
  self~assertEquals("Ï",dbustest~ReplyString("Ï"), ) 
  self~assertEquals("Ð",dbustest~ReplyString("Ð"), ) 
  self~assertEquals("Ñ",dbustest~ReplyString("Ñ"), ) 
  self~assertEquals("Ò",dbustest~ReplyString("Ò"), ) 
  self~assertEquals("Ó",dbustest~ReplyString("Ó"), ) 
  self~assertEquals("Ô",dbustest~ReplyString("Ô"), ) 
  self~assertEquals("Õ",dbustest~ReplyString("Õ"), ) 
  self~assertEquals("Ö",dbustest~ReplyString("Ö"), ) 
  self~assertEquals("×",dbustest~ReplyString("×"), ) 
  self~assertEquals("Ø",dbustest~ReplyString("Ø"), )
  self~assertEquals("Ù",dbustest~ReplyString("Ù"), )
  self~assertEquals("Ú",dbustest~ReplyString("Ú"), )
  self~assertEquals("Û",dbustest~ReplyString("Û"), )
  self~assertEquals("Ü",dbustest~ReplyString("Ü"), )
  self~assertEquals("Ý",dbustest~ReplyString("Ý"), )
  self~assertEquals("Þ",dbustest~ReplyString("Þ"), )
  self~assertEquals("ß",dbustest~ReplyString("ß"), )
  self~assertEquals("à",dbustest~ReplyString("à"), )
  self~assertEquals("á",dbustest~ReplyString("á"), )
  self~assertEquals("â",dbustest~ReplyString("â"), )
  self~assertEquals("ã",dbustest~ReplyString("ã"), )
  self~assertEquals("ä",dbustest~ReplyString("ä"), )
  self~assertEquals("å",dbustest~ReplyString("å"), )
  self~assertEquals("æ",dbustest~ReplyString("æ"), )
  self~assertEquals("ç",dbustest~ReplyString("ç"), )
  self~assertEquals("è",dbustest~ReplyString("è"), )
  self~assertEquals("é",dbustest~ReplyString("é"), )
  self~assertEquals("ê",dbustest~ReplyString("ê"), )
  self~assertEquals("ë",dbustest~ReplyString("ë"), )
  self~assertEquals("ì",dbustest~ReplyString("ì"), )
  self~assertEquals("í",dbustest~ReplyString("í"), )
  self~assertEquals("î",dbustest~ReplyString("î"), )
  self~assertEquals("ï",dbustest~ReplyString("ï"), )
  self~assertEquals("ð",dbustest~ReplyString("ð"), )
  self~assertEquals("ñ",dbustest~ReplyString("ñ"), )
  self~assertEquals("ò",dbustest~ReplyString("ò"), )
  self~assertEquals("ó",dbustest~ReplyString("ó"), )
  self~assertEquals("ô",dbustest~ReplyString("ô"), )
  self~assertEquals("õ",dbustest~ReplyString("õ"), )
  self~assertEquals("ö",dbustest~ReplyString("ö"), )
  self~assertEquals("÷",dbustest~ReplyString("÷"), )
  self~assertEquals("ø",dbustest~ReplyString("ø"), )
  self~assertEquals("ù",dbustest~ReplyString("ù"), )
  self~assertEquals("ú",dbustest~ReplyString("ú"), )
  self~assertEquals("û",dbustest~ReplyString("û"), )
  self~assertEquals("ü",dbustest~ReplyString("ü"), )
  self~assertEquals("ý",dbustest~ReplyString("ý"), )
  self~assertEquals("þ",dbustest~ReplyString("þ"), )
  self~assertEquals("ÿ",dbustest~ReplyString("ÿ"), )
  end   
     
::method test_dbusobjects_strings_direct
  conn = .dbus~session
  interface ='oorexx.dbus.ooTestService'
  busname ='oorexx.dbus.ooTestService'
  objectpath ='/oorexx/dbus/ooTestService'
  frenchstring = "à l’école, être évidente, la façon"
  germanstring = "gemäß Übereinkommen, Behörde" 
  specialsigns="!$%&/()=?"
  longstring="abcdefghijklmnopjrstuvwxyz123456789"~copies(50)
    
  self~assertEquals("", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', ""), "empty")
  self~assertEquals("a", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', "a"), "short")
  self~assertEquals(longstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', longstring), "longer")
  self~assertEquals(".nil", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', ".nil"), ".nil as text")
  -- .nil is converted to a "" string
  self~assertEquals("", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', .nil), ".nil")
  self~assertEquals("öäü", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', "öäü"), "öäü")
  self~assertEquals(1.5, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', 1.5), "1.5")
  self~assertEquals(specialsigns, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', specialsigns), "!$%&/()=?")
  self~assertSame(frenchstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', frenchstring), "frenchstring")
  self~assertSame(germanstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', germanstring), "germanstring")

  objectpath ='/oorexx/dbus/ooTestService2'

self~assertEquals("", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', ""), "empty")
  self~assertEquals("a", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', "a"), "short")
  self~assertEquals(longstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', longstring), "longer")
  self~assertEquals(".nil", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', ".nil"), ".nil as text")
  -- .nil is converted to a "" string
  self~assertEquals("", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', .nil), ".nil")
  self~assertEquals("öäü", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', "öäü"), "öäü")
  self~assertEquals(1.5, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', 1.5), "1.5")
  self~assertEquals(specialsigns, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', specialsigns), "!$%&/()=?")
  self~assertSame(frenchstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', frenchstring), "frenchstring")
  self~assertSame(germanstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', germanstring), "germanstring")

  objectpath ='/oorexx/dbus/ooTestService3'

self~assertEquals("", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', ""), "empty")
  self~assertEquals("a", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', "a"), "short")
  self~assertEquals(longstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', longstring), "longer")
  self~assertEquals(".nil", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', ".nil"), ".nil as text")
  -- .nil is converted to a "" string
  self~assertEquals("", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', .nil), ".nil")
  self~assertEquals("öäü", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', "öäü"), "öäü")
  self~assertEquals(1.5, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', 1.5), "1.5")
  self~assertEquals(specialsigns, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', specialsigns), "!$%&/()=?")
  self~assertSame(frenchstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', frenchstring), "frenchstring")
  self~assertSame(germanstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', germanstring), "germanstring")

  objectpath ='/oorexx/dbus/ooTestService4'
  self~assertEquals("", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', ""), "empty")
  self~assertEquals("a", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', "a"), "short")
  self~assertEquals(longstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', longstring), "longer")
  self~assertEquals(".nil", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', ".nil"), ".nil as text")
  -- .nil is converted to a "" string
  self~assertEquals("", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', .nil), ".nil")
  self~assertEquals("öäü", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', "öäü"), "öäü")
  self~assertEquals(1.5, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', 1.5), "1.5")
  self~assertEquals(specialsigns, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', specialsigns), "!$%&/()=?")
  self~assertSame(frenchstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', frenchstring), "frenchstring")
  self~assertSame(germanstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', germanstring), "germanstring")
    
  -- use the unknown mechanism to return values
  objectpath ='/oorexx/dbus/ooTestService5'
  self~assertEquals("", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', ""), "empty")
  self~assertEquals("a", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', "a"), "short")
  self~assertEquals(longstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', longstring), "longer")
  self~assertEquals(".nil", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', ".nil"), ".nil as text")
  -- .nil is converted to a "" string
  self~assertEquals("", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', .nil), ".nil")
  self~assertEquals("öäü", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', "öäü"), "öäü")
  self~assertEquals(1.5, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', 1.5), "1.5")
  self~assertEquals(specialsigns, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', specialsigns), "!$%&/()=?")
  self~assertSame(frenchstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', frenchstring), "frenchstring")
  self~assertSame(germanstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', germanstring), "germanstring")

  objectpath ='/oorexx/dbus/ooTestService'
  conn =.dbus~new("unix:path=/tmp/dbus-test;")
   self~assertSame(germanstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', germanstring), "germanstring")
  self~assertEquals("", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', ""), "empty")
  self~assertEquals("a", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', "a"), "short")
  self~assertEquals(longstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', longstring), "longer")
  self~assertEquals(".nil", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', ".nil"), ".nil as text")
  -- .nil is converted to a "" string
  self~assertEquals("", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', .nil), ".nil")
  self~assertEquals("öäü", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', "öäü"), "öäü")
  self~assertEquals(1.5, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', 1.5), "1.5")
  self~assertEquals(specialsigns, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', specialsigns), "!$%&/()=?")
  self~assertSame(frenchstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', frenchstring), "frenchstring")
  self~assertSame(germanstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', germanstring), "germanstring")
  
    conn =.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
   self~assertSame(germanstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', germanstring), "germanstring")
  self~assertEquals("", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', ""), "empty")
  self~assertEquals("a", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', "a"), "short")
  self~assertEquals(longstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', longstring), "longer")
  self~assertEquals(".nil", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', ".nil"), ".nil as text")
  -- .nil is converted to a "" string
  self~assertEquals("", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', .nil), ".nil")
  self~assertEquals("öäü", conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', "öäü"), "öäü")
  self~assertEquals(1.5, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', 1.5), "1.5")
  self~assertEquals(specialsigns, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', specialsigns), "!$%&/()=?")
  self~assertSame(frenchstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', frenchstring), "frenchstring")
  self~assertSame(germanstring, conn~message('call',busname,objectpath,interface, 'ReplyString', 's','s', germanstring), "germanstring")
  
::method test_dbusobjects_strings_direct_error
  self~expectSyntax(93.903)                          -- when there is no argument, given syntax error is expected
  self~assertEquals(, .dbus~session~message('call','oorexx.dbus.ooTestService','/oorexx/dbus/ooTestService','oorexx.dbus.ooTestService', 'ReplyString', 's','s', ), "nothing")
  
 ::method test_dbusobjects_strings_direct_error1
  self~expectSyntax(93.903)                          -- when there is no argument, given syntax error is expected
  self~assertEquals(, .dbus~session~message('call','oorexx.dbus.ooTestService','/oorexx/dbus/ooTestService2','oorexx.dbus.ooTestService', 'ReplyString', 's','s', ), "nothing") 
  
  ::method test_dbusobjects_strings_direct_error2
  self~expectSyntax(93.903)                          -- when there is no argument, given syntax error is expected
  self~assertEquals(, .dbus~session~message('call','oorexx.dbus.ooTestService','/oorexx/dbus/ooTestService3','oorexx.dbus.ooTestService', 'ReplyString', 's','s', ), "nothing")  
  
 ::method test_dbusobjects_strings_direct_error3
  self~expectSyntax(93.903)                          -- when there is no argument, given syntax error is expected
  self~assertEquals(, .dbus~session~message('call','oorexx.dbus.ooTestService','/oorexx/dbus/ooTestService4','oorexx.dbus.ooTestService', 'ReplyString', 's','s', ), "nothing") 
  
 ::method test_dbusobjects_strings_direct_error4
  self~expectSyntax(93.903)                          -- when there is no argument, given syntax error is expected
  self~assertEquals(, .dbus~session~message('call','oorexx.dbus.ooTestService','/oorexx/dbus/ooTestService5','oorexx.dbus.ooTestService', 'ReplyString', 's','s', ), "nothing") 

  
::method test_dbusobjects_strings_direct_error5
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  self~expectSyntax(93.903)                          -- when there is no argument, given syntax error is expected
  self~assertEquals(, conn~message('call','oorexx.dbus.ooTestService','/oorexx/dbus/ooTestService','oorexx.dbus.ooTestService', 'ReplyString', 's','s', ), "nothing") 
  
::method test_dbusobjects_strings_direct_error6
 conn=.dbus~new("unix:path=/tmp/dbus-test;")
 self~expectSyntax(93.903)                          -- when there is no argument, given syntax error is expected
  self~assertEquals(, conn~message('call','oorexx.dbus.ooTestService','/oorexx/dbus/ooTestService','oorexx.dbus.ooTestService', 'ReplyString', 's','s', ), "nothing")  
  
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxx Signature xxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    
::method test_dbusobjects_signatures
  busname = "oorexx.dbus.ooTestService" 
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  maxlength = "i"~copies(255) -- maximal signature length is 255 characters
   
  dbustests=.array~of(.dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4"), -
                      privateserver, privateserver2)
  
  do dbustest over dbustests
  self~assertEquals("",dbustest~ReplySignature(""), "empty")
  self~assertEquals("s",dbustest~ReplySignature("s"), "string signature")
  self~assertEquals("g",dbustest~ReplySignature("g"), "signature signature")
  self~assertEquals("b",dbustest~ReplySignature("b"), "boolean")
  self~assertEquals("d",dbustest~ReplySignature("d"), "double signature")
  self~assertEquals("h",dbustest~ReplySignature("h"), "unixfd signature")
  self~assertEquals("i",dbustest~ReplySignature("i"), "integer signature")
  self~assertEquals("n",dbustest~ReplySignature("n"), "integer signature")
  self~assertEquals("q",dbustest~ReplySignature("q"), "integer signature")
  self~assertEquals("t",dbustest~ReplySignature("t"), "integer signature")
  self~assertEquals("u",dbustest~ReplySignature("u"), "integer signature")  
  self~assertEquals("o",dbustest~ReplySignature("o"), "object path signature")
  self~assertEquals("v",dbustest~ReplySignature("v"), "variant signature")
  self~assertEquals("oid",dbustest~ReplySignature("oid"), "combined oid")
  self~assertEquals("dino",dbustest~ReplySignature("dino"), "combined dino") 
  self~assertEquals("otto",dbustest~ReplySignature("otto"), "combined otto")
  self~assertEquals("bob",dbustest~ReplySignature("bob"), "combined bob")
  self~assertEquals("udo",dbustest~ReplySignature("udo"), "combined udo") 
  self~assertEquals("toni",dbustest~ReplySignature("toni"), "combined toni")
  self~assertEquals("dani",dbustest~ReplySignature("dani"), "combined dani") 
  self~assertEquals("susi",dbustest~ReplySignature("susi"), "combined susi")
  self~assertEquals("anton",dbustest~ReplySignature("anton"), "combined anton") 
  self~assertEquals(maxlength,dbustest~ReplySignature(maxlength), "max length") 
  end
 
::method test_dbusobjects_signatures_invalid_93.903
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object
  self~expectSyntax(93.903)				-- Missing argument in method; argument 1 is required
  self~assertEquals(,dbustest~ReplySignature(), "nothing")
 

   --           at this moment tests only the first method to provide introspect data
    
::method test_dbusobjects_signatures_invalid_93.900_tina
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  -- tina is not allowed because a is not followed by another signature same applies for a single "a"
  self~expectSyntax(93.900)                    -- typeCode not supported on platform
  self~assertEquals("tina",dbustest~ReplySignature("tina"), "combined tina") 
   
::method test_dbusobjects_signatures_invalid_capitalization
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object
  self~expectSyntax(93.900)
  self~assertEquals('S',dbustest~ReplySignature('S'), "S instead of s") 
    
::method test_dbusobjects_signatures_invalid_exceedmaxlength   
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object
  val = "tinaottohansundsusi"~copies(25)  -- exceed maximum length of 255
  self~expectSyntax(93.900)
  self~assertEquals(val,dbustest~ReplySignature(val), "exceed max length") 
 
::method test_dbusobjects_signatures_invalid_93.900_1 
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object
  self~expectSyntax(93.900)                         -- typeCode not supported on platform
  self~assertEquals(".nil",dbustest~ReplySignature(".nil"), ".nil")

::method test_dbusobjects_signatures_invalid_93.900_2 
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object 
  self~expectSyntax(93.900)                        -- typeCode not supported on platform
  self~assertEquals("z",dbustest~ReplySignature("z"), "wrong signature") 
  
::method test_dbusobjects_signatures_invalid_93.900_3 
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  self~expectSyntax(93.900)                      -- typeCode not supported on platform
  self~assertEquals("1",dbustest~ReplySignature("1"), "irregular 1 as string")

::method test_dbusobjects_signatures_invalid_93.900_4 
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object    
  self~expectSyntax(93.900)                      -- typeCode not supported on platform
  self~assertEquals(1,dbustest~ReplySignature(1), "irregular 1 as number")
   
  
::method test_dbusobjects_objectpath
  busname = "oorexx.dbus.ooTestService" 
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  longpath = '/oorexx/dbustest'~copies(1000)
  
  --test set properties 

  dbustests=.array~of(.dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4"), -
                      privateserver, privateserver2)
  
  do dbustest over dbustests
  say dbustest
  dbustest~MethodName("test_dbusobjects_objectpath")
  self~assertEquals("/",dbustest~ReplyObjpath("/"), "path only")
  self~assertEquals("/T",dbustest~ReplyObjpath("/T"), "/T")
  self~assertEquals("/test/path",dbustest~ReplyObjpath("/test/path"), "/test/path")
  self~assertEquals("/TEST/PATH",dbustest~ReplyObjpath("/TEST/PATH"), "/TEST/PATH")
  self~assertEquals("/1",dbustest~ReplyObjpath("/1"), "/1")  
  self~assertEquals("/1/2",dbustest~ReplyObjpath("/1/2"), "/1/2")  
  self~assertEquals("/1/2/3",dbustest~ReplyObjpath("/1/2/3"), "/1/2/3")  
  self~assertEquals("/123/123",dbustest~ReplyObjpath("/123/123"), "/123/123")  
  self~assertEquals("/",dbustest~ReplyObjpath(.nil), ".nil")  -- .nil is converted to /
  self~assertEquals(longpath,dbustest~ReplyObjpath(longpath), "very long path")  
  self~assertSame("test_dbusobjects_objectpath",dbustest~MethodName, "test if property set was sucessful")
  end
      
::method test_dbusobjects_objectpath_direct
  conn = .dbus~session
  interface ='oorexx.dbus.ooTestService'
  busname ='oorexx.dbus.ooTestService'
  longpath = '/oorexx/dbustest'~copies(1000)
  
  objectpath ='/oorexx/dbus/ooTestService'
  self~assertEquals("/", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/"), "path only")
  self~assertEquals("/T", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/T"), "/T")
  self~assertEquals("/test/path", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/test/path"), "/test/path")
  self~assertEquals("/TEST/PATH", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/TEST/PATH"), "/TEST/PATH")
  self~assertEquals("/1", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/1"), "/1")
  self~assertEquals("/1/2", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/1/2"), "/1/2")
  self~assertEquals("/123/123", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/123/123"), "/123/123")
  -- .nil is converted to /
  self~assertEquals("/", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', .nil), ".nil converted to /")
  self~assertEquals(longpath, conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', longpath), "max length path")

  objectpath ='/oorexx/dbus/ooTestService2'
  self~assertEquals("/", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/"), "path only")
  self~assertEquals("/T", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/T"), "/T")
  self~assertEquals("/test/path", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/test/path"), "/test/path")
  self~assertEquals("/TEST/PATH", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/TEST/PATH"), "/TEST/PATH")
  self~assertEquals("/1", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/1"), "/1")
  self~assertEquals("/1/2", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/1/2"), "/1/2")
  self~assertEquals("/123/123", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/123/123"), "/123/123")
  -- .nil is converted to /
  self~assertEquals("/", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', .nil), ".nil converted to /")
  self~assertEquals(longpath, conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', longpath), "max length path")
  
   objectpath ='/oorexx/dbus/ooTestService3'
  self~assertEquals("/", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/"), "path only")
  self~assertEquals("/T", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/T"), "/T")
  self~assertEquals("/test/path", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/test/path"), "/test/path")
  self~assertEquals("/TEST/PATH", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/TEST/PATH"), "/TEST/PATH")
  self~assertEquals("/1", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/1"), "/1")
  self~assertEquals("/1/2", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/1/2"), "/1/2")
  self~assertEquals("/123/123", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/123/123"), "/123/123")
  -- .nil is converted to /
  self~assertEquals("/", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', .nil), ".nil converted to /")
  self~assertEquals(longpath, conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', longpath), "max length path")
  
   objectpath ='/oorexx/dbus/ooTestService4'
  self~assertEquals("/", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/"), "path only")
  self~assertEquals("/T", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/T"), "/T")
  self~assertEquals("/test/path", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/test/path"), "/test/path")
  self~assertEquals("/TEST/PATH", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/TEST/PATH"), "/TEST/PATH")
  self~assertEquals("/1", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/1"), "/1")
  self~assertEquals("/1/2", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/1/2"), "/1/2")
  self~assertEquals("/123/123", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/123/123"), "/123/123")
  -- .nil is converted to /
  self~assertEquals("/", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', .nil), ".nil converted to /")
  self~assertEquals(longpath, conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', longpath), "max length path")
  
  -- use the unknown mechanism
   objectpath ='/oorexx/dbus/ooTestService5'
  self~assertEquals("/", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/"), "path only")
  self~assertEquals("/T", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/T"), "/T")
  self~assertEquals("/test/path", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/test/path"), "/test/path")
  self~assertEquals("/TEST/PATH", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/TEST/PATH"), "/TEST/PATH")
  self~assertEquals("/1", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/1"), "/1")
  self~assertEquals("/1/2", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/1/2"), "/1/2")
  self~assertEquals("/123/123", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/123/123"), "/123/123")
  -- .nil is converted to /
  self~assertEquals("/", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', .nil), ".nil converted to /")
  self~assertEquals(longpath, conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', longpath), "max length path")
  
  -- server
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
   objectpath ='/oorexx/dbus/ooTestService'  
      self~assertEquals("/", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/"), "path only")
  self~assertEquals("/T", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/T"), "/T")
  self~assertEquals("/test/path", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/test/path"), "/test/path")
  self~assertEquals("/TEST/PATH", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/TEST/PATH"), "/TEST/PATH")
  self~assertEquals("/1", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/1"), "/1")
  self~assertEquals("/1/2", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/1/2"), "/1/2")
  self~assertEquals("/123/123", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/123/123"), "/123/123")
  -- .nil is converted to /
  self~assertEquals("/", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', .nil), ".nil converted to /")
  self~assertEquals(longpath, conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', longpath), "max length path")
  
    -- server 2
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  self~assertEquals("/", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/"), "path only")
  self~assertEquals("/T", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/T"), "/T")
  self~assertEquals("/test/path", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/test/path"), "/test/path")
  self~assertEquals("/TEST/PATH", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/TEST/PATH"), "/TEST/PATH")
  self~assertEquals("/1", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/1"), "/1")
  self~assertEquals("/1/2", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/1/2"), "/1/2")
  self~assertEquals("/123/123", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', "/123/123"), "/123/123")
  -- .nil is converted to /
  self~assertEquals("/", conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', .nil), ".nil converted to /")
  self~assertEquals(longpath, conn~message('call',busname,objectpath,interface, 'ReplyObjpath', 'o','o', longpath), "max length path")
    
    
   --get catched correctly, but a debug message is always issued
::method test_dbusobjects_objectpath_invalid_93.900_1   
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object
  self~expectSyntax(93.900)				-- typeCode not supported on platform  
  self~assertEquals("",dbustest~ReplyObjpath(""), "empty")
 
::method test_dbusobjects_objectpath_invalid_93.900_2   
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object
  self~expectSyntax(93.900)				-- typeCode not supported on platform   
  self~assertEquals(".nil",dbustest~ReplyObjpath(".nil"), ".nil")
 
::method test_dbusobjects_objectpath_invalid_93.900_3   
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object
  self~expectSyntax(93.900)				-- typeCode not supported on platform    
  self~assertEquals("/Test/",dbustest~ReplyObjpath("/Test/"), "/Test/")
  
  ::method test_dbusobjects_objectpath_invalid_93.900_4   
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object
  self~expectSyntax(93.900)				-- typeCode not supported on platform    
  self~assertEquals("//",dbustest~ReplyObjpath("//"), "//")
   
  
 
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxxxx Bytes xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx  
 
::method test_dbusobjects_byte_character
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object
  dbustest2 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object
  dbustest3 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object
  dbustest4 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  
  --test set properties 
  dbustest~MethodName("test_dbusobjects_byte")
  dbustest2~MethodName("test_dbusobjects_byte")
  dbustest3~MethodName("test_dbusobjects_byte")
  dbustest4~MethodName("test_dbusobjects_byte") 
  privateserver~MethodName("test_dbusobjects_byte")
  privateserver2~MethodName("test_dbusobjects_byte") 
   
  self~assertEquals("a",dbustest~ReplyByte("a"), "a")
  self~assertEquals("A",dbustest~ReplyByte("A"), "A")
  self~assertEquals("z",dbustest~ReplyByte("z"), "z")
  self~assertEquals("Z",dbustest~ReplyByte("Z"), "Z")
  self~assertEquals(1,dbustest~ReplyByte(1), "1") 
 
  self~assertEquals("a",dbustest2~ReplyByte("a"), "a")
  self~assertEquals("A",dbustest2~ReplyByte("A"), "A")
  self~assertEquals("z",dbustest2~ReplyByte("z"), "z")
  self~assertEquals("Z",dbustest2~ReplyByte("Z"), "Z")
  self~assertEquals(1,dbustest2~ReplyByte(1), "1") 
  
  self~assertEquals("a",dbustest3~ReplyByte("a"), "a")
  self~assertEquals("A",dbustest3~ReplyByte("A"), "A")
  self~assertEquals("z",dbustest3~ReplyByte("z"), "z")
  self~assertEquals("Z",dbustest3~ReplyByte("Z"), "Z")
  self~assertEquals(1,dbustest3~ReplyByte(1), "1") 
  
  self~assertEquals("a",dbustest4~ReplyByte("a"), "a")
  self~assertEquals("A",dbustest4~ReplyByte("A"), "A")
  self~assertEquals("z",dbustest4~ReplyByte("z"), "z")
  self~assertEquals("Z",dbustest4~ReplyByte("Z"), "Z")
  self~assertEquals(1,dbustest4~ReplyByte(1), "1") 
  
  self~assertEquals("a",privateserver~ReplyByte("a"), "a")
  self~assertEquals("A",privateserver~ReplyByte("A"), "A")
  self~assertEquals("z",privateserver~ReplyByte("z"), "z")
  self~assertEquals("Z",privateserver~ReplyByte("Z"), "Z")
  self~assertEquals(1,privateserver~ReplyByte(1), "1") 
 
  self~assertEquals("a",privateserver2~ReplyByte("a"), "a")
  self~assertEquals("A",privateserver2~ReplyByte("A"), "A")
  self~assertEquals("z",privateserver2~ReplyByte("z"), "z")
  self~assertEquals("Z",privateserver2~ReplyByte("Z"), "Z")
  self~assertEquals(1,privateserver2~ReplyByte(1), "1") 

  -- test get properties
  self~assertSame("test_dbusobjects_byte",dbustest~MethodName, "test if property set was sucessful")
  self~assertSame("test_dbusobjects_byte",dbustest2~MethodName, "test if property set was sucessful")
  self~assertSame("test_dbusobjects_byte",dbustest3~MethodName, "test if property set was sucessful")
  self~assertSame("test_dbusobjects_byte",dbustest4~MethodName, "test if property set was sucessful")
  self~assertSame("test_dbusobjects_byte",privateserver~MethodName, "test if property set was sucessful")
  self~assertSame("test_dbusobjects_byte",privateserver2~MethodName, "test if property set was sucessful")
  
::method test_dbusobjects_byte_hexcode
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  dbustest2 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object
  dbustest3 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object
  dbustest4 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
 
  -- byte allows .nil
  self~assertEquals("00"x,dbustest~ReplyByte(.nil), "00x == .nil")
  self~assertEquals("00"x,dbustest2~ReplyByte(.nil), "00x == .nil")
  self~assertEquals("00"x,dbustest3~ReplyByte(.nil), "00x == .nil")
   -- attention this serviceobject does not convert .nil values
  self~assertEquals("",dbustest4~ReplyByte(.nil), "00x == .nil")
  self~assertEquals("00"x,privateserver~ReplyByte(.nil), "00x == .nil")
  self~assertEquals("00"x,privateserver2~ReplyByte(.nil), "00x == .nil") 
  
  dbustests=.array~of(dbustest , dbustest2, dbustest3, dbustest4, privateserver, privateserver2)
   -- starting with ASCII printable characters (code 32-127)
  do dbustest over dbustests
  self~assertSame(" ",dbustest~ReplyByte("20"x), "20x ==  ")
  self~assertEquals("!",dbustest~ReplyByte("21"x), "21x == !")
  self~assertEquals('"',dbustest~ReplyByte("22"x), '22x == "')
  self~assertEquals("#",dbustest~ReplyByte("23"x), "23x == #")
  self~assertEquals("$",dbustest~ReplyByte("24"x), "24x == $")
  self~assertEquals("%",dbustest~ReplyByte("25"x), "25x == %")
  self~assertEquals("&",dbustest~ReplyByte("26"x), "26x == &")
  self~assertEquals("'",dbustest~ReplyByte("27"x), "27x == '")
  self~assertEquals("(",dbustest~ReplyByte("28"x), "28x == (")
  self~assertEquals(")",dbustest~ReplyByte("29"x), "29x == )")
  self~assertEquals("*",dbustest~ReplyByte("2A"x), "21x == *")
  self~assertEquals("+",dbustest~ReplyByte("2B"x), "2Ax == +")
  self~assertEquals(",",dbustest~ReplyByte("2C"x), "2Bx == ,")
  self~assertEquals("-",dbustest~ReplyByte("2D"x), "2Cx == -")
  self~assertEquals(".",dbustest~ReplyByte("2E"x), "2Dx == .")
  self~assertEquals("/",dbustest~ReplyByte("2F"x), "2Ex == /")
  self~assertEquals("0",dbustest~ReplyByte("30"x), "30x == 0")
  self~assertEquals("1",dbustest~ReplyByte("31"x), "31x == 1")
  self~assertEquals("2",dbustest~ReplyByte("32"x), "32x == 2")
  self~assertEquals("3",dbustest~ReplyByte("33"x), "33x == 3")
  self~assertEquals("4",dbustest~ReplyByte("34"x), "34x == 4")
  self~assertEquals("5",dbustest~ReplyByte("35"x), "35x == 5")
  self~assertEquals("6",dbustest~ReplyByte("36"x), "36x == 6")
  self~assertEquals("7",dbustest~ReplyByte("37"x), "37x == 7")
  self~assertEquals("8",dbustest~ReplyByte("38"x), "38x == 8")
  self~assertEquals("9",dbustest~ReplyByte("39"x), "39x == 9")
  self~assertEquals(":",dbustest~ReplyByte("3A"x), "3Ax == :")
  self~assertEquals(";",dbustest~ReplyByte("3B"x), "3Bx == ;")
  self~assertEquals("<",dbustest~ReplyByte("3C"x), "3Cx == <")
  self~assertEquals("=",dbustest~ReplyByte("3D"x), "3Dx == =")
  self~assertEquals(">",dbustest~ReplyByte("3E"x), "3Ex == >")
  self~assertEquals("?",dbustest~ReplyByte("3F"x), "3Ex == ?") 
  self~assertEquals("@",dbustest~ReplyByte("40"x), "40x == @")
  self~assertEquals("A",dbustest~ReplyByte("41"x), "41x == A")
  self~assertEquals("B",dbustest~ReplyByte("42"x), "42x == B")
  self~assertEquals("C",dbustest~ReplyByte("43"x), "43x == C")
  self~assertEquals("D",dbustest~ReplyByte("44"x), "44x == D")
  self~assertEquals("E",dbustest~ReplyByte("45"x), "45x == E")
  self~assertEquals("F",dbustest~ReplyByte("46"x), "46x == F")
  self~assertEquals("G",dbustest~ReplyByte("47"x), "47x == G")
  self~assertEquals("H",dbustest~ReplyByte("48"x), "48x == H")
  self~assertEquals("I",dbustest~ReplyByte("49"x), "49x == I")
  self~assertEquals("J",dbustest~ReplyByte("4A"x), "41x == J")
  self~assertEquals("K",dbustest~ReplyByte("4B"x), "4Ax == K")
  self~assertEquals("L",dbustest~ReplyByte("4C"x), "4Bx == L")
  self~assertEquals("M",dbustest~ReplyByte("4D"x), "4Cx == M")
  self~assertEquals("N",dbustest~ReplyByte("4E"x), "4Dx == N")
  self~assertEquals("O",dbustest~ReplyByte("4F"x), "4Ex == O")
  self~assertEquals("P",dbustest~ReplyByte("50"x), "50x == P")
  self~assertEquals("Q",dbustest~ReplyByte("51"x), "51x == Q")
  self~assertEquals("R",dbustest~ReplyByte("52"x), "52x == R")
  self~assertEquals("S",dbustest~ReplyByte("53"x), "53x == S")
  self~assertEquals("T",dbustest~ReplyByte("54"x), "54x == T")
  self~assertEquals("U",dbustest~ReplyByte("55"x), "55x == U")
  self~assertEquals("V",dbustest~ReplyByte("56"x), "56x == V")
  self~assertEquals("W",dbustest~ReplyByte("57"x), "57x == W")
  self~assertEquals("X",dbustest~ReplyByte("58"x), "58x == X")
  self~assertEquals("Y",dbustest~ReplyByte("59"x), "59x == Y")
  self~assertEquals("Z",dbustest~ReplyByte("5A"x), "5Ax == Z")
  self~assertEquals("[",dbustest~ReplyByte("5B"x), "5Bx == [")
  self~assertEquals("\",dbustest~ReplyByte("5C"x), "5Cx == \")
  self~assertEquals("]",dbustest~ReplyByte("5D"x), "5Dx == ]")
  self~assertEquals("^",dbustest~ReplyByte("5E"x), "5Ex == ^")
  self~assertEquals("_",dbustest~ReplyByte("5F"x), "5Fx == _")
  self~assertEquals("`",dbustest~ReplyByte("60"x), "60x == `")
  self~assertEquals("a",dbustest~ReplyByte("61"x), "61x == a")
  self~assertEquals("b",dbustest~ReplyByte("62"x), "62x == b")
  self~assertEquals("c",dbustest~ReplyByte("63"x), "63x == c")
  self~assertEquals("d",dbustest~ReplyByte("64"x), "64x == d")
  self~assertEquals("e",dbustest~ReplyByte("65"x), "65x == e")
  self~assertEquals("f",dbustest~ReplyByte("66"x), "66x == f")
  self~assertEquals("g",dbustest~ReplyByte("67"x), "67x == g")
  self~assertEquals("h",dbustest~ReplyByte("68"x), "68x == h")
  self~assertEquals("i",dbustest~ReplyByte("69"x), "69x == i")
  self~assertEquals("j",dbustest~ReplyByte("6A"x), "61x == j")
  self~assertEquals("k",dbustest~ReplyByte("6B"x), "6Ax == k")
  self~assertEquals("l",dbustest~ReplyByte("6C"x), "6Bx == l")
  self~assertEquals("m",dbustest~ReplyByte("6D"x), "6Cx == m")
  self~assertEquals("n",dbustest~ReplyByte("6E"x), "6Dx == n")
  self~assertEquals("o",dbustest~ReplyByte("6F"x), "6Ex == o")
  self~assertEquals("p",dbustest~ReplyByte("70"x), "70x == p")
  self~assertEquals("q",dbustest~ReplyByte("71"x), "71x == q")
  self~assertEquals("r",dbustest~ReplyByte("72"x), "72x == r")
  self~assertEquals("s",dbustest~ReplyByte("73"x), "73x == s")
  self~assertEquals("t",dbustest~ReplyByte("74"x), "74x == t")
  self~assertEquals("u",dbustest~ReplyByte("75"x), "75x == u")
  self~assertEquals("v",dbustest~ReplyByte("76"x), "76x == v")
  self~assertEquals("w",dbustest~ReplyByte("77"x), "77x == w")
  self~assertEquals("x",dbustest~ReplyByte("78"x), "78x == x")
  self~assertEquals("y",dbustest~ReplyByte("79"x), "79x == y")
  self~assertEquals("z",dbustest~ReplyByte("7A"x), "7Ax == z")
  self~assertEquals("{",dbustest~ReplyByte("7B"x), "7Bx == {")
  self~assertEquals("|",dbustest~ReplyByte("7C"x), "7Cx == |")
  self~assertEquals("}",dbustest~ReplyByte("7D"x), "7Dx == }")
  self~assertEquals("~",dbustest~ReplyByte("7E"x), "7Ex == ~")
  self~assertSame(x2c(7E),dbustest~ReplyByte("7E"x), "7Ex == ~")
  self~assertSame("~",dbustest~ReplyByte("7E"x), "7Ex == ~")
  end
  
::method test_dbusobjects_byte_deccode
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  dbustest2 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object
  dbustest3 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object
  dbustest4 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
    
   -- byte allows .nil
  self~assertEquals(d2c(00),dbustest~ReplyByte(.nil), "00x == .nil")
  self~assertEquals(d2c(00),dbustest2~ReplyByte(.nil), "00x == .nil")
  self~assertEquals(d2c(00),dbustest3~ReplyByte(.nil), "00x == .nil")
   -- testservice4 does not allow nil values, "" is necessary
  self~assertEquals("",dbustest4~ReplyByte(.nil), "00x == .nil")
  self~assertEquals(d2c(00),privateserver~ReplyByte(.nil), "00x == .nil")
  self~assertEquals(d2c(00),privateserver2~ReplyByte(.nil), "00x == .nil")

  dbustests=.array~of(dbustest , dbustest2, dbustest3, dbustest4, privateserver, privateserver2)
   -- starting with ASCII printable characters (code 32-127)
  do dbustest over dbustests
  self~assertSame(" ",dbustest~ReplyByte(d2c(32)), "decimal 32")
  self~assertEquals("!",dbustest~ReplyByte(d2c(33)), "decimal 33")
  self~assertEquals('"',dbustest~ReplyByte(d2c(34)), "decimal 34")
  self~assertEquals("#",dbustest~ReplyByte(d2c(35)), "decimal 35")
  self~assertEquals("$",dbustest~ReplyByte(d2c(36)), "decimal 36")
  self~assertEquals("%",dbustest~ReplyByte(d2c(37)), "decimal 37")
  self~assertEquals("&",dbustest~ReplyByte(d2c(38)), "decimal 38")
  self~assertEquals("'",dbustest~ReplyByte(d2c(39)), "decimal 39")
  self~assertEquals("(",dbustest~ReplyByte(d2c(40)), "decimal 40")
  self~assertEquals(")",dbustest~ReplyByte(d2c(41)), "decimal 41")
  self~assertEquals("*",dbustest~ReplyByte(d2c(42)), "decimal 42")
  self~assertEquals("+",dbustest~ReplyByte(d2c(43)), "decimal 43")
  self~assertEquals(",",dbustest~ReplyByte(d2c(44)), "decimal 44")
  self~assertEquals("-",dbustest~ReplyByte(d2c(45)), "decimal 45")
  self~assertEquals(".",dbustest~ReplyByte(d2c(46)), "decimal 46")
  self~assertEquals("/",dbustest~ReplyByte(d2c(47)), "decimal 47")
  self~assertEquals("0",dbustest~ReplyByte(d2c(48)), "decimal 48")
  self~assertEquals("1",dbustest~ReplyByte(d2c(49)), "decimal 49")
  self~assertEquals("2",dbustest~ReplyByte(d2c(50)), "decimal 50")
  self~assertEquals("3",dbustest~ReplyByte(d2c(51)), "decimal 51")
  self~assertEquals("4",dbustest~ReplyByte(d2c(52)), "decimal 52")
  self~assertEquals("5",dbustest~ReplyByte(d2c(53)), "decimal 53")
  self~assertEquals("6",dbustest~ReplyByte(d2c(54)), "decimal 54")
  self~assertEquals("7",dbustest~ReplyByte(d2c(55)), "decimal 55")
  self~assertEquals("8",dbustest~ReplyByte(d2c(56)), "decimal 56")
  self~assertEquals("9",dbustest~ReplyByte(d2c(57)), "decimal 57")
  self~assertEquals(":",dbustest~ReplyByte(d2c(58)), "decimal 58")
  self~assertEquals(";",dbustest~ReplyByte(d2c(59)), "decimal 59")
  self~assertEquals("<",dbustest~ReplyByte(d2c(60)), "decimal 60")
  self~assertEquals("=",dbustest~ReplyByte(d2c(61)), "decimal 61")
  self~assertEquals(">",dbustest~ReplyByte(d2c(62)), "decimal 62")
  self~assertEquals("?",dbustest~ReplyByte(d2c(63)), "decimal 63") 
  self~assertEquals("@",dbustest~ReplyByte(d2c(64)), "decimal 64")
  self~assertEquals("A",dbustest~ReplyByte(d2c(65)), "decimal 65")
  self~assertEquals("B",dbustest~ReplyByte(d2c(66)), "decimal 66")
  self~assertEquals("C",dbustest~ReplyByte(d2c(67)), "decimal 67")
  self~assertEquals("D",dbustest~ReplyByte(d2c(68)), "decimal 68")
  self~assertEquals("E",dbustest~ReplyByte(d2c(69)), "decimal 69")
  self~assertEquals("F",dbustest~ReplyByte(d2c(70)), "decimal 70")
  self~assertEquals("G",dbustest~ReplyByte(d2c(71)), "decimal 71")
  self~assertEquals("H",dbustest~ReplyByte(d2c(72)), "decimal 72")
  self~assertEquals("I",dbustest~ReplyByte(d2c(73)), "decimal 73")
  self~assertEquals("J",dbustest~ReplyByte(d2c(74)), "decimal 74")
  self~assertEquals("K",dbustest~ReplyByte(d2c(75)), "decimal 75")
  self~assertEquals("L",dbustest~ReplyByte(d2c(76)), "decimal 76")
  self~assertEquals("M",dbustest~ReplyByte(d2c(77)), "decimal 77")
  self~assertEquals("N",dbustest~ReplyByte(d2c(78)), "decimal 78")
  self~assertEquals("O",dbustest~ReplyByte(d2c(79)), "decimal 79")
  self~assertEquals("P",dbustest~ReplyByte(d2c(80)), "decimal 80")
  self~assertEquals("Q",dbustest~ReplyByte(d2c(81)), "decimal 81")
  self~assertEquals("R",dbustest~ReplyByte(d2c(82)), "decimal 82")
  self~assertEquals("S",dbustest~ReplyByte(d2c(83)), "decimal 83")
  self~assertEquals("T",dbustest~ReplyByte(d2c(84)), "decimal 84")
  self~assertEquals("U",dbustest~ReplyByte(d2c(85)), "decimal 85")
  self~assertEquals("V",dbustest~ReplyByte(d2c(86)), "decimal 86")
  self~assertEquals("W",dbustest~ReplyByte(d2c(87)), "decimal 87")
  self~assertEquals("X",dbustest~ReplyByte(d2c(88)), "decimal 88")
  self~assertEquals("Y",dbustest~ReplyByte(d2c(89)), "decimal 89")
  self~assertEquals("Z",dbustest~ReplyByte(d2c(90)), "decimal 90")
  self~assertEquals("[",dbustest~ReplyByte(d2c(91)), "decimal 91")
  self~assertEquals("\",dbustest~ReplyByte(d2c(92)), "decimal 92")
  self~assertEquals("]",dbustest~ReplyByte(d2c(93)), "decimal 93")
  self~assertEquals("^",dbustest~ReplyByte(d2c(94)), "decimal 94")
  self~assertEquals("_",dbustest~ReplyByte(d2c(95)), "decimal 95")
  self~assertEquals("`",dbustest~ReplyByte(d2c(96)), "decimal 96")
  self~assertEquals("a",dbustest~ReplyByte(d2c(97)), "decimal 97")
  self~assertEquals("b",dbustest~ReplyByte(d2c(98)), "decimal 98")
  self~assertEquals("c",dbustest~ReplyByte(d2c(99)), "decimal 99")
  self~assertEquals("d",dbustest~ReplyByte(d2c(100)), "decimal 100")
  self~assertEquals("e",dbustest~ReplyByte(d2c(101)), "decimal 101")
  self~assertEquals("f",dbustest~ReplyByte(d2c(102)), "decimal 102")
  self~assertEquals("g",dbustest~ReplyByte(d2c(103)), "decimal 103")
  self~assertEquals("h",dbustest~ReplyByte(d2c(104)), "decimal 104")
  self~assertEquals("i",dbustest~ReplyByte(d2c(105)), "decimal 105")
  self~assertEquals("j",dbustest~ReplyByte(d2c(106)), "decimal 106")
  self~assertEquals("k",dbustest~ReplyByte(d2c(107)), "decimal 107")
  self~assertEquals("l",dbustest~ReplyByte(d2c(108)), "decimal 108")
  self~assertEquals("m",dbustest~ReplyByte(d2c(109)), "decimal 109")
  self~assertEquals("n",dbustest~ReplyByte(d2c(110)), "decimal 110")
  self~assertEquals("o",dbustest~ReplyByte(d2c(111)), "decimal 111")
  self~assertEquals("p",dbustest~ReplyByte(d2c(112)), "decimal 112")
  self~assertEquals("q",dbustest~ReplyByte(d2c(113)), "decimal 113")
  self~assertEquals("r",dbustest~ReplyByte(d2c(114)), "decimal 114")
  self~assertEquals("s",dbustest~ReplyByte(d2c(115)), "decimal 115")
  self~assertEquals("t",dbustest~ReplyByte(d2c(116)), "decimal 116")
  self~assertEquals("u",dbustest~ReplyByte(d2c(117)), "decimal 117")
  self~assertEquals("v",dbustest~ReplyByte(d2c(118)), "decimal 118")
  self~assertEquals("w",dbustest~ReplyByte(d2c(119)), "decimal 119")
  self~assertEquals("x",dbustest~ReplyByte(d2c(120)), "decimal 120")
  self~assertEquals("y",dbustest~ReplyByte(d2c(121)), "decimal 121")
  self~assertEquals("z",dbustest~ReplyByte(d2c(122)), "decimal 122")
  self~assertEquals("{",dbustest~ReplyByte(d2c(123)), "decimal 123")
  self~assertEquals("|",dbustest~ReplyByte(d2c(124)), "decimal 124")
  self~assertEquals("}",dbustest~ReplyByte(d2c(125)), "decimal 125")
  self~assertEquals("~",dbustest~ReplyByte(d2c(126)), "decimal 126")
  end

::method test_dbusobjects_byte_binary
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  dbustest2 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object
  dbustest3 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object
  dbustest4 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
    
   -- byte allows .nil
  self~assertEquals('00'x,dbustest~ReplyByte('00000000'b), "'00000000'b == .nil")
  self~assertEquals('00'x,dbustest2~ReplyByte('00000000'b), "'00000000'b == .nil")
  self~assertEquals('00'x,dbustest3~ReplyByte('00000000'b), "'00000000'b == .nil")
   -- the .nil is converted to "" 
  self~assertEquals("",dbustest4~ReplyByte('00000000'b), "'00000000'b == .nil")
  self~assertEquals('00'x,privateserver~ReplyByte('00000000'b), "'00000000'b == .nil")
  self~assertEquals('00'x,privateserver2~ReplyByte('00000000'b), "'00000000'b == .nil")
  
  dbustests=.array~of(dbustest , dbustest2, dbustest3, dbustest4, privateserver, privateserver2)
 
 -- starting with ASCII printable characters (code 32-127)
  do dbustest over dbustests
  self~assertSame(" ",dbustest~ReplyByte('00100000'b), "binary space")
  self~assertEquals("!",dbustest~ReplyByte('00100001'b), "decimal 33")
  self~assertEquals('"',dbustest~ReplyByte('00100010'b), "decimal 34")
  self~assertEquals("#",dbustest~ReplyByte('00100011'b), "decimal 35")
  self~assertEquals("$",dbustest~ReplyByte('00100100'b), "decimal 36")
  self~assertEquals("%",dbustest~ReplyByte('00100101'b), "decimal 37")
  self~assertEquals("&",dbustest~ReplyByte('00100110'b), "decimal 38")
  self~assertEquals("'",dbustest~ReplyByte('00100111'b), "decimal 39")
  self~assertEquals("(",dbustest~ReplyByte('00101000'b), "decimal 40")
  self~assertEquals(")",dbustest~ReplyByte('00101001'b), "decimal 41")
  self~assertEquals("*",dbustest~ReplyByte('00101010'b), "decimal 42")
  self~assertEquals("+",dbustest~ReplyByte('00101011'b), "decimal 43")
  self~assertEquals(",",dbustest~ReplyByte('00101100'b), "decimal 44")
  self~assertEquals("-",dbustest~ReplyByte('00101101'b), "decimal 45")
  self~assertEquals(".",dbustest~ReplyByte('00101110'b), "decimal 46")
  self~assertEquals("/",dbustest~ReplyByte('00101111'b), "decimal 47")
  self~assertEquals("0",dbustest~ReplyByte('00110000'b), "decimal 48")
  self~assertEquals("1",dbustest~ReplyByte('00110001'b), "decimal 49")
  self~assertEquals("2",dbustest~ReplyByte('00110010'b), "decimal 50")
  self~assertEquals("3",dbustest~ReplyByte('00110011'b), "decimal 51")
  self~assertEquals("4",dbustest~ReplyByte('00110100'b), "decimal 52")
  self~assertEquals("5",dbustest~ReplyByte('00110101'b), "decimal 53")
  self~assertEquals("6",dbustest~ReplyByte('00110110'b), "decimal 54")
  self~assertEquals("7",dbustest~ReplyByte('00110111'b), "decimal 55")
  self~assertEquals("8",dbustest~ReplyByte('00111000'b), "decimal 56")
  self~assertEquals("9",dbustest~ReplyByte('00111001'b), "decimal 57")
  self~assertEquals(":",dbustest~ReplyByte('00111010'b), "decimal 58")
  self~assertEquals(";",dbustest~ReplyByte('00111011'b), "decimal 59")
  self~assertEquals("<",dbustest~ReplyByte('00111100'b), "decimal 60")
  self~assertEquals("=",dbustest~ReplyByte('00111101'b), "decimal 61")
  self~assertEquals(">",dbustest~ReplyByte('00111110'b), "decimal 62")
  self~assertEquals("?",dbustest~ReplyByte('00111111'b), "decimal 63") 
  self~assertEquals("@",dbustest~ReplyByte('01000000'b), "decimal 64")
  self~assertEquals("A",dbustest~ReplyByte('01000001'b), "decimal 65")
  self~assertEquals("B",dbustest~ReplyByte('01000010'b), "decimal 66")
  self~assertEquals("C",dbustest~ReplyByte('01000011'b), "decimal 67")
  self~assertEquals("D",dbustest~ReplyByte('01000100'b), "decimal 68")
  self~assertEquals("E",dbustest~ReplyByte('01000101'b), "decimal 69")
  self~assertEquals("F",dbustest~ReplyByte('01000110'b), "decimal 70")
  self~assertEquals("G",dbustest~ReplyByte('01000111'b), "decimal 71")
  self~assertEquals("H",dbustest~ReplyByte('01001000'b), "decimal 72")
  self~assertEquals("I",dbustest~ReplyByte('01001001'b), "decimal 73")
  self~assertEquals("J",dbustest~ReplyByte('01001010'b), "decimal 74")
  self~assertEquals("K",dbustest~ReplyByte('01001011'b), "decimal 75")
  self~assertEquals("L",dbustest~ReplyByte('01001100'b), "decimal 76")
  self~assertEquals("M",dbustest~ReplyByte('01001101'b), "decimal 77")
  self~assertEquals("N",dbustest~ReplyByte('01001110'b), "decimal 78")
  self~assertEquals("O",dbustest~ReplyByte('01001111'b), "decimal 79")
  self~assertEquals("P",dbustest~ReplyByte('01010000'b), "decimal 80")
  self~assertEquals("Q",dbustest~ReplyByte('01010001'b), "decimal 81")
  self~assertEquals("R",dbustest~ReplyByte('01010010'b), "decimal 82")
  self~assertEquals("S",dbustest~ReplyByte('01010011'b), "decimal 83")
  self~assertEquals("T",dbustest~ReplyByte('01010100'b), "decimal 84")
  self~assertEquals("U",dbustest~ReplyByte('01010101'b), "decimal 85")
  self~assertEquals("V",dbustest~ReplyByte('01010110'b), "decimal 86")
  self~assertEquals("W",dbustest~ReplyByte('01010111'b), "decimal 87")
  self~assertEquals("X",dbustest~ReplyByte('01011000'b), "decimal 88")
  self~assertEquals("Y",dbustest~ReplyByte('01011001'b), "decimal 89")
  self~assertEquals("Z",dbustest~ReplyByte('01011010'b), "decimal 90")
  self~assertEquals("[",dbustest~ReplyByte('01011011'b), "decimal 91")
  self~assertEquals("\",dbustest~ReplyByte('01011100'b), "decimal 92")
  self~assertEquals("]",dbustest~ReplyByte('01011101'b), "decimal 93")
  self~assertEquals("^",dbustest~ReplyByte('01011110'b), "decimal 94")
  self~assertEquals("_",dbustest~ReplyByte('01011111'b), "decimal 95")
  self~assertEquals("`",dbustest~ReplyByte('01100000'b), "decimal 96")
  self~assertEquals("a",dbustest~ReplyByte('01100001'b), "decimal 97")
  self~assertEquals("b",dbustest~ReplyByte('01100010'b), "decimal 98")
  self~assertEquals("c",dbustest~ReplyByte('01100011'b), "decimal 99")
  self~assertEquals("d",dbustest~ReplyByte('01100100'b), "decimal 100")
  self~assertEquals("e",dbustest~ReplyByte('01100101'b), "decimal 101")
  self~assertEquals("f",dbustest~ReplyByte('01100110'b), "decimal 102")
  self~assertEquals("g",dbustest~ReplyByte('01100111'b), "decimal 103")
  self~assertEquals("h",dbustest~ReplyByte('01101000'b), "decimal 104")
  self~assertEquals("i",dbustest~ReplyByte('01101001'b), "decimal 105")
  self~assertEquals("j",dbustest~ReplyByte('01101010'b), "decimal 106")
  self~assertEquals("k",dbustest~ReplyByte('01101011'b), "decimal 107")
  self~assertEquals("l",dbustest~ReplyByte('01101100'b), "decimal 108")
  self~assertEquals("m",dbustest~ReplyByte('01101101'b), "decimal 109")
  self~assertEquals("n",dbustest~ReplyByte('01101110'b), "decimal 110")
  self~assertEquals("o",dbustest~ReplyByte('01101111'b), "decimal 111")
  self~assertEquals("p",dbustest~ReplyByte('01110000'b), "decimal 112")
  self~assertEquals("q",dbustest~ReplyByte('01110001'b), "decimal 113")
  self~assertEquals("r",dbustest~ReplyByte('01110010'b), "decimal 114")
  self~assertEquals("s",dbustest~ReplyByte('01110011'b), "decimal 115")
  self~assertEquals("t",dbustest~ReplyByte('01110100'b), "decimal 116")
  self~assertEquals("u",dbustest~ReplyByte('01110101'b), "decimal 117")
  self~assertEquals("v",dbustest~ReplyByte('01110110'b), "decimal 118")
  self~assertEquals("w",dbustest~ReplyByte('01110111'b), "decimal 119")
  self~assertEquals("x",dbustest~ReplyByte('01111000'b), "decimal 120")
  self~assertEquals("y",dbustest~ReplyByte('01111001'b), "decimal 121")
  self~assertEquals("z",dbustest~ReplyByte('01111010'b), "decimal 122")
  self~assertEquals("{",dbustest~ReplyByte('01111011'b), "decimal 123")
  self~assertEquals("|",dbustest~ReplyByte('01111100'b), "decimal 124")
  self~assertEquals("}",dbustest~ReplyByte('01111101'b), "decimal 125")
  self~assertEquals("~",dbustest~ReplyByte('01111110'b), "decimal 126") 
  end

::method test_dbusobjects_byte_direct
  conn = .dbus~session
  interface ='oorexx.dbus.ooTestService'
  busname ='oorexx.dbus.ooTestService'

  objectpaths = .array~of('/oorexx/dbus/ooTestService', '/oorexx/dbus/ooTestService2', '/oorexx/dbus/ooTestService3', -
                          '/oorexx/dbus/ooTestService4', '/oorexx/dbus/ooTestService5' )
 
  self~assertEquals("00"x,conn~message('call',busname,objectpaths[1],interface, 'ReplyByte', 'y', 'y', .nil), "00x == .nil")
  self~assertEquals("00"x,conn~message('call',busname,objectpaths[2],interface, 'ReplyByte', 'y', 'y', .nil), "00x == .nil")
  self~assertEquals("00"x,conn~message('call',busname,objectpaths[3],interface, 'ReplyByte', 'y', 'y', .nil), "00x == .nil")
    -- testserver4 does not convert nil values 
  self~assertEquals("",conn~message('call',busname,objectpaths[4],interface, 'ReplyByte', 'y', 'y', .nil), "00x == .nil")
  self~assertEquals("00"x,conn~message('call',busname,objectpaths[5],interface, 'ReplyByte', 'y', 'y', .nil), "00x == .nil")
 
  do objectpath over objectpaths                       
  self~assertEquals(" ", conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y','y', " "), " ")
  self~assertSame(" ",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "20"x), "20x ==  ")
  self~assertEquals("!",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "21"x), "21x == !")
  self~assertEquals('"',conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "22"x), '22x == "')
  self~assertEquals("#",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "23"x), "23x == #")
  self~assertEquals("$",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "24"x), "24x == $")
  self~assertEquals("%",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "25"x), "25x == %")
  self~assertEquals("&",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "26"x), "26x == &")
  self~assertEquals("'",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "27"x), "27x == '")
  self~assertEquals("(",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "28"x), "28x == (")
  self~assertEquals(")",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "29"x), "29x == )")
  self~assertEquals("*",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "2A"x), "21x == *")
  self~assertEquals("+",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "2B"x), "2Ax == +")
  self~assertEquals(",",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "2C"x), "2Bx == ,")
  self~assertEquals("-",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "2D"x), "2Cx == -")
  self~assertEquals(".",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "2E"x), "2Dx == .")
  self~assertEquals("/",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "2F"x), "2Ex == /")
  self~assertEquals("0",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "30"x), "30x == 0")
  self~assertEquals("1",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "31"x), "31x == 1")
  self~assertEquals("2",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "32"x), "32x == 2")
  self~assertEquals("3",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "33"x), "33x == 3")
  self~assertEquals("4",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "34"x), "34x == 4")
  self~assertEquals("5",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "35"x), "35x == 5")
  self~assertEquals("6",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "36"x), "36x == 6")
  self~assertEquals("7",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "37"x), "37x == 7")
  self~assertEquals("8",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "38"x), "38x == 8")
  self~assertEquals("9",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "39"x), "39x == 9")
  self~assertEquals(":",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "3A"x), "3Ax == :")
  self~assertEquals(";",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "3B"x), "3Bx == ;")
  self~assertEquals("<",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "3C"x), "3Cx == <")
  self~assertEquals("=",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "3D"x), "3Dx == =")
  self~assertEquals(">",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "3E"x), "3Ex == >")
  self~assertEquals("?",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "3F"x), "3Ex == ?") 
  self~assertEquals("@",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "40"x), "40x == @")
  self~assertEquals("A",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "41"x), "41x == A")
  self~assertEquals("B",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "42"x), "42x == B")
  self~assertEquals("C",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "43"x), "43x == C")
  self~assertEquals("D",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "44"x), "44x == D")
  self~assertEquals("E",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "45"x), "45x == E")
  self~assertEquals("F",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "46"x), "46x == F")
  self~assertEquals("G",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "47"x), "47x == G")
  self~assertEquals("H",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "48"x), "48x == H")
  self~assertEquals("I",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "49"x), "49x == I")
  self~assertEquals("J",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "4A"x), "41x == J")
  self~assertEquals("K",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "4B"x), "4Ax == K")
  self~assertEquals("L",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "4C"x), "4Bx == L")
  self~assertEquals("M",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "4D"x), "4Cx == M")
  self~assertEquals("N",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "4E"x), "4Dx == N")
  self~assertEquals("O",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "4F"x), "4Ex == O")
  self~assertEquals("P",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "50"x), "50x == P")
  self~assertEquals("Q",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "51"x), "51x == Q")
  self~assertEquals("R",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "52"x), "52x == R")
  self~assertEquals("S",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "53"x), "53x == S")
  self~assertEquals("T",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "54"x), "54x == T")
  self~assertEquals("U",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "55"x), "55x == U")
  self~assertEquals("V",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "56"x), "56x == V")
  self~assertEquals("W",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "57"x), "57x == W")
  self~assertEquals("X",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "58"x), "58x == X")
  self~assertEquals("Y",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "59"x), "59x == Y")
  self~assertEquals("Z",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "5A"x), "5Ax == Z")
  self~assertEquals("[",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "5B"x), "5Bx == [")
  self~assertEquals("\",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "5C"x), "5Cx == \")
  self~assertEquals("]",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "5D"x), "5Dx == ]")
  self~assertEquals("^",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "5E"x), "5Ex == ^")
  self~assertEquals("_",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "5F"x), "5Fx == _")
  self~assertEquals("`",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "60"x), "60x == `")
  self~assertEquals("a",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "61"x), "61x == a")
  self~assertEquals("b",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "62"x), "62x == b")
  self~assertEquals("c",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "63"x), "63x == c")
  self~assertEquals("d",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "64"x), "64x == d")
  self~assertEquals("e",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "65"x), "65x == e")
  self~assertEquals("f",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "66"x), "66x == f")
  self~assertEquals("g",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "67"x), "67x == g")
  self~assertEquals("h",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "68"x), "68x == h")
  self~assertEquals("i",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "69"x), "69x == i")
  self~assertEquals("j",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "6A"x), "61x == j")
  self~assertEquals("k",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "6B"x), "6Ax == k")
  self~assertEquals("l",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "6C"x), "6Bx == l")
  self~assertEquals("m",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "6D"x), "6Cx == m")
  self~assertEquals("n",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "6E"x), "6Dx == n")
  self~assertEquals("o",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "6F"x), "6Ex == o")
  self~assertEquals("p",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "70"x), "70x == p")
  self~assertEquals("q",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "71"x), "71x == q")
  self~assertEquals("r",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "72"x), "72x == r")
  self~assertEquals("s",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "73"x), "73x == s")
  self~assertEquals("t",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "74"x), "74x == t")
  self~assertEquals("u",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "75"x), "75x == u")
  self~assertEquals("v",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "76"x), "76x == v")
  self~assertEquals("w",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "77"x), "77x == w")
  self~assertEquals("x",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "78"x), "78x == x")
  self~assertEquals("y",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "79"x), "79x == y")
  self~assertEquals("z",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "7A"x), "7Ax == z")
  self~assertEquals("{",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "7B"x), "7Bx == {")
  self~assertEquals("|",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "7C"x), "7Cx == |")
  self~assertEquals("}",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "7D"x), "7Dx == }")
  self~assertEquals("~",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "7E"x), "7Ex == ~")
  end
   
  conns =.array~of(.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;"),.dbus~new("unix:path=/tmp/dbus-test;") )        -- privateserver1&2
  objectpath ='/oorexx/dbus/ooTestService'        
  do conn over conns
  self~assertEquals("00"x,conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', .nil), "00x == .nil")
  self~assertEquals(" ", conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y','y', " "), " ")
  self~assertSame(" ",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "20"x), "20x ==  ")
  self~assertEquals("!",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "21"x), "21x == !")
  self~assertEquals('"',conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "22"x), '22x == "')
  self~assertEquals("#",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "23"x), "23x == #")
  self~assertEquals("$",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "24"x), "24x == $")
  self~assertEquals("%",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "25"x), "25x == %")
  self~assertEquals("&",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "26"x), "26x == &")
  self~assertEquals("'",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "27"x), "27x == '")
  self~assertEquals("(",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "28"x), "28x == (")
  self~assertEquals(")",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "29"x), "29x == )")
  self~assertEquals("*",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "2A"x), "21x == *")
  self~assertEquals("+",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "2B"x), "2Ax == +")
  self~assertEquals(",",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "2C"x), "2Bx == ,")
  self~assertEquals("-",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "2D"x), "2Cx == -")
  self~assertEquals(".",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "2E"x), "2Dx == .")
  self~assertEquals("/",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "2F"x), "2Ex == /")
  self~assertEquals("0",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "30"x), "30x == 0")
  self~assertEquals("1",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "31"x), "31x == 1")
  self~assertEquals("2",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "32"x), "32x == 2")
  self~assertEquals("3",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "33"x), "33x == 3")
  self~assertEquals("4",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "34"x), "34x == 4")
  self~assertEquals("5",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "35"x), "35x == 5")
  self~assertEquals("6",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "36"x), "36x == 6")
  self~assertEquals("7",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "37"x), "37x == 7")
  self~assertEquals("8",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "38"x), "38x == 8")
  self~assertEquals("9",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "39"x), "39x == 9")
  self~assertEquals(":",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "3A"x), "3Ax == :")
  self~assertEquals(";",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "3B"x), "3Bx == ;")
  self~assertEquals("<",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "3C"x), "3Cx == <")
  self~assertEquals("=",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "3D"x), "3Dx == =")
  self~assertEquals(">",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "3E"x), "3Ex == >")
  self~assertEquals("?",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "3F"x), "3Ex == ?") 
  self~assertEquals("@",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "40"x), "40x == @")
  self~assertEquals("A",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "41"x), "41x == A")
  self~assertEquals("B",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "42"x), "42x == B")
  self~assertEquals("C",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "43"x), "43x == C")
  self~assertEquals("D",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "44"x), "44x == D")
  self~assertEquals("E",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "45"x), "45x == E")
  self~assertEquals("F",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "46"x), "46x == F")
  self~assertEquals("G",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "47"x), "47x == G")
  self~assertEquals("H",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "48"x), "48x == H")
  self~assertEquals("I",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "49"x), "49x == I")
  self~assertEquals("J",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "4A"x), "41x == J")
  self~assertEquals("K",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "4B"x), "4Ax == K")
  self~assertEquals("L",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "4C"x), "4Bx == L")
  self~assertEquals("M",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "4D"x), "4Cx == M")
  self~assertEquals("N",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "4E"x), "4Dx == N")
  self~assertEquals("O",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "4F"x), "4Ex == O")
  self~assertEquals("P",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "50"x), "50x == P")
  self~assertEquals("Q",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "51"x), "51x == Q")
  self~assertEquals("R",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "52"x), "52x == R")
  self~assertEquals("S",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "53"x), "53x == S")
  self~assertEquals("T",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "54"x), "54x == T")
  self~assertEquals("U",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "55"x), "55x == U")
  self~assertEquals("V",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "56"x), "56x == V")
  self~assertEquals("W",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "57"x), "57x == W")
  self~assertEquals("X",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "58"x), "58x == X")
  self~assertEquals("Y",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "59"x), "59x == Y")
  self~assertEquals("Z",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "5A"x), "5Ax == Z")
  self~assertEquals("[",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "5B"x), "5Bx == [")
  self~assertEquals("\",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "5C"x), "5Cx == \")
  self~assertEquals("]",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "5D"x), "5Dx == ]")
  self~assertEquals("^",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "5E"x), "5Ex == ^")
  self~assertEquals("_",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "5F"x), "5Fx == _")
  self~assertEquals("`",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "60"x), "60x == `")
  self~assertEquals("a",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "61"x), "61x == a")
  self~assertEquals("b",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "62"x), "62x == b")
  self~assertEquals("c",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "63"x), "63x == c")
  self~assertEquals("d",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "64"x), "64x == d")
  self~assertEquals("e",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "65"x), "65x == e")
  self~assertEquals("f",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "66"x), "66x == f")
  self~assertEquals("g",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "67"x), "67x == g")
  self~assertEquals("h",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "68"x), "68x == h")
  self~assertEquals("i",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "69"x), "69x == i")
  self~assertEquals("j",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "6A"x), "61x == j")
  self~assertEquals("k",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "6B"x), "6Ax == k")
  self~assertEquals("l",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "6C"x), "6Bx == l")
  self~assertEquals("m",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "6D"x), "6Cx == m")
  self~assertEquals("n",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "6E"x), "6Dx == n")
  self~assertEquals("o",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "6F"x), "6Ex == o")
  self~assertEquals("p",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "70"x), "70x == p")
  self~assertEquals("q",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "71"x), "71x == q")
  self~assertEquals("r",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "72"x), "72x == r")
  self~assertEquals("s",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "73"x), "73x == s")
  self~assertEquals("t",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "74"x), "74x == t")
  self~assertEquals("u",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "75"x), "75x == u")
  self~assertEquals("v",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "76"x), "76x == v")
  self~assertEquals("w",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "77"x), "77x == w")
  self~assertEquals("x",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "78"x), "78x == x")
  self~assertEquals("y",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "79"x), "79x == y")
  self~assertEquals("z",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "7A"x), "7Ax == z")
  self~assertEquals("{",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "7B"x), "7Bx == {")
  self~assertEquals("|",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "7C"x), "7Cx == |")
  self~assertEquals("}",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "7D"x), "7Dx == }")
  self~assertEquals("~",conn~message('call',busname,objectpath,interface, 'ReplyByte', 'y', 'y', "7E"x), "7Ex == ~")
  end
 
::method test_dbusobjects_byte_invalid_93.900_1_direct_testserver1
  self~expectSyntax(93.900)			-- conversion (value=[ü]) to a byte value failed
  self~assertEquals("ü",.dbus~session~message('call',"oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService","oorexx.dbus.ooTestService", 'ReplyByte', 'y', 'y', "ü"), "character ü")
  
::method test_dbusobjects_byte_invalid_93.900_1_direct_testserver2
  self~expectSyntax(93.900)			-- conversion (value=[ü]) to a byte value failed
  self~assertEquals("ü",.dbus~session~message('call',"oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2","oorexx.dbus.ooTestService", 'ReplyByte', 'y', 'y', "ü"), "character ü") 
  
::method test_dbusobjects_byte_invalid_93.900_1_direct_testserver3
  self~expectSyntax(93.900)			-- conversion (value=[ü]) to a byte value failed
  self~assertEquals("ü",.dbus~session~message('call',"oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3","oorexx.dbus.ooTestService", 'ReplyByte', 'y', 'y', "ü"), "character ü") 
  
::method test_dbusobjects_byte_invalid_93.900_1_direct_testserver4
  self~expectSyntax(93.900)                  -- conversion (value=[ü]) to a byte value failed
  self~assertEquals("ü",.dbus~session~message('call',"oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4","oorexx.dbus.ooTestService", 'ReplyByte', 'y', 'y', "ü"), "character ü") 
 
::method test_dbusobjects_byte_invalid_93.900_1_direct_testserver5
  self~expectSyntax(93.900)                   -- conversion (value=[ü]) to a byte value failed
  self~assertEquals("ü",.dbus~session~message('call',"oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService5","oorexx.dbus.ooTestService", 'ReplyByte', 'y', 'y', "ü"), "character ü")
  
 ::method test_dbusobjects_byte_invalid_93.900_1_direct_testserver6
 conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  self~expectSyntax(93.900)                   -- conversion (value=[ü]) to a byte value failed
  self~assertEquals("ü",conn~message('call',"oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService","oorexx.dbus.ooTestService", 'ReplyByte', 'y', 'y', "ü"), "character ü") 
  
::method test_dbusobjects_byte_invalid_93.900_1_direct_testserver7
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  self~expectSyntax(93.900)                   -- conversion (value=[ü]) to a byte value failed
  self~assertEquals("ü",conn~message('call',"oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService","oorexx.dbus.ooTestService", 'ReplyByte', 'y', 'y', "ü"), "character ü")
  
::method test_dbusobjects_byte_invalid_93.900_1
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)                 -- conversion (value=[ü]) to a byte value failed
  self~assertEquals("ü",dbustest~ReplyByte("ü"), "ü")

::method test_dbusobjects_byte_invalid_93.900_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)                  --  conversion (value=[ab]) to a byte value failed,
  self~assertEquals("ab",dbustest~ReplyByte("ab"), "ab")
  
::method test_dbusobjects_byte_invalid_93.900_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)                   --   cannot convert an empty Rexx String to a byte value
  self~assertEquals("",dbustest~ReplyByte(""), "empty")
  
::method test_dbusobjects_byte_invalid_93.900_3_direct_testserver  
   self~expectSyntax(93.900)                   --   cannot convert an empty Rexx String to a byte value
  self~assertEquals("",.dbus~session~message('call',"oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService","oorexx.dbus.ooTestService", 'ReplyByte', 'y', 'y', ""), "empty")
 
 ::method test_dbusobjects_byte_invalid_93.900_3_direct_testserver2
   self~expectSyntax(93.900)                   --   cannot convert an empty Rexx String to a byte value
  self~assertEquals("",.dbus~session~message('call',"oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService","oorexx.dbus.ooTestService2", 'ReplyByte', 'y', 'y', ""), "empty")
 
 ::method test_dbusobjects_byte_invalid_93.900_3_direct_testserver3
   self~expectSyntax(93.900)                   --   cannot convert an empty Rexx String to a byte value
  self~assertEquals("",.dbus~session~message('call',"oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService","oorexx.dbus.ooTestService3", 'ReplyByte', 'y', 'y', ""), "empty")
 
::method test_dbusobjects_byte_invalid_93.900_3_direct_testserver4
   self~expectSyntax(93.900)                   --   cannot convert an empty Rexx String to a byte value
  self~assertEquals("",.dbus~session~message('call',"oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService","oorexx.dbus.ooTestService4", 'ReplyByte', 'y', 'y', ""), "empty")
  
::method test_dbusobjects_byte_invalid_93.900_3_direct_testserver5
   self~expectSyntax(93.900)                   --   cannot convert an empty Rexx String to a byte value
  self~assertEquals("",.dbus~session~message('call',"oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService","oorexx.dbus.ooTestService5", 'ReplyByte', 'y', 'y', ""), "empty")
 
::method test_dbusobjects_byte_invalid_93.900_3_direct_testserver6
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  self~expectSyntax(93.900)                   --   cannot convert an empty Rexx String to a byte value
  self~assertEquals("",conn~message('call',"oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService","oorexx.dbus.ooTestService5", 'ReplyByte', 'y', 'y', ""), "empty")
 
::method test_dbusobjects_byte_invalid_93.900_3_direct_testserver7
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  self~expectSyntax(93.900)                   --   cannot convert an empty Rexx String to a byte value
  self~assertEquals("",conn~message('call',"oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService","oorexx.dbus.ooTestService5", 'ReplyByte', 'y', 'y', ""), "empty")
 
::method test_dbusobjects_byte_invalid_93.903
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.903)			-- Missing argument in method
  self~assertEquals(,dbustest~ReplyByte(), "nothing") 

-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxxx Booleans xxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx 
  
::method test_dbusobjects_boolean  
 
  busname = "oorexx.dbus.ooTestService"
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  
  dbustests=.array~of(.dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4"), -
                      privateserver, privateserver2)
  
  do dbustest over dbustests
  self~assertTrue(dbustest~ReplyBoolean(.true), ".true")
  self~assertFalse(dbustest~ReplyBoolean(.false), ".false")
  self~assertEquals(.false, dbustest~ReplyBoolean(0), ".false")
  self~assertEquals(0, dbustest~ReplyBoolean(.false), ".false")
  self~assertEquals("0", dbustest~ReplyBoolean(.false), "0")
  self~assertEquals(.true, dbustest~ReplyBoolean(1), ".true")
  self~assertEquals(1, dbustest~ReplyBoolean(.true), ".true")
  self~assertEquals("1", dbustest~ReplyBoolean(.true), "1")
  end

::method test_dbusobjects_boolean_direct  
  conn = .dbus~session
  interface ='oorexx.dbus.ooTestService'
  busname ='oorexx.dbus.ooTestService'
  objectpath ='/oorexx/dbus/ooTestService'
  
  self~assertEquals(.true, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), ".true")
  self~assertEquals(.false, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), ".false")
  self~assertEquals(.false, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', 0), "0")
  self~assertEquals(0, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), ".false")
  self~assertEquals("0", .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), "0")
  self~assertEquals(.true, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', 1), ".true")
  self~assertEquals(1, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), ".true")
  self~assertEquals("1", .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), "1")

  objectpath ='/oorexx/dbus/ooTestService2'
  self~assertEquals(.true, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), ".true")
  self~assertEquals(.false, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), ".false")
  self~assertEquals(.false, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', 0), "0")
  self~assertEquals(0, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), ".false")
  self~assertEquals("0", .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), "0")
  self~assertEquals(.true, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', 1), ".true")
  self~assertEquals(1, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), ".true")
  self~assertEquals("1", .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), "1")
  
  objectpath ='/oorexx/dbus/ooTestService3'
  self~assertEquals(.true, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), ".true")
  self~assertEquals(.false, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), ".false")
  self~assertEquals(.false, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', 0), "0")
  self~assertEquals(0, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), ".false")
  self~assertEquals("0", .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), "0")
  self~assertEquals(.true, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', 1), ".true")
  self~assertEquals(1, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), ".true")
  self~assertEquals("1", .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), "1")
  
  objectpath ='/oorexx/dbus/ooTestService4'
  self~assertEquals(.true, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), ".true")
  self~assertEquals(.false, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), ".false")
  self~assertEquals(.false, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', 0), "0")
  self~assertEquals(0, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), ".false")
  self~assertEquals("0", .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), "0")
  self~assertEquals(.true, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', 1), ".true")
  self~assertEquals(1, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), ".true")
  self~assertEquals("1", .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), "1")
  
  objectpath ='/oorexx/dbus/ooTestService5'
  self~assertEquals(.true, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), ".true")
  self~assertEquals(.false, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), ".false")
  self~assertEquals(.false, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', 0), "0")
  self~assertEquals(0, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), ".false")
  self~assertEquals("0", .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), "0")
  self~assertEquals(.true, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', 1), ".true")
  self~assertEquals(1, .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), ".true")
  self~assertEquals("1", .dbus~session~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), "1")
  
  objectpath ='/oorexx/dbus/ooTestService'
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  self~assertEquals(.true, conn~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), ".true")
  self~assertEquals(.false, conn~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), ".false")
  self~assertEquals(.false,conn~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', 0), "0")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), ".false")
  self~assertEquals("0", conn~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), "0")
  self~assertEquals(.true, conn~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', 1), ".true")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), ".true")
  self~assertEquals("1", conn~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), "1")
  
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  self~assertEquals(.true, conn~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), ".true")
  self~assertEquals(.false, conn~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), ".false")
  self~assertEquals(.false,conn~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', 0), "0")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), ".false")
  self~assertEquals("0", conn~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .false), "0")
  self~assertEquals(.true, conn~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', 1), ".true")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), ".true")
  self~assertEquals("1", conn~message('call',busname,objectpath,interface, 'ReplyBoolean', 'b','b', .true), "1")
  
::method test_dbusobjects_boolean_invalid_93.900_1
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion (value=[wahr]) to a Boolean value failed
  self~assertEquals("wahr", dbustest~ReplyBoolean("wahr"), "wahr")

::method test_dbusobjects_boolean_invalid_93.900_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			  -- conversion (value=[2]) to a Boolean value failed
  self~assertEquals(2, dbustest~ReplyBoolean(2), "2")
  
::method test_dbusobjects_boolean_nil
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~assertEquals(0, dbustest~ReplyBoolean(.nil), "the .nil value is converted to 0") 
  
::method test_dbusobjects_boolean_nil_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~assertEquals(0, dbustest~ReplyBoolean(.nil), "the .nil value is converted to 0")

::method test_dbusobjects_boolean_nil3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~assertEquals(0, dbustest~ReplyBoolean(.nil), "the .nil value is converted to 0")  
  
 ::method test_dbusobjects_boolean_nil4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~assertEquals(0, dbustest~ReplyBoolean(.nil), "the .nil value is converted to 0")
  
::method test_dbusobjects_boolean_nil5
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  self~assertEquals(0, privateserver~ReplyBoolean(.nil), "the .nil value is converted to 0")
   
::method test_dbusobjects_boolean_nil6
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  self~assertEquals(0, privateserver2~ReplyBoolean(.nil), "the .nil value is converted to 0")
  
   
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxx Different Integers xxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    
::method test_dbusobjects_int16
  
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object
  self~assertEquals(0, dbustest~ReplyInt16(0), "0")
  self~assertEquals(-1, dbustest~ReplyInt16(-1), "-1")
  self~assertEquals(1, dbustest~ReplyInt16(1), "1")   
  self~assertEquals(0, dbustest~ReplyInt16(.nil), ".nil")         --  .nil converted to zero
  self~assertEquals(-32768, dbustest~ReplyInt16(-32768), "lowest value -32768")
  self~assertEquals(32767, dbustest~ReplyInt16(32767), "highest value 32767")
  self~assertEquals("1", dbustest~ReplyInt16("1"), "string 1")
  self~assertEquals("0", dbustest~ReplyInt16("0"), "string 0")
  
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object
  self~assertEquals(0, dbustest~ReplyInt16(0), "0")
  self~assertEquals(-1, dbustest~ReplyInt16(-1), "-1")
  self~assertEquals(1, dbustest~ReplyInt16(1), "1")   
  self~assertEquals(0, dbustest~ReplyInt16(.nil), ".nil")         --  .nil converted to zero
  self~assertEquals(-32768, dbustest~ReplyInt16(-32768), "lowest value -32768")
  self~assertEquals(32767, dbustest~ReplyInt16(32767), "highest value 32767")
  self~assertEquals("1", dbustest~ReplyInt16("1"), "string 1")
  self~assertEquals("0", dbustest~ReplyInt16("0"), "string 0")
  
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object
  self~assertEquals(0, dbustest~ReplyInt16(0), "0")
  self~assertEquals(-1, dbustest~ReplyInt16(-1), "-1")
  self~assertEquals(1, dbustest~ReplyInt16(1), "1")   
  self~assertEquals(0, dbustest~ReplyInt16(.nil), ".nil")         --  .nil converted to zero
  self~assertEquals(-32768, dbustest~ReplyInt16(-32768), "lowest value -32768")
  self~assertEquals(32767, dbustest~ReplyInt16(32767), "highest value 32767")
  self~assertEquals("1", dbustest~ReplyInt16("1"), "string 1")
  self~assertEquals("0", dbustest~ReplyInt16("0"), "string 0")
  
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object
  self~assertEquals(0, dbustest~ReplyInt16(0), "0")
  self~assertEquals(-1, dbustest~ReplyInt16(-1), "-1")
  self~assertEquals(1, dbustest~ReplyInt16(1), "1")   
  self~assertEquals(0, dbustest~ReplyInt16(.nil), ".nil")         --  .nil converted to zero
  self~assertEquals(-32768, dbustest~ReplyInt16(-32768), "lowest value -32768")
  self~assertEquals(32767, dbustest~ReplyInt16(32767), "highest value 32767")
  self~assertEquals("1", dbustest~ReplyInt16("1"), "string 1")
  self~assertEquals("0", dbustest~ReplyInt16("0"), "string 0")
  
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest  = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  self~assertEquals(0, dbustest~ReplyInt16(0), "0")
  self~assertEquals(-1, dbustest~ReplyInt16(-1), "-1")
  self~assertEquals(1, dbustest~ReplyInt16(1), "1")   
  self~assertEquals(0, dbustest~ReplyInt16(.nil), ".nil")         --  .nil converted to zero
  self~assertEquals(-32768, dbustest~ReplyInt16(-32768), "lowest value -32768")
  self~assertEquals(32767, dbustest~ReplyInt16(32767), "highest value 32767")
  self~assertEquals("1", dbustest~ReplyInt16("1"), "string 1")
  self~assertEquals("0", dbustest~ReplyInt16("0"), "string 0")
  
  privateconn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest  = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  self~assertEquals(0, dbustest~ReplyInt16(0), "0")
  self~assertEquals(-1, dbustest~ReplyInt16(-1), "-1")
  self~assertEquals(1, dbustest~ReplyInt16(1), "1")   
  self~assertEquals(0, dbustest~ReplyInt16(.nil), ".nil")         --  .nil converted to zero
  self~assertEquals(-32768, dbustest~ReplyInt16(-32768), "lowest value -32768")
  self~assertEquals(32767, dbustest~ReplyInt16(32767), "highest value 32767")
  self~assertEquals("1", dbustest~ReplyInt16("1"), "string 1")
  self~assertEquals("0", dbustest~ReplyInt16("0"), "string 0")
  
::method test_emitsomeSignals_indirect
  .dbus~session~message('Signal'.'oorexx.dbus.ooTestService','/oorexx/dbus/ooTestService','oorexx.dbus.ooTestService', 'boringSignal', 's', '[about the half passed]') 

 /*  -- sending direct signals
::method test_emitsomeSignals_direct
  self~service.sendSignal('oorexx.dbus.ooTestService','/oorexx/dbus/ooTestService', "Exit", 'direct signal')
 */
 
::method test_dbusobjects_int16_direct
  conn = .dbus~session
  interface ='oorexx.dbus.ooTestService'
  busname ='oorexx.dbus.ooTestService'

  objectpath ='/oorexx/dbus/ooTestService'
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 0), "0")
  self~assertEquals(-1, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', -1), "-1")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 1), "1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', .nil), ".nil")   -- .nil is converted to zero
  self~assertEquals(-32768, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', -32768), "lowest value -32768") 
  self~assertEquals(32767, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 32767), "highest value 32767") 
  self~assertEquals("1", conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', "1"), "string 1") 
  self~assertEquals("0", conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', "0"), "string 0") 
  do i= 0 to 20                -- 20 random int16
  int16 = random(-32768,32767)
  self~assertEquals(int16, conn~message('call',interface,objectpath,interface, 'ReplyInt16', 'n','n', int16), "value:" int16) 
  end
  
  objectpath ='/oorexx/dbus/ooTestService2'
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 0), "0")
  self~assertEquals(-1, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', -1), "-1")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 1), "1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', .nil), ".nil")   -- .nil is converted to zero
  self~assertEquals(-32768, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', -32768), "lowest value -32768") 
  self~assertEquals(32767, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 32767), "highest value 32767") 
  self~assertEquals("1", conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', "1"), "string 1") 
  self~assertEquals("0", conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', "0"), "string 0") 
  do i= 0 to 20                -- 20 random int16
  int16 = random(-32768,32767)
  self~assertEquals(int16, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', int16), "value:" int16) 
  end
  
  objectpath ='/oorexx/dbus/ooTestService3'
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 0), "0")
  self~assertEquals(-1, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', -1), "-1")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 1), "1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', .nil), ".nil")   -- .nil is converted to zero
  self~assertEquals(-32768, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', -32768), "lowest value -32768") 
  self~assertEquals(32767, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 32767), "highest value 32767") 
  self~assertEquals("1", conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', "1"), "string 1") 
  self~assertEquals("0", conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', "0"), "string 0") 
  do i= 0 to 20                -- 20 random int16
  int16 = random(-32768,32767)
  self~assertEquals(int16, conn~message('call',interface,objectpath,interface, 'ReplyInt16', 'n','n', int16), "value:" int16) 
  end
  
  objectpath ='/oorexx/dbus/ooTestService4'
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 0), "0")
  self~assertEquals(-1, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', -1), "-1")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 1), "1")
  
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', .nil), ".nil")   -- .nil is converted to zero
  self~assertEquals(-32768, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', -32768), "lowest value -32768") 
  self~assertEquals(32767, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 32767), "highest value 32767") 
  self~assertEquals("1", conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', "1"), "string 1") 
  self~assertEquals("0", conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', "0"), "string 0") 
  do i= 0 to 20                -- 20 random int16
  int16 = random(-32768,32767)
  self~assertEquals(int16, conn~message('call',interface,objectpath,interface, 'ReplyInt16', 'n','n', int16), "value:" int16) 
  end
  
  objectpath ='/oorexx/dbus/ooTestService5'             --unknown return method
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 0), "0")
  self~assertEquals(-1, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', -1), "-1")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 1), "1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', .nil), ".nil")   -- .nil is converted to zero
  self~assertEquals(-32768, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', -32768), "lowest value -32768") 
  self~assertEquals(32767, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 32767), "highest value 32767") 
  self~assertEquals("1", conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', "1"), "string 1") 
  self~assertEquals("0", conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', "0"), "string 0")  
  do i= 0 to 20                -- 20 random int16
  int16 = random(-32768,32767)
  self~assertEquals(int16, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', int16), "value:" int16) 
  end
  
  --servers
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  objectpath ='/oorexx/dbus/ooTestService'        
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 0), "0")
  self~assertEquals(-1, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', -1), "-1")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 1), "1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', .nil), ".nil")   -- .nil is converted to zero
  self~assertEquals(-32768, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', -32768), "lowest value -32768") 
  self~assertEquals(32767, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 32767), "highest value 32767") 
  self~assertEquals("1", conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', "1"), "string 1") 
  self~assertEquals("0", conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', "0"), "string 0")  
  do i= 0 to 20                -- 20 random int16
  int16 = random(-32768,32767)
  self~assertEquals(int16, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', int16), "value:" int16) 
  end
  
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 0), "0")
  self~assertEquals(-1, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', -1), "-1")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 1), "1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', .nil), ".nil")   -- .nil is converted to zero
  self~assertEquals(-32768, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', -32768), "lowest value -32768") 
  self~assertEquals(32767, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', 32767), "highest value 32767") 
  self~assertEquals("1", conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', "1"), "string 1") 
  self~assertEquals("0", conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', "0"), "string 0")  
  do i= 0 to 20                -- 20 random int16
  int16 = random(-32768,32767)
  self~assertEquals(int16, conn~message('call',busname,objectpath,interface, 'ReplyInt16', 'n','n', int16), "value:" int16) 
  end
   
  
::method test_dbusobjects_int16_invalid_93.900_1
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)                 -- supplied Integer value too small - conversion failed 
  self~assertEquals(-40000, dbustest~ReplyInt16(-40000), "too low")
   
::method test_dbusobjects_int16_invalid_93.900_1_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.900)                -- supplied Integer value too small - conversion failed 
  self~assertEquals(-40000, dbustest~ReplyInt16(-40000), "too low")   
   
::method test_dbusobjects_int16_invalid_93.900_1_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.900)                   -- supplied Integer value too small - conversion failed 
  self~assertEquals(-40000, dbustest~ReplyInt16(-40000), "too low")
 
::method test_dbusobjects_int16_invalid_93.900_1_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.900)                   -- supplied Integer value too small - conversion failed 
  self~assertEquals(-40000, dbustest~ReplyInt16(-40000), "too low")
  
::method test_dbusobjects_int16_invalid_93.900_1_5
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)                     -- supplied Integer value too small - conversion failed 
  self~assertEquals(-40000, dbustest~ReplyInt16(-40000), "too low") 
  
::method test_dbusobjects_int16_invalid_93.900_1_6
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)                      -- supplied Integer value too small - conversion failed 
  self~assertEquals(-40000, dbustest~ReplyInt16(-40000), "too low")   
   
::method test_dbusobjects_int16_invalid_93.900_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)                 -- supplied Integer value too high - conversion failed    
  self~assertEquals(40000, dbustest~ReplyInt16(40000), "too high")
  
 ::method test_dbusobjects_int16_invalid_93.900_2_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.900)                  -- supplied Integer value too high - conversion failed    
  self~assertEquals(40000, dbustest~ReplyInt16(40000), "too high") 
 
 ::method test_dbusobjects_int16_invalid_93.900_2_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.900)                 -- supplied Integer value too high - conversion failed    
  self~assertEquals(40000, dbustest~ReplyInt16(40000), "too high")
 
::method test_dbusobjects_int16_invalid_93.900_2_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.900)                 -- supplied Integer value too high - conversion failed    
  self~assertEquals(40000, dbustest~ReplyInt16(40000), "too high")
 
::method test_dbusobjects_int16_invalid_93.900_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)                   -- conversion (value=[]) to a SHORT (INT16) value failed
  self~assertEquals("", dbustest~ReplyInt16(""), "empty")
  
::method test_dbusobjects_int16_invalid_93.900_3_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.900)                   -- conversion (value=[]) to a SHORT (INT16) value failed
  self~assertEquals("", dbustest~ReplyInt16(""), "empty")
  
::method test_dbusobjects_int16_invalid_93.900_3_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.900)                   -- conversion (value=[]) to a SHORT (INT16) value failed
  self~assertEquals("", dbustest~ReplyInt16(""), "empty")
  
::method test_dbusobjects_int16_invalid_93.900_3_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.900)                   -- conversion (value=[]) to a SHORT (INT16) value failed
  self~assertEquals("", dbustest~ReplyInt16(""), "empty")
  
::method test_dbusobjects_int16_invalid_93.900_3_5
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)                   -- conversion (value=[]) to a SHORT (INT16) value failed
  self~assertEquals("", dbustest~ReplyInt16(""), "empty")
  
::method test_dbusobjects_int16_invalid_93.900_3_6
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)                   -- conversion (value=[]) to a SHORT (INT16) value failed
  self~assertEquals("", dbustest~ReplyInt16(""), "empty")

::method test_dbusobjects_int16_invalid_93.903
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.903)                 -- Missing argument in method
  self~assertEquals(,dbustest~ReplyInt16(), "nothing")

::method test_dbusobjects_int16_invalid_93.903_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.903)                 -- Missing argument in method
  self~assertEquals(,dbustest~ReplyInt16(), "nothing")
  
::method test_dbusobjects_int16_invalid_93.903_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.903)                 -- Missing argument in method
  self~assertEquals(,dbustest~ReplyInt16(), "nothing")
  
::method test_dbusobjects_int16_invalid_93.903_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.903)                -- Missing argument in method
  self~assertEquals(,dbustest~ReplyInt16(), "nothing")  
  
::method test_dbusobjects_int32
  numeric digits 20
  busname = "oorexx.dbus.ooTestService"
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  
  dbustests=.array~of(.dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4"), -
                      privateserver, privateserver2)
  
 int32 = .list~new 
  do i= 0 to 30 
  int32~append(random(-2,0)||random(0,147483648))
  int32~append(random(0,2)||random(0,147483647))
  end

  do dbustest over dbustests
  dbustest~MethodName("test_dbusobjects_int32")
  self~assertEquals(0, dbustest~ReplyInt32(0), "0")
  self~assertEquals(-1, dbustest~ReplyInt32(-1), "-1")
  self~assertEquals(1, dbustest~ReplyInt32(1), "1")   
  self~assertEquals(0, dbustest~ReplyInt32(.nil), ".nil")         --  .nil converted to zero
  self~assertEquals(-2147483648, dbustest~ReplyInt32(-2147483648), "lowest value -2147483648")
  self~assertEquals(2147483647, dbustest~ReplyInt32(2147483647), "highest value 2147483647")
  self~assertEquals("1", dbustest~ReplyInt32("1"), "string 1")
  self~assertEquals("0", dbustest~ReplyInt32("0"), "string 0")

  do i over int32 
  self~assertEquals(i, dbustest~ReplyInt32(i), "value "i)
  end
  self~assertSame("test_dbusobjects_int32",dbustest~MethodName, "test if property set was sucessful")
  end
    
::method test_dbusobjects_int32_direct
  numeric digits 20
  conn = .dbus~session
  interface ='oorexx.dbus.ooTestService'
  busname ='oorexx.dbus.ooTestService'
  objectpath ='/oorexx/dbus/ooTestService'
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 0), "0")
  self~assertEquals(-1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', -1), "-1")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 1), "1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', .nil), ".nil")
  self~assertEquals(-2147483648, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', -2147483648), "lowest value -2147483648")
  self~assertEquals(2147483647, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 2147483647), "highest value 2147483647")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', "1"), "string 1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', "0"), "string 0")
  
  objectpath ='/oorexx/dbus/ooTestService2'
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 0), "0")
  self~assertEquals(-1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', -1), "-1")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 1), "1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', .nil), ".nil")
  self~assertEquals(-2147483648, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', -2147483648), "lowest value -2147483648")
  self~assertEquals(2147483647, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 2147483647), "highest value 2147483647")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', "1"), "string 1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', "0"), "string 0")
  
  objectpath ='/oorexx/dbus/ooTestService3'
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 0), "0")
  self~assertEquals(-1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', -1), "-1")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 1), "1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', .nil), ".nil")
  self~assertEquals(-2147483648, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', -2147483648), "lowest value -2147483648")
  self~assertEquals(2147483647, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 2147483647), "highest value 2147483647")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', "1"), "string 1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', "0"), "string 0")
  
  objectpath ='/oorexx/dbus/ooTestService4'
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 0), "0")
  self~assertEquals(-1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', -1), "-1")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 1), "1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', .nil), ".nil")
  self~assertEquals(-2147483648, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', -2147483648), "lowest value -2147483648")
  self~assertEquals(2147483647, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 2147483647), "highest value 2147483647")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', "1"), "string 1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', "0"), "string 0")
  
  objectpath ='/oorexx/dbus/ooTestService5'
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 0), "0")
  self~assertEquals(-1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', -1), "-1")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 1), "1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', .nil), ".nil")
  self~assertEquals(-2147483648, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', -2147483648), "lowest value -2147483648")
  self~assertEquals(2147483647, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 2147483647), "highest value 2147483647")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', "1"), "string 1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', "0"), "string 0")
  
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  objectpath ='/oorexx/dbus/ooTestService'
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 0), "0")
  self~assertEquals(-1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', -1), "-1")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 1), "1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', .nil), ".nil")
  self~assertEquals(-2147483648, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', -2147483648), "lowest value -2147483648")
  self~assertEquals(2147483647, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 2147483647), "highest value 2147483647")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', "1"), "string 1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', "0"), "string 0")
  
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 0), "0")
  self~assertEquals(-1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', -1), "-1")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 1), "1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', .nil), ".nil")
  self~assertEquals(-2147483648, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', -2147483648), "lowest value -2147483648")
  self~assertEquals(2147483647, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', 2147483647), "highest value 2147483647")
  self~assertEquals(1, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', "1"), "string 1")
  self~assertEquals(0, conn~message('call',busname,objectpath,interface, 'ReplyInt32', 'i','i', "0"), "string 0")
  
  
 
/* -- [SYNTAX 93.900] raised, but if expected, [SYNTAX 91.999] is raised
::method test_dbusobjects_int32_invalid_93.900_digitserror
  -- when the amount of digit is not set properly, ooRexx converts to value=[-2.1475E+9]
  numeric digits 5
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object
  self~expectSyntax(93.900)			numeric digits not set properly
  self~assertEquals(-2147483648, dbustest~ReplyInt32(-2147483648), "lowest value -2147483648")
*/
 
::method test_dbusobjects_int32_invalid_93.900_1
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too small - conversion failed 
  self~assertEquals(-2200000000, dbustest~ReplyInt32(-2200000000), "too low")

::method test_dbusobjects_int32_invalid_93.900_1_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too small - conversion failed 
  self~assertEquals(-2200000000, dbustest~ReplyInt32(-2200000000), "too low") 
  
::method test_dbusobjects_int32_invalid_93.900_1_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too small - conversion failed 
  self~assertEquals(-2200000000, dbustest~ReplyInt32(-2200000000), "too low") 
  
::method test_dbusobjects_int32_invalid_93.900_1_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too small - conversion failed 
  self~assertEquals(-2200000000, dbustest~ReplyInt32(-2200000000), "too low")
  
::method test_dbusobjects_int32_invalid_93.900_1_5
   privateconn=.dbus~new("unix:path=/tmp/dbus-test;")
   dbustest = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
   self~expectSyntax(93.900)			-- supplied Integer value too small - conversion failed 
   self~assertEquals(-2200000000, dbustest~ReplyInt32(-2200000000), "too low")
  
::method test_dbusobjects_int32_invalid_93.900_1_6
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too small - conversion failed 
  self~assertEquals(-2200000000, dbustest~ReplyInt32(-2200000000), "too low")
   
::method test_dbusobjects_int32_invalid_93.900_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(2200000000, dbustest~ReplyInt32(2200000000), "too high")
    
::method test_dbusobjects_int32_invalid_93.900_2_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(2200000000, dbustest~ReplyInt32(2200000000), "too high")
   
::method test_dbusobjects_int32_invalid_93.900_2_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(2200000000, dbustest~ReplyInt32(2200000000), "too high") 
    
::method test_dbusobjects_int32_invalid_93.900_2_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(2200000000, dbustest~ReplyInt32(2200000000), "too high")  
   
::method test_dbusobjects_int32_invalid_93.900_2_5
  privateconn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(2200000000, dbustest~ReplyInt32(2200000000), "too high")  
   
::method test_dbusobjects_int32_invalid_93.900_2_6
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object    
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(2200000000, dbustest~ReplyInt32(2200000000), "too high")  
     
::method test_dbusobjects_int32_invalid_93.900_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion (value=[]) to a int 32 value failed
  self~assertEquals("", dbustest~ReplyInt32(""), "empty")
  
::method test_dbusobjects_int32_invalid_93.900_3_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion (value=[]) to a int 32 value failed
  self~assertEquals("", dbustest~ReplyInt32(""), "empty")
  
::method test_dbusobjects_int32_invalid_93.900_3_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion (value=[]) to a int 32 value failed
  self~assertEquals("", dbustest~ReplyInt32(""), "empty")
  
::method test_dbusobjects_int32_invalid_93.900_3_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion (value=[]) to a int 32 value failed
  self~assertEquals("", dbustest~ReplyInt32(""), "empty")
  
::method test_dbusobjects_int32_invalid_93.900_3_5
  privateconn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion (value=[]) to a int 32 value failed
  self~assertEquals("", dbustest~ReplyInt32(""), "empty")
  
::method test_dbusobjects_int32_invalid_93.900_3_6
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object 
  self~expectSyntax(93.900)			-- conversion (value=[]) to a int 32 value failed
  self~assertEquals("", dbustest~ReplyInt32(""), "empty")
  
::method test_dbusobjects_int32_invalid_93.903
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.903)			-- Missing argument in method
  self~assertEquals(,dbustest~ReplyInt32(), "nothing")   
  
::method test_dbusobjects_int32_invalid_93.903_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.903)			-- Missing argument in method
  self~assertEquals(,dbustest~ReplyInt32(), "nothing")    
  
::method test_dbusobjects_int32_invalid_93.903_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.903)			-- Missing argument in method
  self~assertEquals(,dbustest~ReplyInt32(), "nothing")    
 
::method test_dbusobjects_int32_invalid_93.903_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.903)			-- Missing argument in method
  self~assertEquals(,dbustest~ReplyInt32(), "nothing")    
  
::method test_dbusobjects_int32_invalid_93.903_5
  privateconn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  self~expectSyntax(93.903)			-- Missing argument in method
  self~assertEquals(,dbustest~ReplyInt32(), "nothing")   
  
::method test_dbusobjects_int32_invalid_93.903_6
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object 
  self~expectSyntax(93.903)			-- Missing argument in method
  self~assertEquals(,dbustest~ReplyInt32(), "nothing")   
   
::method test_dbusobjects_int64
  numeric digits 20                                    
  lowval=-9223372036854775808
  highval=9223372036854775807
    -- creating and testing some random numbers (append shorter ints) 
  int64 = .list~new 
  do i= 0 to 30 
  int64~append(random(-922337203,0) ||random(0,685477 ) ||random(0,5808))
  int64~append(random(0,922337203) ||random(0,685477 ) ||random(0,5807))
  int64~append(random(-429496730,429496729))
  end
  busname = "oorexx.dbus.ooTestService"

  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  
  dbustests=.array~of(.dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4"), -
                      privateserver, privateserver2)
  
  do dbustest over dbustests

  self~assertEquals(0, dbustest~ReplyInt64(0), "0")
  self~assertEquals(-1, dbustest~ReplyInt64(-1), "-1")
  self~assertEquals(1, dbustest~ReplyInt64(1), "1")   
  self~assertEquals(0, dbustest~ReplyInt64(.nil), ".nil")         -- .nil converted to zero
  self~assertEquals(-92233720, dbustest~ReplyInt64(-92233720), "low value")
  self~assertEquals(-2077252342, dbustest~ReplyInt64(-2077252342), "low value")
  self~assertEquals("1", dbustest~ReplyInt64("1"), "string 1")
  self~assertEquals("0", dbustest~ReplyInt64("0"), "string 0")
  
  self~assertEquals(-2147483649, dbustest~ReplyInt64(-2147483649), "lowest int32 value - 1")
  self~assertEquals(-2147483648, dbustest~ReplyInt64(-2147483648), "lowest int32 value ")
  self~assertEquals(2147483648, dbustest~ReplyInt64(2147483648), "highest int32 value + 1")
  self~assertEquals(2147483649, dbustest~ReplyInt64(2147483649), "highest int32 value + 2")
  self~assertEquals(-9223372036854, dbustest~ReplyInt64(-9223372036854), "low value")
  self~assertEquals(-6000000000, dbustest~ReplyInt64(-6000000000), "low value")
  
  self~assertEquals(lowval, dbustest~ReplyInt64(lowval), "lowest value -9223372036854775808")
  self~assertEquals(highval, dbustest~ReplyInt64(highval), "highest value 9223372036854775807")
  
  -- test random numbers 
    do i over int64 
    self~assertEquals(i, dbustest~ReplyInt64(i), "value "i)
    end
  end
  
  
/* error cannot be catched
::method test_dbusobjects_int64_invalid_93.900_digitserror
  -- amount of digit not set properly
  numeric digits 5
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object
  self~expectSyntax(93.900)			numeric digits not set properly
  self~assertEquals(-9223372036854775808, dbustest~ReplyInt64(-9223372036854775808), "lowest value -9223372036854775808")
*/

::method test_dbusobjects_int64_invalid_93.900_1
  numeric digits 20
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too small - conversion failed 
  self~assertEquals(-9300000000000000000, dbustest~ReplyInt64(-9300000000000000000), "too low")
  
::method test_dbusobjects_int64_invalid_93.900_1_2
  numeric digits 20
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too small - conversion failed 
  self~assertEquals(-9300000000000000000, dbustest~ReplyInt64(-9300000000000000000), "too low")
  
::method test_dbusobjects_int64_invalid_93.900_1_3
  numeric digits 20
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too small - conversion failed 
  self~assertEquals(-9300000000000000000, dbustest~ReplyInt64(-9300000000000000000), "too low")
  
  
::method test_dbusobjects_int64_invalid_93.900_1_4
  numeric digits 20
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too small - conversion failed 
  self~assertEquals(-9300000000000000000, dbustest~ReplyInt64(-9300000000000000000), "too low")
  
  
::method test_dbusobjects_int64_invalid_93.900_1_5
  numeric digits 20
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too small - conversion failed 
  self~assertEquals(-9300000000000000000, dbustest~ReplyInt64(-9300000000000000000), "too low")
  
  
::method test_dbusobjects_int64_invalid_93.900_1_6
  numeric digits 20
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too small - conversion failed 
  self~assertEquals(-9300000000000000000, dbustest~ReplyInt64(-9300000000000000000), "too low")
     
::method test_dbusobjects_int64_invalid_93.900_2
  numeric digits 20
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(9300000000000000000, dbustest~ReplyInt64(9300000000000000000), "too high")
  
::method test_dbusobjects_int64_invalid_93.900_2_2
  numeric digits 20
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(9300000000000000000, dbustest~ReplyInt64(9300000000000000000), "too high") 
  
::method test_dbusobjects_int64_invalid_93.900_2_3
  numeric digits 20
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(9300000000000000000, dbustest~ReplyInt64(9300000000000000000), "too high")
   
::method test_dbusobjects_int64_invalid_93.900_2_4
  numeric digits 20
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(9300000000000000000, dbustest~ReplyInt64(9300000000000000000), "too high")
    
::method test_dbusobjects_int64_invalid_93.900_2_5
  numeric digits 20
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(9300000000000000000, dbustest~ReplyInt64(9300000000000000000), "too high")
  
::method test_dbusobjects_int64_invalid_93.900_2_6
  numeric digits 20
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(9300000000000000000, dbustest~ReplyInt64(9300000000000000000), "too high")
  
::method test_dbusobjects_int64_invalid_93.900_3
  numeric digits 20
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion (value=[]) to a int 32 value failed
  self~assertEquals("", dbustest~ReplyInt64(""), "empty")
  
::method test_dbusobjects_int64_invalid_93.903
  numeric digits 20
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.903)			-- Missing argument in method
  self~assertEquals(,dbustest~ReplyInt64(), "nothing")   
    
::method test_dbusobjects_uint16
  busname = "oorexx.dbus.ooTestService"

  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  
  dbustests=.array~of(.dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4"), -
                      privateserver, privateserver2)
  
  do dbustest over dbustests
  self~assertEquals(0, dbustest~ReplyuInt16(0), "lowest value 0")
  self~assertEquals(1, dbustest~ReplyuInt16(1), "1")   
  self~assertEquals(0, dbustest~ReplyuInt16(.nil), ".nil")         -- .nil converted to zero
  self~assertEquals(65535, dbustest~ReplyuInt16(65535), "highest value 65535")
  self~assertEquals(1, dbustest~ReplyuInt16("1"), "string 1")
  self~assertEquals(0, dbustest~ReplyuInt16("0"), "string 0")
  end
    
::method test_dbusobjects_uint16_invalid_93.900_1
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion to an UNSIGNED SHORT (UINT16) value failed
  self~assertEquals(-4, dbustest~ReplyuInt16(-4), "negative value at unsigned integer")
   
::method test_dbusobjects_uint16_invalid_93.900_1_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion to an UNSIGNED SHORT (UINT16) value failed
  self~assertEquals(-4, dbustest~ReplyuInt16(-4), "negative value at unsigned integer")   
   
::method test_dbusobjects_uint16_invalid_93.900_1_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion to an UNSIGNED SHORT (UINT16) value failed
  self~assertEquals(-4, dbustest~ReplyuInt16(-4), "negative value at unsigned integer")   
   
::method test_dbusobjects_uint16_invalid_93.900_1_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion to an UNSIGNED SHORT (UINT16) value failed
  self~assertEquals(-4, dbustest~ReplyuInt16(-4), "negative value at unsigned integer")  
  
::method test_dbusobjects_uint16_invalid_93.900_1_5
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  self~expectSyntax(93.900)			-- conversion to an UNSIGNED SHORT (UINT16) value failed
  self~assertEquals(-4, dbustest~ReplyuInt16(-4), "negative value at unsigned integer")
  
::method test_dbusobjects_uint16_invalid_93.900_1_6
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object 
  self~expectSyntax(93.900)			-- conversion to an UNSIGNED SHORT (UINT16) value failed
  self~assertEquals(-4, dbustest~ReplyuInt16(-4), "negative value at unsigned integer")
     
::method test_dbusobjects_uint16_invalid_93.900_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(70000, dbustest~ReplyuInt16(70000), "too high")
  
::method test_dbusobjects_uint16_invalid_93.900_2_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(70000, dbustest~ReplyuInt16(70000), "too high") 
  
::method test_dbusobjects_uint16_invalid_93.900_2_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(70000, dbustest~ReplyuInt16(70000), "too high")  
  
::method test_dbusobjects_uint16_invalid_93.900_2_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(70000, dbustest~ReplyuInt16(70000), "too high") 
  
::method test_dbusobjects_uint16_invalid_93.900_2_5
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(70000, dbustest~ReplyuInt16(70000), "too high")   
    
::method test_dbusobjects_uint16_invalid_93.900_2_6
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(70000, dbustest~ReplyuInt16(70000), "too high")   
  
::method test_dbusobjects_uint16_invalid_93.900_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion (value=[]) to a SHORT (INT16) value failed
  self~assertEquals("", dbustest~ReplyuInt16(""), "empty") 
  
::method test_dbusobjects_uint16_invalid_93.900_3_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion (value=[]) to a SHORT (INT16) value failed
  self~assertEquals("", dbustest~ReplyuInt16(""), "empty") 
  
::method test_dbusobjects_uint16_invalid_93.900_3_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion (value=[]) to a SHORT (INT16) value failed
  self~assertEquals("", dbustest~ReplyuInt16(""), "empty")

::method test_dbusobjects_uint16_invalid_93.900_3_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion (value=[]) to a SHORT (INT16) value failed
  self~assertEquals("", dbustest~ReplyuInt16(""), "empty")
  
::method test_dbusobjects_uint16_invalid_93.900_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion (value=[]) to a SHORT (INT16) value failed
  self~assertEquals(1, dbustest~ReplyuInt16("one"), "one")  
 
::method test_dbusobjects_uint16_invalid_93.903
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.903)			-- Missing argument in method
  self~assertEquals(,dbustest~ReplyuInt16(), "nothing")    
  
::method test_dbusobjects_uint32
  numeric digits 14
  busname = "oorexx.dbus.ooTestService"
  
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  
  dbustests=.array~of(.dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4"), -
                      privateserver, privateserver2)
  
  do dbustest over dbustests

  self~assertEquals(0, dbustest~ReplyuInt32(0), "lowest value 0")
  self~assertEquals(1, dbustest~ReplyuInt32(1), "1")   
  self~assertEquals(0, dbustest~ReplyuInt32(.nil), ".nil")         --  .nil converted to zero
  self~assertEquals(4294967295, dbustest~ReplyuInt32(4294967295), "highest value 4294967295")
  self~assertEquals("1", dbustest~ReplyuInt32("1"), "string 1")
  self~assertEquals("0", dbustest~ReplyuInt32("0"), "string 0")
-- test 40 random uint32
    do i= 0 to 40 
     uint32 = random(0,4)||random(0,294967295)
     self~assertEquals(uint32, dbustest~ReplyuInt32(uint32), "value:" uint32)  
    end
  end
  
::method test_dbusobjects_uint32_invalid_93.900_1
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion to an UNSIGNED SHORT (UINT16) value failed
  self~assertEquals(-4, dbustest~ReplyuInt32(-4), "negative value at unsigned integer")
  
::method test_dbusobjects_uint32_invalid_93.900_1_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion to an UNSIGNED SHORT (UINT16) value failed
  self~assertEquals(-4, dbustest~ReplyuInt32(-4), "negative value at unsigned integer")
  
::method test_dbusobjects_uint32_invalid_93.900_1_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion to an UNSIGNED SHORT (UINT16) value failed
  self~assertEquals(-4, dbustest~ReplyuInt32(-4), "negative value at unsigned integer")
  
::method test_dbusobjects_uint32_invalid_93.900_1_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion to an UNSIGNED SHORT (UINT16) value failed
  self~assertEquals(-4, dbustest~ReplyuInt32(-4), "negative value at unsigned integer")
  
::method test_dbusobjects_uint32_invalid_93.900_1_5
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  self~expectSyntax(93.900)			-- conversion to an UNSIGNED SHORT (UINT16) value failed
  self~assertEquals(-4, dbustest~ReplyuInt32(-4), "negative value at unsigned integer")  
  
::method test_dbusobjects_uint32_invalid_93.900_1_6
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion to an UNSIGNED SHORT (UINT16) value failed
  self~assertEquals(-4, dbustest~ReplyuInt32(-4), "negative value at unsigned integer") 
 
::method test_dbusobjects_uint32_invalid_93.900_2
  numeric digits 15
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(4300000000, dbustest~ReplyuInt32(4300000000), "too high")
  
::method test_dbusobjects_uint32_invalid_93.900_2_2
  numeric digits 15
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(4300000000, dbustest~ReplyuInt32(4300000000), "too high")  
  
::method test_dbusobjects_uint32_invalid_93.900_2_3
  numeric digits 15
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(4300000000, dbustest~ReplyuInt32(4300000000), "too high") 
  
::method test_dbusobjects_uint32_invalid_93.900_2_4
  numeric digits 15
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(4300000000, dbustest~ReplyuInt32(4300000000), "too high")
  
::method test_dbusobjects_uint32_invalid_93.900_2_5
  numeric digits 15
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(4300000000, dbustest~ReplyuInt32(4300000000), "too high") 
  
::method test_dbusobjects_uint32_invalid_93.900_2_6
  numeric digits 15
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(4300000000, dbustest~ReplyuInt32(4300000000), "too high")
  
::method test_dbusobjects_uint32_invalid_93.900_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion (value=[]) to a SHORT (INT16) value failed
  self~assertEquals("", dbustest~ReplyuInt32(""), "empty")
  
::method test_dbusobjects_uint32_invalid_93.903
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.903)			-- Missing argument in method
  self~assertEquals(,dbustest~ReplyuInt32(), "nothing")     
  
::method test_dbusobjects_uint64
  numeric digits 30
  maxvalue = 18446744073709551615
  busname = "oorexx.dbus.ooTestService"

  uint64 = .list~new           -- creating and testing some random numbers
  do i= 0 to 30 
  uint64~append(random(0,184467440) ||random(0,737095516 ) ||random(0,15))
  end
    
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  
  dbustests=.array~of(.dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4"), -
                      privateserver, privateserver2)
  
  do dbustest over dbustests
  self~assertEquals(0, dbustest~ReplyuInt64(0), "lowest value 0")
  self~assertEquals(1, dbustest~ReplyuInt64(1), "1")   
  self~assertEquals(0, dbustest~ReplyuInt64(.nil), ".nil")         -- .nil converted to zero
  self~assertEquals("1", dbustest~ReplyuInt64("1"), "string 1")
  self~assertEquals("0", dbustest~ReplyuInt64("0"), "string 0") 
  self~assertEquals(maxvalue, dbustest~ReplyuInt64(maxvalue), "maxvalue 18446744073709551615")
  -- test random numbers 
    do i over uint64 
     self~assertEquals(i, dbustest~ReplyuInt64(i), "value "i)
    end
  end
  
::method test_dbusobjects_uint64_invalid_93.900_1
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion to an uint 64 value failed
  self~assertEquals(-4, dbustest~ReplyuInt64(-4), "negative value at unsigned integer")

::method test_dbusobjects_uint64_invalid_93.900_1_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion to an uint 64 value failed
  self~assertEquals(-4, dbustest~ReplyuInt64(-4), "negative value at unsigned integer")
  
::method test_dbusobjects_uint64_invalid_93.900_1_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.900)                    -- conversion to an uint 64 value failed
  self~assertEquals(-4, dbustest~ReplyuInt64(-4), "negative value at unsigned integer")
  
::method test_dbusobjects_uint64_invalid_93.900_1_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion to an uint 64 value failed
  self~assertEquals(-4, dbustest~ReplyuInt64(-4), "negative value at unsigned integer")
  
::method test_dbusobjects_uint64_invalid_93.900_1_5
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  self~expectSyntax(93.900)			-- conversion to an uint 64 value failed
  self~assertEquals(-4, dbustest~ReplyuInt64(-4), "negative value at unsigned integer") 
  
::method test_dbusobjects_uint64_invalid_93.900_1_6
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion to an uint 64 value failed
  self~assertEquals(-4, dbustest~ReplyuInt64(-4), "negative value at unsigned integer")
  
::method test_dbusobjects_uint64_invalid_93.900_2
  numeric digits 30
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(19000000000000000000, dbustest~ReplyuInt64(19000000000000000000), "too high")
  
::method test_dbusobjects_uint64_invalid_93.900_2_2
  numeric digits 30
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(19000000000000000000, dbustest~ReplyuInt64(19000000000000000000), "too high") 
  
::method test_dbusobjects_uint64_invalid_93.900_2_3
  numeric digits 30
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(19000000000000000000, dbustest~ReplyuInt64(19000000000000000000), "too high")
  
::method test_dbusobjects_uint64_invalid_93.900_2_4
  numeric digits 30
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(19000000000000000000, dbustest~ReplyuInt64(19000000000000000000), "too high")
    
::method test_dbusobjects_uint64_invalid_93.900_2_5
  numeric digits 30
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(19000000000000000000, dbustest~ReplyuInt64(19000000000000000000), "too high")
  
::method test_dbusobjects_uint64_invalid_93.900_2_6
  numeric digits 30
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object 
  self~expectSyntax(93.900)			-- supplied Integer value too high - conversion failed    
  self~assertEquals(19000000000000000000, dbustest~ReplyuInt64(19000000000000000000), "too high")
  
::method test_dbusobjects_uint64_invalid_93.900_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion (value=[]) to a (INT64) value failed
  self~assertEquals("", dbustest~ReplyuInt64(""), "empty")
  
::method test_dbusobjects_uint64invalid_93.903
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.903)			-- Missing argument in method
  self~assertEquals(,dbustest~ReplyuInt64(), "nothing")   
  
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxxx  Doubles xxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

::method test_dbusobjects_double  
  busname = "oorexx.dbus.ooTestService"
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  
    --create random doubles between 0 - 9999999 . 0 - 9999999
  positives = .list~new 
  negatives = .list~new 
  do i= 0 to 30 
  positives~append(random(0,9999999)||"."||random(0,9999999))
  negatives~append("-"||random(0,9999999)||"."||random(0,9999999))
  end
  
  dbustests=.array~of(.dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4"), -
                      privateserver, privateserver2)
  
  do dbustest over dbustests
  self~assertEquals(1, dbustest~ReplyDouble(1), "value 1")
  self~assertEquals(1.0, dbustest~ReplyDouble(1.0), "value 1.0")
  -- assert same produces errors as the double is converted to 1
  self~assertNotSame(1.0, dbustest~ReplyDouble(1.0), "value 1.0")
  self~assertSame(1, dbustest~ReplyDouble("1.0"), "string 1.0")
  self~assertSame(1, dbustest~ReplyDouble(1.0), "value 1.0")
  self~assertEquals(1, dbustest~ReplyDouble("1.0"), "string 1.0")  
  self~assertEquals(1, dbustest~ReplyDouble(1.0), "value 1.0")
  self~assertEquals(1.0, dbustest~ReplyDouble("1.0"), "string 1.0")
  self~assertEquals(-1, dbustest~ReplyDouble(-1), "value -1")
  self~assertSame(-1, dbustest~ReplyDouble(-1), "value -1")
  self~assertEquals(-1.9, dbustest~ReplyDouble(-1.9), "value -1.9") 
  self~assertEquals(-1.123456789, dbustest~ReplyDouble(-1.123456789), "value -1.123456789") 
  
  -- cropped at the 9th position unless limit raised with numeric digits 
  numeric digits 9  -- default value
  self~assertEquals(-123456789.19, dbustest~ReplyDouble(-123456789.11), "different values after 9th digit")
  -- assertion would fail if numeric digits is set higher than default
  self~assertSame(-123456789.19, dbustest~ReplyDouble(-123456789.11), "different values after 9th digit")
  
  numeric digits 20     -- limit raised to 20, assertsame must now fail
  self~assertEquals(-123456789.19, dbustest~ReplyDouble(-123456789.11), "different values after 9th digit, limit 20")
  self~assertNotSame(-123456789.19, dbustest~ReplyDouble(-123456789.11), "different values after 9th digit, limit 20")
  
--subsequently raise numbers and test with assertSame and assertNotSame 
  numeric digits 5 
  self~assertSame(-1.8999999999999999112, Format(dbustest~ReplyDouble(-1.9),2,4), rounded to 5 with numeric digits 5)
-- if not instructed with format, only the expected value is rounded
  self~assertNotSame(-1.8999999999999999112, dbustest~ReplyDouble(-1.9), "value -1.9")
-- should nonetheless be equal
  self~assertEquals(-1.8999999999999999112, dbustest~ReplyDouble(-1.9), "value -1.9")
  
  numeric digits 15         --raise digits to 15
  self~assertEquals(-1.8999999999999999112, dbustest~ReplyDouble(-1.9), "value -1.9")
  self~assertSame(-1.8999999999999999112, Format(dbustest~ReplyDouble(-1.9),2,14), "value -1.9")
  self~assertNotSame(-1.8999999999999999112, dbustest~ReplyDouble(-1.9), "value -1.9") 
  
  numeric digits 20         --raise digits to 20
  self~assertSame(-1.8999999999999999112, dbustest~ReplyDouble(-1.9), "value -1.9") 

   do i over positives 
     self~assertEquals(i, dbustest~ReplyDouble(i), "value "i)
   end
   do i over negatives 
     self~assertEquals(i, dbustest~ReplyDouble(i), "value "i)
   end
  end
  
  numeric digits 30
  -- max int64 value = 9223372036854775807
  i = 9223372036854775808.5
  self~assertEquals(i, dbustest~ReplyDouble(i), "value "i)

  
::method test_dbusobjects_double_invalid  
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  -- .nil gets converted to 0
  self~assertEquals(0, dbustest~ReplyDouble(.nil), ".nil converted to 0")
  
::method test_dbusobjects_double_invalid_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  -- .nil gets converted to 0
  self~assertEquals(0, dbustest~ReplyDouble(.nil), ".nil converted to 0")  
  
::method test_dbusobjects_double_invalid_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  -- .nil gets converted to 0
  self~assertEquals(0, dbustest~ReplyDouble(.nil), ".nil converted to 0") 
  
::method test_dbusobjects_double_invalid_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~assertEquals(0, dbustest~ReplyDouble(.nil), ".nil converted to 0")
  
::method test_dbusobjects_double_invalid_5  
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  -- .nil gets converted to 0
  self~assertEquals(0, dbustest~ReplyDouble(.nil), ".nil converted to 0") 
   
::method test_dbusobjects_double_invalid_6
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object 
  -- .nil gets converted to 0
  self~assertEquals(0, dbustest~ReplyDouble(.nil), ".nil converted to 0") 
  
::method test_dbusobjects_double_invalid_93.900_1
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion to double
  self~assertEquals("", dbustest~ReplyDouble(""), "empty")
  
::method test_dbusobjects_double_invalid_93.900_1_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion to double
  self~assertEquals("", dbustest~ReplyDouble(""), "empty") 
  
::method test_dbusobjects_double_invalid_93.900_1_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion to double
  self~assertEquals("", dbustest~ReplyDouble(""), "empty")
  
::method test_dbusobjects_double_invalid_93.900_1_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object   
  self~expectSyntax(93.900)			-- conversion to double
  self~assertEquals("", dbustest~ReplyDouble(""), "empty")
  
::method test_dbusobjects_double_invalid_93.900_1_5
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  self~expectSyntax(93.900)			-- conversion to double
  self~assertEquals("", dbustest~ReplyDouble(""), "empty") 

::method test_dbusobjects_double_invalid_93.900_1_6
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object 
  self~expectSyntax(93.900)			-- conversion to double
  self~assertEquals("", dbustest~ReplyDouble(""), "empty") 

::method test_dbusobjects_double_invalid_93.900_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object   
  self~expectSyntax(93.900)			-- multiple arguments (wrong localzation)
  self~assertEquals(1,1, dbustest~ReplyDouble(1,1), "1,1 as used in german for example") 

-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxxx Container xxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxxxx Array  xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

--/*  not allowed to use an array without giving additional signature
--*/ 
::method test_dbusobjects_array_ofstrings       

  busname = "oorexx.dbus.ooTestService"
  dbustest = .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService")  -- get the dbus object
  dbustest2 = .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2")  -- get the dbus object
  dbustest3 = .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3")  -- get the dbus object
  dbustest4 = .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4")  -- get the dbus object
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
 
  stringarray= .array~of("","a","abcdefghijklmnopjrstuvwxyz123456789","", "öäü""*~<>|",1.5, "!$%&/()=?")

  dbustests=.array~of(.dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4"), -
                      privateserver, privateserver2)
  
  do dbustest over dbustests
  self~assertEquals(stringarray,dbustest~ReplyArrayofString(stringarray), "stringarray")
  self~assertEquals(.array~new, dbustest~ReplyArrayofString(.array~new), "empty array")
  self~assertEquals(.array~of(), dbustest~ReplyArrayofString(.array~of()), "empty array")
  self~assertEquals(.array~of("a", "b", "c"), dbustest~ReplyArrayofString(.array~of("a", "b", "c")), "array a b c")
  end

-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxx Array of Integers xxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

::method test_dbusobjects_array_allintegers
  busname = "oorexx.dbus.ooTestService"
  numeric digits 20                           -- if the limit is lower or default, assertion will fail
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  
  dbustests=.array~of(.dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4"), -
                      privateserver, privateserver2)
  
 sarray = .array~of(0,1,2,3,4,5,6,7,8,9)      --simple array
 arraynil = .array~of(.nil,0)                -- nil
 boundaries16 = .array~of(-32768,-1,0,1,32767)
 boundaries32 = .array~of(-2147483648,-1,0,1,2147483647) 
 boundaries64 = .array~of(-9223372036854775808,-1,0,1,9223372036854775807)
 boundariesu16 = .array~of(0,1,32000, 65534, 65535)
 boundariesu32 = .array~of(0,1,4294967294, 4294967295)
 boundariesu64 = .array~of(0,1,18446744073709551614,18446744073709551615)
 arrays = .array~of("0","1","2","3","4","5","6","7","8","9") --stringarray
        
  do dbustest over dbustests
  self~assertEquals(sarray, dbustest~ReplyArrayofInt16(sarray), "array of 1,2,3,4,5,6,7,8,9")
  self~assertEquals(boundaries16, dbustest~ReplyArrayofInt16(boundaries16), "boundaries of int16")
  self~assertEquals(arrays, dbustest~ReplyArrayofInt16(arrays), "array of 1,2,3,4,5,6,7,8,9 as string")
  -- tests if the arrays are different object - must always be true
  self~assertNotSame(arrays, dbustest~ReplyArrayofInt16(arrays), "array of 1,2,3,4,5,6,7,8,9 as string")
  self~assertEquals(.array~of(0,0), dbustest~ReplyArrayofInt16(arraynil), "array of .nil and 0")
  
 -- ### array_int32 ### 
  self~assertEquals(sarray, dbustest~ReplyArrayofInt32(sarray), "array of 1,2,3,4,5,6,7,8,9")
  self~assertEquals(boundaries32, dbustest~ReplyArrayofInt32(boundaries32), "boundaries of int32")
  self~assertEquals(arrays, dbustest~ReplyArrayofInt32(arrays), "array of 1,2,3,4,5,6,7,8,9 as string")
  self~assertNotSame(arrays, dbustest~ReplyArrayofInt32(arrays), "array of 1,2,3,4,5,6,7,8,9 as string")
  self~assertEquals(.array~of(0,0), dbustest~ReplyArrayofInt32(arraynil), "array of .nil and 0")
 
-- ### array_int64 ###
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object
  self~assertEquals(sarray, dbustest~ReplyArrayofInt64(sarray), "array of 1,2,3,4,5,6,7,8,9")
  self~assertEquals(boundaries64, dbustest~ReplyArrayofInt64(boundaries64), "boundaries of int64")
  self~assertEquals(arrays, dbustest~ReplyArrayofInt64(arrays), "array of 1,2,3,4,5,6,7,8,9 as string")
  self~assertNotSame(arrays, dbustest~ReplyArrayofInt64(arrays), "array of 1,2,3,4,5,6,7,8,9 as string")
  self~assertEquals(.array~of(0,0), dbustest~ReplyArrayofInt64(arraynil), "array of .nil and 0")

-- ### array_uint16 ###

  self~assertEquals(sarray, dbustest~ReplyArrayofUInt16(sarray), "array of 1,2,3,4,5,6,7,8,9")
  self~assertEquals(boundariesu16, dbustest~ReplyArrayofUInt16(boundariesu16), "boundaries of uint16")
  self~assertEquals(arrays, dbustest~ReplyArrayofUInt16(arrays), "array of 1,2,3,4,5,6,7,8,9 as string")
  -- tests if the arrays are different object - must always be true
  self~assertNotSame(arrays, dbustest~ReplyArrayofUInt16(arrays), "array of 1,2,3,4,5,6,7,8,9 as string")
  self~assertEquals(.array~of(0,0), dbustest~ReplyArrayofUInt16(arraynil), "array of .nil and 0")
   
-- ### array_uint32 ###   

  self~assertEquals(sarray, dbustest~ReplyArrayofUInt32(sarray), "array of 1,2,3,4,5,6,7,8,9")
  self~assertEquals(boundariesu32, dbustest~ReplyArrayofUInt32(boundariesu32), "boundaries of uint32")
  self~assertEquals(arrays, dbustest~ReplyArrayofUInt32(arrays), "array of 1,2,3,4,5,6,7,8,9 as string")
  self~assertNotSame(arrays, dbustest~ReplyArrayofUInt32(arrays), "array of 1,2,3,4,5,6,7,8,9 as string")
  self~assertEquals(.array~of(0,0), dbustest~ReplyArrayofUInt32(arraynil), "array of .nil and 0")
 
 -- ### array_uint64 ### 

  self~assertEquals(sarray, dbustest~ReplyArrayofUInt64(sarray), "array of 1,2,3,4,5,6,7,8,9")
  self~assertEquals(boundariesu64, dbustest~ReplyArrayofUInt64(boundariesu64), "boundaries of uint64")
  self~assertEquals(arrays, dbustest~ReplyArrayofUInt64(arrays), "array of 1,2,3,4,5,6,7,8,9 as string")
  self~assertNotSame(arrays, dbustest~ReplyArrayofUInt64(arrays), "array of 1,2,3,4,5,6,7,8,9 as string")
  self~assertEquals(.array~of(0,0), dbustest~ReplyArrayofUInt64(arraynil), "array of .nil and 0")
 end
  
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxx Array of Doubles xxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx 
  
::method test_dbusobjects_array_ofDouble
 busname = "oorexx.dbus.ooTestService"
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject(busname,"/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject(busname,"/oorexx/dbus/ooTestService") 
  
  sarray = .array~of(0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0)    -- 1.0 is converted to 1
  arrays = .array~of('0.1','0.2','0.3','0.4','0.5','0.6','0.7','0.8','0.9')
  nilarray = .array~of(.nil,0.0)          -- nil is converted to 0
  rndarray = .array~of(random(0,9999)||'.'||random(0,9999),random(0,9999)||'.'||random(0,9999),-
                       random(0,9999)||'.'||random(0,9999), random(0,9999)||'.'||random(0,9999), -
                       random(0,9999)||'.'||random(0,9999), random(0,9999)||'.'||random(0,9999))
  
  dbustests=.array~of(.dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4"), -
                      privateserver, privateserver2)
  do dbustest over dbustests
                      
  self~assertNotEquals(sarray,dbustest~ReplyArrayofDouble(sarray),"simple array")
  
-- doubles have to be unwrapped for assertion, else assertion fails
  array2 = dbustest~ReplyArrayofDouble(sarray)
  do i=1 to sarray~size
  self~assertEquals(sarray[i], array2[i], "array of 0.1 - 0.9")
  end
  
  self~assertNotSame(arrays, dbustest~ReplyArrayofDouble(arrays), "array of 0.1 - 0.9 as string")
  array2 = dbustest~ReplyArrayofDouble(arrays)
   do i=1 to arrays~size
    self~assertEquals(arrays[i], array2[i], "array of 0.1 - 0.9 as strings")
   end
  self~assertEquals(.array~of(0,0), dbustest~ReplyArrayofDouble(nilarray), "array of .nil and 0")
    
  self~assertNotEquals(rndarray,dbustest~ReplyArrayofDouble(rndarray),"simple array")
  array2 = dbustest~ReplyArrayofDouble(rndarray)
    do i=1 to arrays~size
     self~assertEquals(rndarray[i], array2[i], "rndarray")
    end
  end
    
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxx Array of Bytes xxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx 

::method test_dbusobjects_array_ofByte
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object 
  array = .array~of("a","A", "m", "M", "z", 1, "Z", "1")
  self~assertEquals(array, dbustest~ReplyArrayofByte(array), "array of some bytes")
  array = .array~of("48"x, "41"x, "4C"x, "4C"x, "4F"x)
  self~assertEquals(array, dbustest~ReplyArrayofByte(array), "array of some bytes")
 
::method test_dbusobjects_array_ofByte_error 
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object 
  array = .array~of( "48"x, "41"x, "4C"x, "4C"x, "c396"x)   -- = Hallö
  self~expectSyntax(93.900)
  self~assertEquals(array,dbustest~ReplyArrayofDouble(array), "1.0 is converted to 1 within array")

::method test_dbusobjects_array_ofBytes_AsString  
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object 
  dbustest2 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")
  dbustest3 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")
  dbustest4 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 =privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  
  at= .array~of('T','E','S','T')
  at2 = .array~of("48"x, "41"x, "4C"x, "4C"x, "4F"x)
  st = 'TEST'
  st2 = 'HALLO'
  dbustests=.array~of(dbustest , dbustest2, dbustest3,  privateserver, privateserver2)

  .dbus~session~unmarshalByteArrayAsString=.true 
  privateconn~unmarshalByteArrayAsString=.true 
  privateconn2~unmarshalByteArrayAsString=.true 
  
  do dbustest over dbustests
  self~assertNotEquals(at, dbustest~ReplyArrayofByte(at), "array expected but string returned")
  self~assertEquals(st, dbustest~ReplyArrayofByte(at), "string expected, arrayasstring returned")
  self~assertNotEquals(at2, dbustest~ReplyArrayofByte(at2), "array expected but string returned")
  self~assertEquals(st2, dbustest~ReplyArrayofByte(at2), "string expected, arrayasstring returned")  
 end
 
 .dbus~session~unmarshalByteArrayAsString=.false 
 privateconn~unmarshalByteArrayAsString=.false 
privateconn2~unmarshalByteArrayAsString=.false 
 
 do dbustest over dbustests 
  self~assertEquals(at, dbustest~ReplyArrayofByte(at), "array expected array returned")
  self~assertNotEquals(st, dbustest~ReplyArrayofByte(at), "string expected, array returned")
  self~assertEquals(at, dbustest~ReplyArrayofByte(st), "array expected and string send (signature marshalled)")
  self~assertEquals(at2, dbustest~ReplyArrayofByte(at2), "array expected array returned")
  self~assertNotEquals(st2, dbustest~ReplyArrayofByte(at2), "string expected, array returned")
  self~assertEquals(at2, dbustest~ReplyArrayofByte(st2), "array expected and string send (signature marshalled)")
  end
  
  -- does not allow to set unmarshalByteArrayAsString
  --dbustest4
  .dbus~session~unmarshalByteArrayAsString=.true 
  self~assertNotEquals(st, dbustest~ReplyArrayofByte(at), "string expected, arrayasstring returned")
  
  
  -- return to default values
   .dbus~session~unmarshalByteArrayAsString=.true 
  privateconn~unmarshalByteArrayAsString=.true 
  privateconn2~unmarshalByteArrayAsString=.true 
  
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxx Array of Boolean xxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx   
  
 ::method test_dbusobjects_array_ofBoolean
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object 
  dbustest2 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")
  dbustest3 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")
  dbustest4 = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 =privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  arraytf = .array~of(0,1)
  array = .array~of(.false,.true,0,1,"0","1")
  nilarray = .array~of(.nil,0)
 dbustests=.array~of(dbustest , dbustest2, dbustest3,  privateserver, privateserver2)
 do dbustest over dbustests 
  self~assertEquals(arraytf, dbustest~ReplyArrayofBoolean(arraytf), "array of 0 , 1")
  self~assertEquals(array, dbustest~ReplyArrayofBoolean(array), "array of .false,.true,0,1,'0','1'")
  self~assertNotSame(array, dbustest~ReplyArrayofBoolean(array), ".false,.true,0,1,'0','1'")
  self~assertEquals(.array~of(0,0), dbustest~ReplyArrayofBoolean(nilarray), "array of .nil and 0")
 end
 
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxx Array of Signature xxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx   
  
 ::method test_dbusobjects_array_ofSignature
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  
  -- do not assess "a" without parameter, same is valid for aa
  single = .array~of("", "b", "d", "g", "h", "i", "n", "o", "q", "s", "t", "u", "v", "x")
   self~assertEquals(single, dbustest~ReplyArrayofSignature(single), "array of all signatures")
   
   combination = .array~of("","as", "ab", "ad", "ag", "ah", "ai" , "an", "ao", "aq", "as", "at", "au", "av", "ax",  -
   "bb", "dd", "gg", "hh", "ii" , "nn", "oo", "qq", "ss", "tt" , "uu", "vv", "xx", "aas")
  self~assertEquals(combination, dbustest~ReplyArrayofSignature(combination), "combination")
  self~assertNotSame(combination, dbustest~ReplyArrayofSignature(combination), ".false,.true,0,1,'0','1'")

  val = "i"~copies(255)
  array = .array~of(val, val,"s")
  self~assertEquals(array, dbustest~ReplyArrayofSignature(array), "array of 2 max long signatures and s") 
  
  --exceeding max value of signatures
  val = "oi"~copies(255)
  array = .array~of(val, val,"s")
  
  self~expectSyntax(93.900)
  self~assertEquals(array, dbustest~ReplyArrayofSignature(array), "array of 2 max long signatures and s") 
    
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxx Array of ObjectPaths xxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx 

 ::method test_dbusobjects_array_ofObjectPaths
   busname = "oorexx.dbus.ooTestService"
   privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
   privateserver = privateconn~getObject(busname,"/oorexx/dbus/ooTestService") 
   privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
   privateserver2 = privateconn2~getObject(busname,"/oorexx/dbus/ooTestService") 
   dbustests=.array~of(.dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4"), -
                      privateserver, privateserver2)
  do dbustest over dbustests
  array = .array~of("/", "/Test", "/Test/path", "/1")
  self~assertEquals(array, dbustest~ReplyArrayofobjpath(array), "array of various ObjectPaths") 
  array = .array~of("/1", "/2/3/4/5", "/a/b/c", "/A/B/C", "/a/B/c/D", "/a/1/b/2/c/3", "/a1/b2/c3/d4")
  self~assertEquals(array, dbustest~ReplyArrayofobjpath(array), "array of various ObjectPaths") 
  end
 
 -- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx 
 -- xxxxxxxxxxxxxxxxxxxxx Array of Variants xxxxxxxxxxxxxxxxxxxxxxx
 
::method test_dbusobjects_array_ofVariants
 busname = "oorexx.dbus.ooTestService"
   privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
   privateserver = privateconn~getObject(busname,"/oorexx/dbus/ooTestService") 
   privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
   privateserver2 = privateconn2~getObject(busname,"/oorexx/dbus/ooTestService") 
   dbustests=.array~of(.dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4"), -
                      privateserver, privateserver2)
                      
 boxedvariant =.array~of(dbus.box('s', 'string'), dbus.box('b', .true), dbus.box('n', 32767), -
         dbus.box('i',2147483647 ) , dbus.box('x',9223372036854775807 ), dbus.box('q',65535 ), -
         dbus.box('u',4294967295 ) , dbus.box('t',18446744073709551615 ) ,dbus.box('y','a' ))
 
 unboxedvariant=.array~of('string',.true, 32767, 2147483647, 9223372036854775807, -
                 65535, 4294967295, 18446744073709551615, 'a')     
                 
 do dbustest over dbustests

 uboxrv = dbustest~ReplyArrayofVariant(unboxedvariant)
 boxrv = dbustest~ReplyArrayofVariant(boxedvariant)

 self~assertEquals(unboxedvariant,uboxrv)         -- unboxed variants are equal
 self~assertEquals(uboxrv,boxrv)                  -- boxed items are returned correctly
 end
 
 
 -- asserting .nil values for given object types
   nulvar =  .array~of(dbus.box('s', .nil)  ,dbus.box('b', .nil) , dbus.box('o', .nil), -
   dbus.box('n', .nil),  dbus.box('d', .nil), dbus.box('i',.nil ) , dbus.box('x',.nil ) , -
   dbus.box('q',.nil) , dbus.box('u',.nil ) , dbus.box('t',.nil) ,dbus.box('y',.nil ))

  expectednulvar=.array~of("",0,"/",0,0,0,0,0,0,0,"") -- expected translation of object types
 
  self~assertEquals(expectednulvar,dbustest~ReplyArrayofVariant(nulvar))
  
 -- define a variant with int16 value that passes its limits
  valexceed =.array~of(dbus.box('b', .true), dbus.box('n', 40000) )
  self~expectSyntax(93.900)          -- supplied Integer value too large
  errror = dbustest~ReplyArrayofVariant(valexceed)
 
 -- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
 -- xxxxxxxxxxxxxxxxxxxxxxxxxxxx Struct xxxxxxxxxxxxxxxxxxxxxxxxxxx
  
 ::method test_dbusobjects_struct
   numeric digits 20
   germanstring = "gemäß Übereinkommen, Behörde" 
   frenchstring = "à l’école, être évidente, la façon"
   busname = "oorexx.dbus.ooTestService"
   privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
   privateserver = privateconn~getObject(busname,"/oorexx/dbus/ooTestService") 
   privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
   privateserver2 = privateconn2~getObject(busname,"/oorexx/dbus/ooTestService") 
   dbustests=.array~of(.dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4"), -
                      privateserver, privateserver2)
  do dbustest over dbustests
    struct= .array~of("test",1)
    self~assertEquals(struct, dbustest~ReplyStruct(struct), "test array") 
    struct= .array~of(germanstring, 1234567)
    self~assertEquals(struct, dbustest~ReplyStruct(struct), "test array") 
    struct= .array~of(frenchstring, -1234567)
    self~assertEquals(struct, dbustest~ReplyStruct(struct), "test array") 
    struct= .array~of( "lowest value -2147483648", -2147483648)
    self~assertEquals(struct, dbustest~ReplyStruct(struct), "test array") 
    struct= .array~of("highest value 2147483647", 2147483647)
    self~assertEquals(struct, dbustest~ReplyStruct(struct), "test array")  
    end
  
    struct = .array~of(.nil,.nil)
    self~assertNotEquals(struct, dbustest~ReplyStruct(struct), "struct with two .nils")  

    struct2 = dbustest~ReplyStruct(struct)
      -- -nil for int --> 0 .nil for String -> ""
    self~assertEquals("", struct2[1])
    self~assertEquals(0, struct2[2])
   
    nilstruct = dbustest~ReplyStruct(.nil)
    -- values within the struct are converted to their safe default
    self~assertEquals("", nilstruct[1])
    self~assertEquals(0, nilstruct[2])
  
    emptystruct=.array~of()
    emptystructret = dbustest~ReplyStruct(emptystruct)
    -- values within the struct are converted to their safe default
    self~assertEquals("", emptystructret[1])
    self~assertEquals(0, emptystructret[2])  
    
::method test_dbusobjects_struct_error  
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  self~expectSyntax(93.900)          --wrong order
  struct= .array~of(1,"wrong argument order")
  self~assertEquals(struct, dbustest~ReplyStruct(struct), "wrong args order")  
     
::method test_dbusobjects_struct_error_2  
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2") 
  self~expectSyntax(93.900)          --wrong order
  struct= .array~of(1,"wrong argument order")
  self~assertEquals(struct, dbustest~ReplyStruct(struct), "wrong args order")   
      
::method test_dbusobjects_struct_error_3 
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3") 
  self~expectSyntax(93.900)          --wrong order
  struct= .array~of(1,"wrong argument order")
  self~assertEquals(struct, dbustest~ReplyStruct(struct), "wrong args order")  
      
::method test_dbusobjects_struct_error_4  
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4") 
  self~expectSyntax(93.900)          --wrong order
  struct= .array~of(1,"wrong argument order")
  self~assertEquals(struct, dbustest~ReplyStruct(struct), "wrong args order")  
  
::method test_dbusobjects_struct_error_5  
   privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
   privateserver = privateconn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
   self~expectSyntax(93.900)          --wrong order
   struct= .array~of(1,"wrong argument order")
   self~assertEquals(struct, privateserver~ReplyStruct(struct), "wrong args order")   
  
::method test_dbusobjects_struct_error_6  
   privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
   privateserver2 = privateconn2~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
   self~expectSyntax(93.900)          --wrong order
   struct= .array~of(1,"wrong argument order")
   self~assertEquals(struct, privateserver2~ReplyStruct(struct), "wrong args order")   
  
 ::method test_dbusobjects_struct_error2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  struct= .array~of(-2147483649, "lowest value passed")
  self~expectSyntax(93.900)        
  self~assertEquals(struct, dbustest~ReplyStruct(struct), "test array")   
  
  
 -- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
 -- xxxxxxxxxxxxxxxxxxxxxxxxxxxx  Dict  xxxxxxxxxxxxxxxxxxxxxxxxxxx  
 
::method test_dbusobjects_dict
  numeric digits 20
  germanstring = "gemäß Übereinkommen, Behörde" 
  frenchstring = "à l’école, être évidente, la façon"
  busname = "oorexx.dbus.ooTestService"
  privateconn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  privateserver = privateconn~getObject(busname,"/oorexx/dbus/ooTestService") 
  privateconn2=.dbus~new("unix:path=/tmp/dbus-test;")
  privateserver2 = privateconn2~getObject(busname,"/oorexx/dbus/ooTestService") 
  dbustests=.array~of(.dbus~session~getObject(busname,"/oorexx/dbus/ooTestService") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService2") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService3") , -
                     .dbus~session~getObject(busname,"/oorexx/dbus/ooTestService4"), -
                      privateserver, privateserver2)
  do dbustest over dbustests
    dict = .directory~new
    dict~put(0,"")   --  dict of string integer
     self~assertEquals(dict, dbustest~ReplyDict(dict), "test array") 
    dict = .directory~new~~put(0,"")
     self~assertEquals(dict, dbustest~ReplyDict(dict), "test array") 
    dict = .directory~new~~put(0,"test")
     self~assertEquals(dict, dbustest~ReplyDict(dict), "test array")  
    dict = .directory~new~~put(0,germanstring)
     self~assertEquals(dict, dbustest~ReplyDict(dict), "test array")   
    dict = .directory~new~~put(0,germanstring)~~put(0,frenchstring) -- two elements
     self~assertEquals(dict, dbustest~ReplyDict(dict), "test array")    
    dict = .directory~new~~put(-2147483648, "lowest value -2147483648")
      self~assertEquals(dict, dbustest~ReplyDict(dict), "test array")  
    dict = .directory~new~~put(2147483647, "highest value 2147483647")
      self~assertEquals(dict, dbustest~ReplyDict(dict), "test array")  
    longerdict = .directory~new~~put(-2147483648, "lowest value -2147483648") -
                  ~~put(1234483647, "any string is valid") -
                  ~~put(1156787, "integer values as well") -
                  ~~put(2147483647, "highest value 2147483647") 
      self~assertEquals(longerdict, dbustest~ReplyDict(longerdict), "test array")             
    doublerefdict =   .directory~new~~put(123, "Key 1")~~put(123, "Key 1")  
    self~assertEquals(doublerefdict, dbustest~ReplyDict(doublerefdict), "test array")    
   
    -- dicts are not equal as expeced 
    dict = .directory~new~~put(.nil,".nil is converted to 0")
    self~assertNotEquals(dict, dbustest~ReplyDict(dict), "test array")  
    -- but the .nil value is not converted to 0
    dict2 = dbustest~ReplyDict(dict)
    self~assertEquals(.nil, dict2~".nil is converted to 0")
   end

  -- .nil value in dict is converted 
  dict=dbustest~ReplyDict(.nil)
  self~assertEquals(.directory~new,dict)

  
::method test_dbusobjects_dict_error1
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  self~expectSyntax(93.900)          --wrong order
  dict = .directory~new~~put('string on false position', 123456)
  self~assertEquals(dict, dbustest~ReplyDict(dict), "test array")  
  
 ::method test_dbusobjects_dict_error2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2") 
  self~expectSyntax(93.900)          --wrong order
  dict = .directory~new~~put('string on false position', 123456)
  self~assertEquals(dict, dbustest~ReplyDict(dict), "test array")  
 
 ::method test_dbusobjects_dict_error3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3") 
  self~expectSyntax(93.900)          --wrong order
  dict = .directory~new~~put('string on false position', 123456)
  self~assertEquals(dict, dbustest~ReplyDict(dict), "test array")  
  
::method test_dbusobjects_dict_error4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4") 
  dict = .directory~new~~put('string on false position', 123456)
  self~expectSyntax(93.900)          --wrong order
  self~assertEquals(dict, dbustest~ReplyDict(dict), "test array") 
    
::method test_dbusobjects_dict_error5
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  dict = .directory~new~~put('string on false position', 123456)
  self~expectSyntax(93.900)          --wrong order
  self~assertEquals(dict, dbustest~ReplyDict(dict), "test array")  
  
::method test_dbusobjects_dict_error6
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  dict = .directory~new~~put('string on false position', 123456)
  self~expectSyntax(93.900)          --wrong order
  self~assertEquals(dict, dbustest~ReplyDict(dict), "test array")  
 
::method test_dbusobjects_dict_error1_1
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  dict = .directory~new~~put(2147483648, "highest value passed")
  self~expectSyntax(93.900)        
  self~assertEquals(dict, dbustest~ReplyDict(dict), "test array")  
  
::method test_dbusobjects_dict_error2_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2") 
  dict = .directory~new~~put(2147483648, "highest value passed")
  self~expectSyntax(93.900)        
  self~assertEquals(dict, dbustest~ReplyDict(dict), "test array")  
 
::method test_dbusobjects_dict_error3_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3") 
  dict = .directory~new~~put(2147483648, "highest value passed")
  self~expectSyntax(93.900)       
  self~assertEquals(dict, dbustest~ReplyDict(dict), "test array")  
  
 ::method test_dbusobjects_dict_error4_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4") 
  dict = .directory~new~~put(2147483648, "highest value passed")
  self~expectSyntax(93.900)         
  self~assertEquals(dict, dbustest~ReplyDict(dict), "test array") 
    
::method test_dbusobjects_dict_error5_5
  conn=.dbus~new("unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  dict = .directory~new~~put(2147483648, "highest value passed")
  self~expectSyntax(93.900)       
  self~assertEquals(dict, dbustest~ReplyDict(dict), "test array")  
  
::method test_dbusobjects_dict_error6_6
  conn=.dbus~new("tcp:host=localhost,port=23000,family=ipv4;unix:path=/tmp/dbus-test;")
  dbustest = conn~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService") 
  dict = .directory~new~~put(2147483648, "highest value passed")
  self~expectSyntax(93.900)          
  self~assertEquals(dict, dbustest~ReplyDict(dict), "test array")  
   
::method test_replyslotDir
   
   objectpath = '/oorexx/dbus/ooTestService'
   interface = 'oorexx.dbus.ooTestService'
   busName = 'oorexx.dbus.ooTestService'
   conn = .dbus~session
   busid = conn~busName('unique')
     
       
    objectpaths = .array~of('/oorexx/dbus/ooTestService', '/oorexx/dbus/ooTestService2',  -
                          '/oorexx/dbus/ooTestService3' )
 
  do objectpath over objectpaths
   dbustest = conn~getObject(busName,objectpath)  
   conn~makeReplySlotDir=.true              -- to be sure the slotdir is activated
   rv = dbustest~TestReplySlotDir('test')
  
  rslotDir = rv[2]
  cslotDir = rv[1]
  
  self~assertSame('method_call', cslotDir['MESSAGETYPENAME'], 'assert the MESSAGETYPENAME')
  self~assertSame('method_return', rslotDir['MESSAGETYPENAME'], 'assert the MESSAGETYPENAME')
  self~assertSame('s' , cslotDir['SIGNATURE'], 'assert the SIGNATURE' )
  self~assertSame('a{sv}' , rslotDir['SIGNATURE'], 'assert the SIGNATURE'objectpath )
  self~assertSame(objectpath, cslotDir['OBJECTPATH'],'assert the OBJECTPATH')
  self~assertSame(interface, cslotDir['INTERFACE'],'assert the INTERFACE')  
  self~assertSame(busid ,cslotDir['SENDER'], 'assert the SENDER')
  self~assertSame(cslotDir['SENDER'], rslotDir['DESTINATION'], 'assert the SENDER')
  self~assertSame('TestReplySlotDir',cslotDir['MEMBER']  , 'assert the MEMBER')
  self~assertSame(busName, cslotDir['DESTINATION'], 'assert the DESTINATION')

  -- test if the deactivate switch works
  conn~makeReplySlotDir=.false
    rv = dbustest~TestReplySlotDir('test')
    rslotDir = rv[2]
    self~assertSame(.nil, rslotDir, 'ReplySlotDir deactivated')
    end
   
  
 -- '/oorexx/dbus/ooTestService4'
 -- (no subclass of DBusServiceObject) returns [[a{ss}] as return signature instead of [a{sv}]
 
 -- set to default value
 conn~makeReplySlotDir=.true
 
-- testing the appearance of error messages for all four services 
::method test_errormessages
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError 

::method test_errormessages2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError   
  
::method test_errormessages3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError   
  
::method test_errormessages4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError  
  
::method test_errormessages_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError2 
  
::method test_errormessages_2_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError2  
  
::method test_errormessages_2_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError2 
  
::method test_errormessages_2_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError2  
  
::method test_errormessages_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError3 

::method test_errormessages_3_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError3  
  
::method test_errormessages_3_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError3   
  
::method test_errormessages_3_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError3  
  
::method test_errormessages_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError4 
  
::method test_errormessages_4_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError4   
  
::method test_errormessages_4_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError4   
  
::method test_errormessages_4_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError4   
  
::method test_errormessages_5
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError5 
 
::method test_errormessages_5_2
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService2")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError5 
 
::method test_errormessages_5_3
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService3")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError5  
 
::method test_errormessages_5_4
  dbustest = .dbus~session~getObject("oorexx.dbus.ooTestService","/oorexx/dbus/ooTestService4")  -- get the dbus object  
  self~expectSyntax(93.900)
  say dbustest~TestError5 
  
   
 
-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
-- xxxxxxxxx returning object types via unknown method xxxxxxxxxxx
 
-- adapted from b_RawPongClient.rex from Rony Flatscher
-- sends all invocations to the unknown method of testserver5   
::method test_testSimpleTypes_unknown

busName='oorexx.dbus.ooTestService'
objectPath='/oorexx/dbus/ooTestService5'
interface='oorexx.dbus.ooTestService'

 -- typeName["h"]="UNIX_FD" removed
   order=.array~of("s","g","o","y","b","n","q","i","u","x","t","d")
   typeName=.directory~new
   typeName["s"]="STRING"
   typeName["g"]="SIGNATURE"
   typeName["o"]="OBJECTPATH"
   typeName["y"]="BYTE"
   typeName["b"]="BOOLEAN"
   typeName["n"]="INT16"
   typeName["q"]="UINT16"
   typeName["i"]="INT32"
  -- typeName["h"]="UNIX_FD"
   typeName["u"]="UINT32"
   typeName["x"]="INT64"
   typeName["t"]="UINT64"
   typeName["d"]="DOUBLE"

   numeric digits 20
   values=.directory~new
      -- UTF-8: must not contain 8-Bit-characters, but allows it anyway
   values["s"]=.array~of("", "hi", "aha", , .nil, "anton", "über", "ÖÄÜß")
   values["g"]=.array~of("", "s",  "g",   "o", "oas", ,  .nil, "ay")
   values["o"]=.array~of("/", "/Aha", "/org/Aha", , .nil, "/org/aha/soso/Aha")
     -- byte should allow special character, but does not ("Ü")
   values["y"]=.array~of(" ", "a", "A", , .nil)   
   values["b"]=.array~of(.true, .false, , .nil, 0, 1)    -- boolean
   values["n"]=.array~of(0, -1, , .nil, 1, -32768, 32767) -- int16
   values["q"]=.array~of(0,     , .nil, 1, 65535)        -- uint16
   values["i"]=.array~of(0, -1, , .nil, 1, -2147483648, 2147483647)  -- int32
   --values["h"]=.array~of(0,     , .nil, 1)       -- not testing UNIX_FD: dbus does alter value
   values["u"]=.array~of(0, , .nil, 1, 4294967295)   -- uint32: tests o.k.
   values["x"]=.array~of(0, , .nil, 1, -9223372036854775808, 9223372036854775807)  -- int64
   values["t"]=.array~of(0, , .nil, 1, 18446744073709551615)  -- uint64
   values["d"]=.array~of(0, -1, , .nil, 1)               -- double

   do k=1 to order~size 
      type=order[k]
      arr=values[type]  -- get values to send
      size=arr~size -- items
      len=size~length
      do i=1 to arr~size
         val=arr[i]
            res=.dbus~session~message("call", busName, objectPath, interface, allinvocations, type, type, val)
            -- .nil needs special treatment, if transported that way, val is translated to [] and compared with .nil
            select
              when type='g' then null=""
              when type='y' then null="00"x
              when type='s' then null=""
              when type='o' then null="/"
            otherwise
              null=0
            end 
            if (val=.nil) then do 
            self~assertEquals(null, res, "test automatic marshaling and and unmarshaling with a .nil value") 
            end
            else  self~assertEquals(res, val, "test automatic marshaling and and unmarshaling of "val) 
        end
   end

::method test_testSimpleArrayTypes_unknown
  busName='oorexx.dbus.ooTestService'
  objectPath='/oorexx/dbus/ooTestService5'
  interface='oorexx.dbus.ooTestService'
  order=.array~of("s","g","o","y","b","n","q","i","u","x","t","d")

   typeName=.directory~new
   typeName["s"]="STRING"
   typeName["g"]="SIGNATURE"
   typeName["o"]="OBJECTPATH"
   typeName["y"]="BYTE"
   typeName["b"]="BOOLEAN"
   typeName["n"]="INT16"
   typeName["q"]="UINT16"
   typeName["i"]="INT32"
  -- typeName["h"]="UNIX_FD"
   typeName["u"]="UINT32"
   typeName["x"]="INT64"
   typeName["t"]="UINT64"
   typeName["d"]="DOUBLE"
    
  numeric digits 20
   values=.directory~new
   -- UTF-8: must not contain 8-Bit-characters or
   values["s"]=.array~of("hi", "aha", "", .nil, "anton", "ueber", "berta",)
   values["g"]=.array~of("", "s",  "g",  "o", "oas", .nil, "ay",)
   values["o"]=.array~of("/", "/Aha", "/org/Aha", .nil, "/org/aha/soso/Aha",)
   -- byte must not contain non UTF-8
   values["y"]=.array~of(" ", "a", "A", .nil, "U",)     -- byte
   values["b"]=.array~of(.true, .false, .nil, 0, 1,)    -- boolean
   values["n"]=.array~of(0, -1, .nil, 1, -32768, 32767,) -- int16
   values["q"]=.array~of(0, .nil, 1, 65535,)        -- uint16
   values["i"]=.array~of(0, -1, .nil, 1, -2147483648, 2147483647,)  -- int32
   values["u"]=.array~of(0, .nil, 1, 4294967295,)   -- uint32
   values["x"]=.array~of(0, .nil, 1, -9223372036854775808, 9223372036854775807,)  -- int64
   values["t"]=.array~of(0, .nil, 1, 18446744073709551615,)  -- uint64
   values["d"]=.array~of(0, -1, .nil, 1,)               -- double

   -- if not set to true, the byte array is treated as String
    .dbus~session~unmarshalByteArrayAsString=.false 
   .dbus~session~makeReplySlotDir=.true      -- return an array with two elements: arr[1]=result, arr[2]=slotDir

   do k=1 to order~size 
      type=order[k]
      arr=values[type]  -- get values to send
      signature="a"type
      resRaw=.dbus~session~message("call", busName, objectPath, interface, allinvocations, signature, signature, arr)
      res=resRaw[1]     -- result value
     
     -- null values are translated differently, therefore an assertion within the loop fails
     -- e.g. a null value for an integer = 0
     -- these are expected values for the given type
     select
      when type='g' then null=""
      when type='y' then null="00"x
      when type='s' then null=""
      when type='o' then null="/"
     otherwise
      null=0
     end 
      
     do i= 1 to arr~size
       if (arr[i] =.nil) then self~assertEquals(null, res[i] , "test automatic marshaling and and unmarshaling of type" type)
            else self~assertEquals(arr[i], res[i] , "test automatic marshaling and and unmarshaling of "arr[i]) 
      end
       slotDir=resRaw[2]
   end

   -- slot dir has to be deactivated else upcoming tests might fail
    .dbus~session~makeReplySlotDir=.false
     
::method test_test3dimensionalArrayTypes
  
  busName='oorexx.dbus.ooTestService'
  objectPath='/oorexx/dbus/ooTestService5'
  interface='oorexx.dbus.ooTestService'
  order=.array~of("s","g","o","y","b","n","q","i","u","x","t","d")

   typeName=.directory~new
   typeName["s"]="STRING"
   typeName["g"]="SIGNATURE"
   typeName["o"]="OBJECTPATH"
   typeName["y"]="BYTE"
   typeName["b"]="BOOLEAN"
   typeName["n"]="INT16"
   typeName["q"]="UINT16"
   typeName["i"]="INT32"
  -- typeName["h"]="UNIX_FD"
   typeName["u"]="UINT32"
   typeName["x"]="INT64"
   typeName["t"]="UINT64"
   typeName["d"]="DOUBLE"
  
  numeric digits 20
   values=.directory~new
   -- UTF-8: must not contain 8-Bit-characters or
   arr1=.array~new
   arr1[1,1,1]="/OneOneOne"            -- attention: needs to be also a syntactical correct object path!
   arr1[2,2,2]="/TwoTwoTwoe"           -- attention: needs to be also a syntactical correct object path!
   arr1[3,2,3]="/ThreeTwoThree"        -- attention: needs to be also a syntactical correct object path!
   arr1[3,3,3]="/ThreeThreeThree"      -- attention: needs to be also a syntactical correct object path!
   values["s"]=arr1  -- string
   arr2=.array~new
   arr2[1,1,1]="s"
   arr2[2,2,2]="s"
   arr2[3,2,3]="s"
   arr2[3,3,3]="s"
   values["g"]=arr2  -- signature

   values["o"]=arr1  -- objectpath
   -- bytes must not be unmarshalled as string for the assertions
   .dbus~session~unmarshalByteArrayAsString=.false 
   arr3=.array~new   -- byte
   arr3[1,1,1]=1
   arr3[2,2,2]=1
   arr3[3,2,3]=1
   arr3[3,3,3]=1
   values["y"]=arr3
   values["b"]=arr3  -- boolean
   values["n"]=arr3  -- int16
   values["q"]=arr3  -- uint16
   values["i"]=arr3  -- int32
   --values["h"]=arr3  -- uint32: UNIX_FD: dbus does alter value
   values["u"]=arr3  -- uint32
   values["x"]=arr3  -- int64
   values["t"]=arr3  -- uint64
   values["d"]=arr3  -- double

   .dbus~session~makeReplySlotDir=.true      -- return an array with two elements: arr[1]=result, arr[2]=slotDir
  
   do k=1 to order~size
      type=order[k]
      arr=values[type]  -- get values to send
      signature="aaa"type
    
      resRaw=.dbus~session~message("call", busName, objectPath, interface, allinvocations, signature, signature, arr)
      res=resRaw[1]     -- result value
      slotDir=resRaw[2]
    
      if res~isA(.array) then do
       select
        when type='g' then null=""
        when type='y' then null="00"x
        when type='s' then null=""
        when type='o' then null="/"
       otherwise
        null=0
      end 
      
       do i=1 to arr~dimension(1)
         do p=1 to arr~dimension(2)
           do m=1 to arr~dimension(3)
             org = arr[i,p,m]
             resu = res[i,p,m] 
             if (org=.nil) then self~assertEquals(null, resu , "test automatic marshaling and and unmarshaling of type" type)
             else  self~assertEquals(org, resu , "test automatic marshaling and and unmarshaling of " type) 
             end
           end
         end
       end
   end

::method test_testMapType_unknown
   
  busName='oorexx.dbus.ooTestService'
  objectPath='/oorexx/dbus/ooTestService5'
  interface='oorexx.dbus.ooTestService'
  order=.array~of("s","g","o","y","b","q","i","u","x","t","d","n")

   typeName=.directory~new
   typeName["s"]="STRING"
   typeName["g"]="SIGNATURE"
   typeName["o"]="OBJECTPATH"
   typeName["y"]="BYTE"
   typeName["b"]="BOOLEAN"
   typeName["q"]="UINT16"
   typeName["i"]="INT32"
  -- typeName["h"]="UNIX_FD"
   typeName["u"]="UINT32"
   typeName["x"]="INT64"
   typeName["t"]="UINT64"
   typeName["d"]="DOUBLE"
  typeName["n"]="INT16"
  
  numeric digits 20
   values=.directory~new
   -- this time test without null values and unallowed characters expept(äüöß)
    values["s"]=.array~of("", "hi", "aha", "anton", "äüöß", "berta")
   values["g"]=.array~of("s",  "g",   "o", "oas", "ay")
   values["o"]=.array~of("/", "/Aha", "/org/Aha", "/org/aha/soso/Aha")
   values["y"]=.array~of(" ", "a", "A", "U")     -- byte
   values["b"]=.array~of(.true, .false, 0, 1)    -- boolean
   values["n"]=.array~of(0, -1, 1, -32768, 32767) -- int16
   values["q"]=.array~of(0,  1, 65535)        -- uint16
   values["i"]=.array~of(0, -1,  1, -2147483648, 2147483647)  -- int32
  -- values["h"]=.array~of(0,  1)               -- uint32: UNIX_FD: dbus does alter value
   values["u"]=.array~of(0,  1, 4294967295)   -- uint32: tests o.k.
   values["x"]=.array~of(0,  1, -9223372036854775808, 9223372036854775807)  -- int64
   values["t"]=.array~of(0,  1, 18446744073709551615)  -- uint64
   values["d"]=.array~of(0, -1, 1.0)               -- double

   indices=.array~of("i1", "i2", "i3", "i4", "i5", "i6", "i7", "i8")

   .dbus~session~makeReplySlotDir=.true      -- return an array with two elements: arr[1]=result, arr[2]=slotDir
   .dbus~session~unmarshalByteArrayAsString=.false
  
  do k=1 to order~size 

      type="a{s"order[k]"}"      -- map type
      typeByOrder=order[k]
      arr=values[typeByOrder]  -- get values to send
      val=.directory~new

      size=arr~size -- items
      len=size~length
      do i=1 to arr~size
         val[indices[i]]=arr[i]     -- assign entries
      end
      tmpMethName=methodName"_dict_s"typeByOrder
      res=.dbus~session~message("call", busName, objectPath, interface, allinvocations, type, type, val)

      self~assertEquals(val,  res[1], "asserting" res[1] "dict_s"typeByOrder)
   end

::method test_testStructTypes1_unknown          -- i.e. .directory

  busName='oorexx.dbus.ooTestService'
   objectPath='/oorexx/dbus/ooTestService5'
   interface='oorexx.dbus.ooTestService'
 
  signatures1=.array~of( "(s)",          - -- #1 - 1 argument (an array)
                          "(ss)")          -- #2 - 1 argument (an array)

  signatures3=.array~of( "s(s)s",        - -- #3 - 3 arguments (string, array, string)
                          "s(ss)s",       - -- #4 - 3 arguments (string, array, string)
                          "s(s(s)s)s",    - -- #5 - 3 arguments (string, array, string)
                          "s(ss(ss)ss)s")   -- #6 - 3 arguments (string, array, string)

   values1=.array~of( .array~of("hi"),    -     -- #1
                      .array~of("abc","def"))   -- #2

   -- make sure only three elements in first array !
   values3=.array~of( .array~of("abc", .array~of("mno"), "def"),                    - -- #3
                      .array~of("abc", .array~of("mno", "pqr"), "def"),                   - -- #4
                      .array~of("abc", .array~of("mno", .array~of("uvw"), "pqr"), "def"), - -- #5
                      .array~of("abc", .array~of("mno", "123", .array~of("uvw", "xyz"), "pqr", "456"), "def") - -- #6
                     )

   .dbus~session~makeReplySlotDir=.true      -- return an array with two elements: arr[1]=result, arr[2]=slotDir

   do k=1 to signatures1~size 

      type=signatures1[k]
      val =values1[k]

      res=.dbus~session~message("call", busName, objectPath, interface, allinvocations, type, type, val)
      self~assertEquals(val, res[1], "asserting with unknown method value" val)
   end

   do k=1 to signatures3~size
      type=signatures3[k]
      val =values3[k]
      res=.dbus~session~message("call", busName, objectPath, interface, allinvocations, type, type, val[1], val[2], val[3])

   do p=1 to val~size
          if (val[p]~isA(.array)) then do
            do l=1 to val[p]~size
             self~assertEquals(val[p][l], res[1][p][l], "asserting with unknown method value" val[p] type)
            end
           end
          else self~assertEquals(val[p], res[1][p], "asserting with unknown method value" val[p] type)
   end
  end
  
::method test_testByteArrays_unknown -- i.e. .directory

  busName='oorexx.dbus.ooTestService'
  objectPath='/oorexx/dbus/ooTestService5'
  interface='oorexx.dbus.ooTestService'
 
   .dbus~session~makeReplySlotDir=.false     -- just return the result value

   -- first "ay" 
   arr1=.array~of("H", "e", "l", "l", "o", " ", "W", "o", "r", "l", "d", "!", "tsk")
   val1="Hello, World!"

   type="ay"

   -- supplying an array of bytes
   .dbus~session~unmarshalByteArrayAsString=.true     -- return as string
   res=.dbus~session~message("call", busName, objectPath, interface, allinvocations, type, type, arr1)
   self~assertEquals(arr1~makeString('C'), res)
  
  -- array contains a triplet "tsk" which is splitted into single letters in the result array, therefore not equal
   .dbus~session~unmarshalByteArrayAsString=.false    -- return as an array of bytes!
   res=.dbus~session~message("call", busName, objectPath, interface, allinvocations, type, type, arr1)
   self~assertNotEquals(arr1, res, "dbus translate triplet into three single bytes, therefore different arrays")

  -- supplying a string to be transported as byte array
   .dbus~session~unmarshalByteArrayAsString=.true     -- return as string
   res=.dbus~session~message("call", busName, objectPath, interface, allinvocations, type, type, val1)
   self~assertEquals(val1, res)
 
   .dbus~session~unmarshalByteArrayAsString=.false    -- return as an array of bytes!
   res=.dbus~session~message("call", busName, objectPath, interface, allinvocations, type, type, val1)
   self~assertNotEquals(val1, res, "string is converted to array and asserted with string")
  
-- listens for ready from the testserver   
::Class RexxListener
::method Ready             -- changes the value .server.ready
  use arg text, boolean
  say 'server sended Ready signal'
  .local~server.ready = boolean    -- set ready to .true

::method exit
 say 'exit'

::method unknown              -- need to be available, else every signal has to be implemented
 -- use arg methName, methArgs
 -- slotDir=methArgs[methArgs~last]    
 -- say "===> unknown signal: name=" methName "received at:" slotDir~dateTime
 
::method boringSignal
 use arg b 
 say "Signal:" b "received"
 