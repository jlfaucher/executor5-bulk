<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE appendix PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "rxftp.ent">
%BOOK_ENTITIES;
]>
<!--#########################################################################
    #
    # Description: Open Object Rexx: FTP Class Library XML File
    #
    # Copyright (c) 2005-2022, Rexx Language Association. All rights reserved.
    # Portions Copyright (c) 2004, IBM Corporation. All rights reserved.
    #
    # This program and the accompanying materials are made available under
    # the terms of the Common Public License v1.0 which accompanies this
    # distribution. A copy is also available at the following address:
    # http://www.oorexx.org/license.html
    #
    # Redistribution and use in source and binary forms, with or
    # without modification, are permitted provided that the following
    # conditions are met:
    #
    # Redistributions of source code must retain the above copyright
    # notice, this list of conditions and the following disclaimer.
    # Redistributions in binary form must reproduce the above copyright
    # notice, this list of conditions and the following disclaimer in
    # the documentation and/or other materials provided with the distribution.
    #
    # Neither the name of Rexx Language Association nor the names
    # of its contributors may be used to endorse or promote products
    # derived from this software without specific prior written permission.
    #
    # THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
    # "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
    # LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
    # FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
    # OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
    # SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
    # TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
    # OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
    # OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
    # NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
    # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
    #
    #########################################################################
-->
<appendix><title>Sample RxFtp Program</title>
<indexterm><primary>RxFtp example program</primary></indexterm>
<indexterm><primary>example</primary>
<secondary>RxFtp program</secondary></indexterm>
<indexterm><primary>using RxFtp</primary></indexterm>
<para>The following is a sample program using REXX FTP Class Library
methods.</para>
<example id="ex.RxFtp-samplepgm">
<title>RxFtp class - sample program</title>
<programlisting>
<![CDATA[
/*==============================================================*/
/* Basic RxFTP sample to send a file with cmd/reply logging     */
/*==============================================================*/
/* Define the variables for: */
server = "127.0.0.1" /* IP address or server name */
userid = "remote_user_ID"
passwd = "password_of_remote_user"
trclog = "logfile.txt" /* Trace log file name */
retc = 0 /* Set return code to 0 */

myftp = .rxftp~new()

/* Start tracing FTP commands and logging of replies */
retc = myftp~FtpTrace()

/* Trace log file will be replaced, not appended to. */
retc = myftp~FtpTraceLog(trclog, "R")
If retc = 0 then Say " Replies will be written to log file: "trclog"."
Else Say " No writing to log file: "trclog" possible."

/* Define remote host and user to be used during the session */
retc = myftp~FtpSetUser(server, userid, passwd)
If retc = 0 then Say " Connection established."
Else Call Terminate " *** Connection failed."

/* Transfer an ASCII file to the remote ftp server */
retc = myftp~FtpPut("sample.rex", "sample.put", "ASCII")
If retc = 0 then Call Terminate " File has been sent. "
Else Call Terminate " *** File has NOT been sent."

/* Terminate the file transfer */
Terminate:
Parse Arg Message
Say Message
Say "FtpErrNo =" myftp~ftperrno

retc = myftp~FtpLogoff()

retc = myftp~FtpTraceLogoff()
retc = myftp~FtpTrace()

exit retc

::requires "rxftp.cls"
]]>
</programlisting>
</example>
</appendix>
