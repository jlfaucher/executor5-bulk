
<chapter><title>VMWare Guest Operating Systems</title>

<section id="w2k"><title>Windows 2000 Professional</title>

<para>The following are the virtual machine configuration settings for
Windows 2000 Professional.
</para>

<itemizedlist>
<listitem><para>Typical device settings
</para></listitem>
<listitem><para>Guest operating system - Microsoft Windows 2000 Professional
</para></listitem>
<listitem><para>Name - Windows 2000 Professional
</para></listitem>
<listitem><para>Network configuration - NAT networking
</para></listitem>
<listitem><para>Disk size - 8GiB, do not pre-allocate space, 2GiB files
</para></listitem>
<listitem><para>Memory - 512MiB
</para></listitem>
<listitem><para>Add the DVD drive (the CDROM is auto detected)
</para></listitem>
<listitem><para>Remove the floppy drive
</para></listitem>
</itemizedlist>

<para>The following are the settings used during the installation of
Windows 2000 Professional.
</para>

<itemizedlist>
<listitem><para>Format the disk using NTFS
</para></listitem>
<listitem><para>Computer name - ORXWIN2K
</para></listitem>
<listitem><para>Workgroup - OOREXX
</para></listitem>
</itemizedlist>

<para>The following are the post installation steps and settings for
Windows 2000 Professional.
</para>

<itemizedlist>
<listitem><para>Install VMware tools
</para></listitem>
<listitem><para>Invoke the VMware Tools and select the option
to sync the time between the host and the guest.
</para></listitem>
<listitem><para>Create the buildorx account and make it an administrator
</para></listitem>
<listitem><para>Map drive letter (F:) to host PUBLIC share
</para></listitem>
<listitem><para>Install Service Pack 4
</para></listitem>
<listitem><para>Install DaylightSaving fix
</para></listitem>
<listitem><para>Install Putty and pscp
</para></listitem>
<listitem><para>Install Subversion 1.4
</para></listitem>
<listitem><para>Install Visual Studio .NET (Visual C++ 7.0)
</para></listitem>
<listitem><para>Update the system PATH to point to the Xerces
shared location (F: drive)
</para></listitem>
<listitem><para>Update the system PATH to point to the Xalan
shared location (F: drive)
</para></listitem>
</itemizedlist>

</section>

<section><title>Windows XP Professional w/SP2</title>

<para>The following are the virtual machine configuration settings for
Windows XP Professional.
</para>

<itemizedlist>
<listitem><para>Typical device settings
</para></listitem>
<listitem><para>Guest operating system - Microsoft Windows XP Professional
</para></listitem>
<listitem><para>Name - Windows XP Professional
</para></listitem>
<listitem><para>Network configuration - NAT networking
</para></listitem>
<listitem><para>Disk size - 8GiB, do not pre-allocate space, 2GiB files
</para></listitem>
<listitem><para>Memory - 512MiB
</para></listitem>
<listitem><para>Add the DVD drive (the CDROM is auto detected)
</para></listitem>
<listitem><para>Remove the floppy drive
</para></listitem>
</itemizedlist>

<para>The following are the settings used during the installation of
Windows XP Professional.
</para>

<itemizedlist>
<listitem><para>An Upgrade version of Windows XP was used so Windows 2000 was
installed first. See the section <link linkend="w2k">Windows 2000 Profesional</link>
for details on that installation.
</para></listitem>
<listitem><para>Format the disk using NTFS
</para></listitem>
<listitem><para>Computer name - ORXWINXP
</para></listitem>
<listitem><para>Workgroup - OOREXX
</para></listitem>
</itemizedlist>

<para>The following are the post installation steps and settings for
Windows XP Professional.
</para>

<itemizedlist>
<listitem><para>Install VMware tools
</para></listitem>
<listitem><para>Invoke the VMware Tools and select the option
to sync the time between the host and the guest.
</para></listitem>
<listitem><para>Create the buildorx account and make it an administrator
</para></listitem>
<listitem><para>Map drive letter (F:) to host PUBLIC share
</para></listitem>
<listitem><para>Install DaylightSaving fix
</para></listitem>
<listitem><para>Install Putty and pscp
</para></listitem>
<listitem><para>Install Subversion 1.4
</para></listitem>
<listitem><para>Install Visual Studio .NET (Visual C++ 7.0)
</para></listitem>
<listitem><para>Update the system PATH to point to the Xerces
shared location (F: drive)
</para></listitem>
<listitem><para>Update the system PATH to point to the Xalan
shared location (F: drive)
</para></listitem>
</itemizedlist>

</section>

<section><title>Fedora 7</title>

<para>The following are the virtual machine configuration settings for
Fedora 7.
</para>

<itemizedlist>
<listitem><para>Typical device settings
</para></listitem>
<listitem><para>Guest operating system - Fedora 7
</para></listitem>
<listitem><para>Name - Fedora 7
</para></listitem>
<listitem><para>Version - Red Hat EL 4 (we need this in order to support the
Fedora Core 2.6 kernel)
</para></listitem>
<listitem><para>Network configuration - NAT networking
</para></listitem>
<listitem><para>Disk size - 8GiB, do not pre-allocate space, 2GiB files
</para></listitem>
<listitem><para>Memory - 512MiB
</para></listitem>
<listitem><para>Add the DVD drive (the CDROM is auto detected)
</para></listitem>
<listitem><para>Remove the floppy drive
</para></listitem>
</itemizedlist>

<para>The following are the settings used during the installation of
Fedora 7.
</para>

<itemizedlist>
<listitem><para>Create a standard disk layout
</para></listitem>
<listitem><para>Install all the development and Publishing tools
</para></listitem>
<listitem><para>Disable the firewall
</para></listitem>
<listitem><para>Disable SELinux
</para></listitem>
<listitem><para>Create the buildorx account
</para></listitem>
</itemizedlist>

<para>The following are the post installation steps and settings for
Fedora 7.
</para>

<itemizedlist>
<listitem><para>Download and install the Fedora security updates.
</para></listitem>
<listitem><para>Install the VMware Tools RPM. Note that installing the RPM will
also install the necessary daemons in the guest.
</para>
<para>Before running the vmware-config-tools.pl script you will need to perform
the following steps.</para>
<itemizedlist>
<listitem><para>Log on as root
</para></listitem>
<listitem><para>cd /usr/lib/vmware-tools/modules
</para></listitem>
<listitem><para>chmod +rw source
</para></listitem>
<listitem><para>cd source
</para></listitem>
<listitem><para>Extract the driver.c file from vmhgfs.tar.
</para></listitem>
<listitem><para>Make the following changes.
<programlisting>
/*
#define INODE_SET_II_P(node, info) do {(inode->u.generic_ip = (info);} while (0)
#define INODE_GET_II_P(node) ((HgfsInodeInfo *)(inode->u.generic_ip)
*/
#define INODE_SET_II_P(node, info) do {(inode->i_private = (info);} while (0)
#define INODE_GET_II_P(node) ((HgfsInodeInfo *)(inode->i_private)

//inode->i_blksize = HGFS_BLOCKSIZE;
</programlisting>
</para></listitem>
<listitem><para>Noew replace the driver.c file in the tar file with your
modified file.
</para></listitem>
<listitem><para>The vmware-config-tools.pl script will now run without errors.
</para></listitem>
</itemizedlist>
</listitem>
<listitem><para>Configure VMware Tools by running vmware-config-tools.pl. Take
all the defaults.
</para></listitem>
<listitem><para>Invoke the VMware Tools and select the option
to sync the time between the host and the guest.
</para></listitem>
<listitem><para>Modify the /usr/share/texmf/web2c/texmf.cnf file per the
requirements to create the ooRexx documentation.
</para></listitem>
<listitem><para>Next we need to generate the SSH public/private keys for the
server.</para>
<programlisting>
# ssh-keygen
</programlisting>
<para>Be sure to just hit return for the passphrase prompt (we do NOT want
a passphrase). Otherwise we cannot get true automation from our scripts.
</para>
<para>Copy the host's public key into our authorized keys file.</para>
<programlisting>
# scp buildorx@build.oorexx.org:/home/buildorx/.ssh/id_rsa.pub .ssh/authorized_keys
</programlisting>
<para>Now copy our public key to the host.</para>
<programlisting>
# scp .ssh/id_rsa.pub buildorx@build.oorexx.org:/home/buildorx/xxx
</programlisting>
<para>Now on the host (NOT the VMware guest!) copy that key to the authorized
keys file.</para>
<programlisting>
# cat xxx >> .ssh/authorized_keys
# rm xxx
</programlisting>
</listitem>
</itemizedlist>

</section>

<section><title>Ubuntu 6.10</title>

<para>The following are the virtual machine configuration settings for
Ubuntu 6.10.
</para>

<itemizedlist>
<listitem><para>Typical device settings
</para></listitem>
<listitem><para>Guest operating system - Fedora 7
</para></listitem>
<listitem><para>Name - Ubuntu 6.10
</para></listitem>
<listitem><para>Version - Ubuntu
</para></listitem>
<listitem><para>Network configuration - NAT networking
</para></listitem>
<listitem><para>Disk size - 8GiB, do not pre-allocate space, 2GiB files
</para></listitem>
<listitem><para>Memory - 512MiB
</para></listitem>
<listitem><para>Add the DVD drive (the CDROM is auto detected)
</para></listitem>
<listitem><para>Remove the floppy drive
</para></listitem>
</itemizedlist>

<para>The following are the settings used during the installation of
Ubuntu 6.10.
</para>

<itemizedlist>
<listitem><para>Create the buildorx account
</para></listitem>
<listitem><para>Create a standard disk layout
</para></listitem>
</itemizedlist>

<para>The following are the post installation steps and settings for
Ubuntu 6.10.
</para>

<itemizedlist>
<listitem><para>Download and install the Ubuntu security updates.
</para></listitem>

<listitem><para>Install the VMware Tools tar file. Note that installing the Tools will
also install the necessary daemons in the guest.
</para></listitem>
<listitem><para>Configure VMware Tools by running vmware-config-tools.pl. Take
all the defaults.
</para></listitem>
<listitem><para>Invoke the VMware Tools and select the option
to sync the time between the host and the guest.
</para></listitem>
<listitem><para>Next we need to generate the SSH public/private keys for the
server.</para>
<programlisting>
# ssh-keygen
</programlisting>
<para>Be sure to just hit return for the passphrase prompt (we do NOT want
a passphrase). Otherwise we cannot get true automation from our scripts.
</para>
<para>Copy the host's public key into our authorized keys file.</para>
<programlisting>
# scp buildorx@build.oorexx.org:/home/buildorx/.ssh/id_rsa.pub .ssh/authorized_keys
</programlisting>
<para>Now copy our public key to the host.</para>
<programlisting>
# scp .ssh/id_rsa.pub buildorx@build.oorexx.org:/home/buildorx/xxx
</programlisting>
<para>Now on the host (NOT the VMware guest!) copy that key to the authorized
keys file.</para>
<programlisting>
# cat xxx >> .ssh/authorized_keys
# rm xxx
</programlisting>
</listitem>
<listitem><para>Use apt-get to install some additional tools.</para>
<programlisting>
# sudo apt-get install g++ gcc subversion autoconf automake1.9 debhelper \
  fakeroot libtool
</programlisting>
</listitem>
</itemizedlist>

</section>

<section><title>Ubuntu 7.04</title>

<para>See the instruction for Ubuntu 6.10.
</para>

</section>

<section><title>Solaris 9</title>

<para>This guest VM was built by Mark Hessling. It was modified for the Build
Machine by adding the buildoex account and modifying the root account password.
SSH keys were also created and exchanged with the Build Machine host.
</para>

</section>

</chapter>

