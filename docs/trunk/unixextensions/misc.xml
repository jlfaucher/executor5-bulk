<chapter id="misc"><title id="misc.title">Miscellaneous Functions</title>

<para>This chapter covers the available miscellaneous functions.</para>


<section id="utlSysCrypt"><title>SysCrypt</title>
<indexterm><primary>SysCrypt</primary></indexterm>
<programlisting>
<![CDATA[
>>-SysCrypt(str, salt)-----------------------------------------><
]]>
</programlisting>
<para>Returns an encrypted version of <emphasis>str</emphasis>.</para>
<para>This function uses the <filename>crypt()</filename>
C API to perform the action.</para>
<para><emphasis role="bold">Parameter:</emphasis></para>
<variablelist>
<varlistentry><term><emphasis role="italic">str</emphasis></term>
<listitem><para>The string to be encrypted.
</para></listitem></varlistentry>
<varlistentry><term><emphasis role="italic">salt</emphasis></term>
<listitem><para>The two character encryption salt.
</para></listitem></varlistentry>
</variablelist>
<para><emphasis role="bold">Returns</emphasis></para>
<para>Returns the encrypted string or a zero-length string on an error.</para>
<para><emphasis role="bold">Example:</emphasis></para>
<programlisting>
<![CDATA[
/* encrypt a string */

encstr = SysCrypt("String to encrypt.", "3A")
]]>
</programlisting>
</section>


<section id="utlSysGetsid"><title>SysGetsid</title>
<indexterm><primary>SysGetsid</primary></indexterm>
<programlisting>
<![CDATA[
>>-SysGetsid()-------------------------------------------------><
]]>
</programlisting>
<para>Gets the current session id.</para>
<para>This function uses the <filename>getsid()</filename>
C API to perform the action.</para>
<para><emphasis role="bold">Parameter:</emphasis></para>
<para>None</para>
<para><emphasis role="bold">Returns</emphasis></para>
<para>Returns the current sid or -1 on an error.</para>
<para><emphasis role="bold">Example:</emphasis></para>
<programlisting>
<![CDATA[
/* get the session id */

mysid = SysGetsid()
]]>
</programlisting>
</section>


<section id="utlSysGeterrno"><title>SysGeterrno</title>
<indexterm><primary>SysGeterrno</primary></indexterm>
<programlisting>
<![CDATA[
>>-SysGeterrno()-----------------------------------------------><
]]>
</programlisting>
<para>Returns the errno numeric value.</para>
<para><emphasis role="bold">Parameter:</emphasis></para>
<para>None</para>
<para><emphasis role="bold">Returns</emphasis></para>
<para>Returns the numeric errno value.</para>
<para><emphasis role="bold">Example:</emphasis></para>
<programlisting>
<![CDATA[
/* get the errno */

errno = SysGeterrno()
]]>
</programlisting>
</section>


<section id="utlSysGeterrnomsg"><title>SysGeterrnomsg</title>
<indexterm><primary>SysGeterrnomsg</primary></indexterm>
<programlisting>
<![CDATA[
>>-SysGeterrnomsg(errno)---------------------------------------><
]]>
</programlisting>
<para>Returns a short description of the errno value.</para>
<para><emphasis role="bold">Parameter:</emphasis></para>
<variablelist>
<varlistentry><term><emphasis role="italic">errno</emphasis></term>
<listitem><para>The numeric errno value.
</para></listitem></varlistentry>
</variablelist>
<para><emphasis role="bold">Returns</emphasis></para>
<para>Returns a short description of the errno value.
If the message is not available it returns the strimg "Unknown".</para>
<para><emphasis role="bold">Example:</emphasis></para>
<programlisting>
<![CDATA[
/* get the errno message */

say SysGeterrnomsg(26)
]]>
</programlisting>
</section>


<section id="utlSysGetsizeofptr"><title>SysGetsizeofptr</title>
<indexterm><primary>SysGetsizeofptr</primary></indexterm>
<programlisting>
<![CDATA[
>>-SysGetsizeofptr()-------------------------------------------><
]]>
</programlisting>
<para>Gets the size (in bits) of a pointer.</para>
<para>This function uses the <filename>sizeof(void *)</filename>
C macro to perform the action.</para>
<para><emphasis role="bold">Parameter:</emphasis></para>
<para>None</para>
<para><emphasis role="bold">Returns</emphasis></para>
<para>Returns 32 or 64 in most cases.</para>
<para><emphasis role="bold">Example:</emphasis></para>
<programlisting>
<![CDATA[
/* get the pointer size */

addrmode = SysGetsizeofptr()
]]>
</programlisting>
</section>


<section id="utlSysSetsid"><title>SysSetsid</title>
<indexterm><primary>SysSetsid</primary></indexterm>
<programlisting>
<![CDATA[
>>-SysSetsid()-------------------------------------------------><
]]>
</programlisting>
<para>Set the session id.</para>
<para>This function uses the <filename>setsid()</filename>
C API to perform the action.</para>
<para><emphasis role="bold">Parameter:</emphasis></para>
<para>None.</para>
<para><emphasis role="bold">Returns</emphasis></para>
<para>Returns the new sid or -1 on an error.</para>
<para><emphasis role="bold">Example:</emphasis></para>
<programlisting>
<![CDATA[
/* set the session id to zero */

call SysSetsid 0
]]>
</programlisting>
</section>


<section id="utlSysSignal"><title>SysSignal</title>
<indexterm><primary>SysSignal</primary></indexterm>
<programlisting>
<![CDATA[
>>-SysSignal(signum, option)-----------------------------------><
]]>
</programlisting>
<para>Sets the disposition of a signal to either SIG_IGN (ignore) or SIG_DFL (default).</para>
<note><title>Note</title><para>You should be VERY carefull when calling this function as it can
cause problems with the Rexx interpreter. If you don't know what you are doing then you
should not call this function.</para>
</note>
<para>This function uses the <filename>signal()</filename>
C API to perform the action.</para>
<para><emphasis role="bold">Parameter:</emphasis></para>
<variablelist>
<varlistentry><term><emphasis role="italic">signum</emphasis></term>
<listitem><para>The signal number to change. This is an integer and cooresponds to the
set of system signal numbers. The following is a partial list of valid values:
<programlisting>
SIGHUP	   1 Hangup (POSIX)
SIGINT	   2 Terminal interrupt (ANSI)
SIGQUIT	   3 Terminal quit (POSIX)
SIGILL	   4 Illegal instruction (ANSI)
SIGTRAP	   5 Trace trap (POSIX)
SIGIOT	   6 IOT Trap (4.2 BSD)
SIGBUS	   7 BUS error (4.2 BSD)
SIGFPE	   8 Floating point exception (ANSI)
SIGKILL	   9 Kill(can't be caught or ignored) (POSIX)
SIGUSR1	  10 User defined signal 1 (POSIX)
SIGSEGV	  11 Invalid memory segment access (ANSI)
SIGUSR2	  12 User defined signal 2 (POSIX)
SIGPIPE	  13 Write on a pipe with no reader, Broken pipe (POSIX)
SIGALRM	  14 Alarm clock (POSIX)
SIGTERM	  15 Termination (ANSI)
SIGSTKFLT 16 Stack fault
SIGCHLD	  17 Child process has stopped or exited, changed (POSIX)
SIGCONT	  18 Continue executing, if stopped (POSIX)
SIGSTOP	  19 Stop executing(can't be caught or ignored) (POSIX)
SIGTSTP	  20 Terminal stop signal (POSIX)
SIGTTIN	  21 Background process trying to read, from TTY (POSIX)
SIGTTOU	  22 Background process trying to write, to TTY (POSIX)
SIGURG	  23 Urgent condition on socket (4.2 BSD)
SIGXCPU	  24 CPU limit exceeded (4.2 BSD)
SIGXFSZ	  25 File size limit exceeded (4.2 BSD)
SIGVTALRM 26 Virtual alarm clock (4.2 BSD)
SIGPROF	  27 Profiling alarm clock (4.2 BSD)
SIGWINCH  28 Window size change (4.3 BSD, Sun)
SIGIO	  29 I/O now possible (4.2 BSD)
SIGPWR	  30 Power failure restart (System V)
</programlisting>
</para></listitem></varlistentry>
<varlistentry><term><emphasis role="italic">option</emphasis></term>
<listitem><para>An option specifying the signal action.
The values are all case insensitive and only the first letter of the option value is checked.
Allowed values are:
<variablelist>
<varlistentry><term>"DEFAULT"</term>
<listitem><para>The default action is to be set.
</para></listitem></varlistentry>
<varlistentry><term>"IGNORE"</term>
<listitem><para>Ignore this signal.
</para></listitem></varlistentry>
</variablelist>
</para></listitem></varlistentry>
</variablelist>
<para><emphasis role="bold">Returns</emphasis></para>
<para>Returns previous signal value. This is meaningless to the Rexx programmer.</para>
<para><emphasis role="bold">Example:</emphasis></para>
<programlisting>
<![CDATA[
/* Cause alarm signals to be ignored */
call SysSignal 14, "ignore"

/* Cause terminal interrupts to take the default action */
call SysSignal 2, "default"

/* Cause HUPs to be ignored */
call SysSignal 1, "I"
]]>
</programlisting>
</section>


</chapter>

