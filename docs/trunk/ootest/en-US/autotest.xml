<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "ootest.ent">
%BOOK_ENTITIES;
]>
<!--#########################################################################
    #
    # Description: Open Object Rexx: RxSock TCP/IP Socket Functions Reference
    #
    # Copyright (c) 2005-2022, Rexx Language Association. All rights reserved.
    # Portions Copyright (c) 2004, IBM Corporation. All rights reserved.
    #
    # This program and the accompanying materials are made available under
    # the terms of the Common Public License v1.0 which accompanies this
    # distribution. A copy is also available at the following address:
    # http://www.oorexx.org/license.html
    #
    # Redistribution and use in source and binary forms, with or
    # without modification, are permitted provided that the following
    # conditions are met:
    #
    # Redistributions of source code must retain the above copyright
    # notice, this list of conditions and the following disclaimer.
    # Redistributions in binary form must reproduce the above copyright
    # notice, this list of conditions and the following disclaimer in
    # the documentation and/or other materials provided with the distribution.
    #
    # Neither the name of Rexx Language Association nor the names
    # of its contributors may be used to endorse or promote products
    # derived from this software without specific prior written permission.
    #
    # THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
    # "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
    # LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
    # FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
    # OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
    # SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
    # TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
    # OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
    # OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
    # NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
    # SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
    #
    #########################################################################
-->


<chapter id="chapTestOORexx"><title>testOORexx.rex the Automated Test Driver</title>
<indexterm><primary>testOORexx.rex</primary></indexterm>
<indexterm><primary>Test</primary>
<secondary>execution</secondary></indexterm>
<para>
  The execution of all the tests in the test suite is currently driven by one Rexx program,
  <computeroutput>testOORexx.rex</computeroutput>.  This program has an extensive set of options that
  allow the execution of all the tests, a single test, or subsets of the tests.  As is all of ooTest, the
  program is platform independent and runs on all platforms where ooRexx is available.
</para>
<para>
  When run, testOORexx sets up the environment, gathers up the tests to be executed, executes them, and
  prints out the statistics for the test run.
</para>
<para>
  There is nothing preventing the use of other driver programs with the tests for the interpreter.  It is
  merely that no one has written one.  In particular, a GUI test driver would be nice and relatively easy
  to produce.  One approach would be for the GUI driver to present the interface and then call testOORexx
  under the covers to do the actual work.
</para>

<section id="useTestOORexx"><title>Using testOORexx.rex</title>
<indexterm><primary>testOORexx</primary>
<secondary>starting</secondary></indexterm>

<para>
  testOORexx.rex is a command line program. It is designed to, and should be, run from a console window.
  Starting testOORexx.rex is the same as starting any Rexx program.  On Windows, with a default install
  of ooRexx where <computeroutput>.rex</computeroutput> has a file association with the interpreter, you
  can simply type testOORexx.  For example:
<programlisting>
<![CDATA[
C:\ooTest>testOORexx
]]>
</programlisting>
  On an unix-like system, testOORexx would typically be started like this:
<programlisting>
<![CDATA[
[miesfeld@falcon]# ./testOORexx.rex
]]>
</programlisting>
  Of course testOORexx can always be started this way:
<programlisting>
<![CDATA[
C:\ooTest>rexx testOORexx.rex

[miesfeld@falcon]# rexx testOORexx.rex
]]>
</programlisting>
</para>
<para>
  Usually you would start testOORexx in the root directory of ooTest.  I.e., in the directory that
  contains <computeroutput>testOORexx.rex</computeroutput>.  However, testOORexx.rex is designed to run
  from any location on the local machine's file system.  The main purpose of this is to allow a developer
  to execute the test suite from within their build directory.  But, as the following example
  illustrates, testOORexx does not need to be run from the ooTest directory or a build directory, it can
  be run from anywhere on the system:
<programlisting> <![CDATA[
D:\TravelDrive>c:\ooTest\testOORexx.rex -F SimpleTests Searching for test containers..
Executing automated test suite..

ooTest Framework - Automated Test of the ooRexx Interpreter


Interpreter:     REXX-ooRexx_4.0.0(MT) 6.03 21 Jun 2009
Addressing Mode: 64
ooRexxUnit:      2.0.0_3.2.0    ooTest: 1.0.0_4.0.0

Tests ran:           9
Assertions:          9
Failures:            0
Errors:              0
Skipped files:       0

File search:        00:00:00.000000
Suite construction: 00:00:00.000000
Test execution:     00:00:00.000000
Total time:         00:00:01.000000


D:\TravelDrive>
]]>
</programlisting>

</para>
<para>
  <indexterm><primary>setTestEnv.bat</primary></indexterm>
  <indexterm><primary>setTestEnv.sh</primary></indexterm>
  Although running testOORexx will correctly set up the PATH to execute the tests, some people may prefer
  to change the path in the environment.  This will allow running testOORexx from anywhere without having
  to type in the complete path name of testOORexx, such as
  <computeroutput>C:\ooTest\testOORexx</computeroutput>. In addition, on Windows testOORexx is able to
  completely set up the environment for executing all the tests, but on unix-like systems the library
  path can not be set.  On the unix-like systems, the library path <emphasis role="bold">must
  be</emphasis> set prior to executing any test requiring one of the external binaries (<xref
  linkend="externalBinariesTestOORexx" />). Two small utility scripts,
  <computeroutput>setTestEnv.bat</computeroutput> and
  <computeroutput>setTestEnv.sh</computeroutput> are provided to handle these chores.  On Windows:

<programlisting>
<![CDATA[
C:\ooTest>setTestEnv ]]>
</programlisting>
  On a unix-like system be sure to source the utility script:
<programlisting>
<![CDATA[
[miesfeld@falcon]# . ./setTestEnv.sh
Setting env for Linux
[miesfeld@falcon]#
]]>
</programlisting>
</para>
<para>
  Another reason to use the utility scripts is that this allows a TODO test group ADD LINK to be run as a
  stand alone Rexx program from its current directory.  This is sometimes useful when first developing a
  set of test cases in a test group.  For example:
<programlisting>
<![CDATA[
C:\ooTest\ooRexx\base\class>rexx Array.testGroup

Interpreter:     REXX-ooRexx_4.0.0(MT) 6.03 21 Jun 2009
Addressing Mode: 64
ooRexxUnit:      2.0.0_3.2.0    ooTest: 1.0.0_4.0.0

Tests ran:           101
Assertions:          8007
Failures:            0
Errors:              0
Skipped files:       0

Test execution:     00:00:00.469000


C:\ooTest\ooRexx\base\class>
]]>
</programlisting>
  Executing a test group as a stand alone program is not possible unless the ooTest root directory is in
  the path because the interpreter will not be able to find the
  <computeroutput>ooTest.frm</computeroutput> file:
<programlisting>
<![CDATA[
C:\ooTest\ooRexx\base\class>rexx Array.testGroup
    54 *-* ::requires 'ooTest.frm' -- load the ooRexxUnit classes
Error 43 running C:\ooTest\ooRexx\base\class\Array.testGroup line 54:  Routine not found
Error 43.901:  Could not find routine "ooTest.frm" for ::REQUIRES

C:\ooTest\ooRexx\base\class>
]]>
</programlisting>
<note><title>Note</title><para>
  As a reminder, on unix-like systems, sourcing <computeroutput>setTestEnv.sh</computeroutput> is a
  requirement when tests using the TODO external binaries ADD LINK will be executed.  Unless of course
  the library path is manually set by some other means.
</para></note>
</para>
</section>

<section id="modesTestOORexx"><title>Modes of Operation</title>
<indexterm><primary>testOORexx</primary>
<secondary>modes</secondary></indexterm>

<para>
  To Be Written
</para>
</section>

<section id="outputTestOORexx"><title>Understanding the Output</title>
<indexterm><primary>testOORexx</primary>
<secondary>output</secondary></indexterm>

<para>
  To Be Written
</para>
</section>

<section id="staticOptionsTestOORexx"><title>Static Options</title>
<indexterm><primary>testOORexx</primary>
<secondary>static options</secondary></indexterm>

<para>
  The term <emphasis role="italic">static</emphasis> is used here for lack of a better one.  These are
  the <emphasis role="italic">known</emphasis> or <emphasis role="italic">implemented</emphasis> options
  as opposed to the dynamic (<xref linkend="dynamicOptionsTestOORexx" />) options formed by using the
  <computeroutput>-D</computeroutput> option.
</para>
<para>
  Each of the known options has a short form and a long name form.  The long name for the option is used
  when specifying the option in the options (<xref linkend="optionsFileTestOORexx" />).  The long
  name can also be used on the command line in combination with the -D (<xref linkend="dashBigD" />)
  option if it is easier to remember the long name.
</para>
<para>
  The following sections discuss each of the known options individually.
</para>

<section id="dashLittleA"><title>The -a &quot;allTestTypes&quot; option</title>
<indexterm><primary>testOORexx options</primary>
<secondary>allTestTypes</secondary></indexterm>

<para>
  This option is a boolean option, specified by true or false.  The default is false.
</para>
</section>

<section id="dashLittleB"><title>The -b &quot;buildFirst&quot; option</title>
<indexterm><primary>testOORexx options</primary>
<secondary>buildFirst</secondary></indexterm>

<para>
  To Be Written
</para>
</section>

<section id="dashBigB"><title>The -B &quot;forceBuild&quot; option</title>
<indexterm><primary>testOORexx options</primary>
<secondary>forceBuild</secondary></indexterm>

<para>
  To Be Written
</para>
</section>

<section id="dashLittleD"><title>The -d &quot;defaultTestTypes&quot; option</title>
<indexterm><primary>testOORexx options</primary>
<secondary>defaultTestTypes</secondary></indexterm>

<para>
  To Be Written
</para>
</section>

<section id="dashBigD"><title>The -D &quot;define&quot; option</title>
<indexterm><primary>testOORexx options</primary>
<secondary>define</secondary></indexterm>

<para>
  To Be Written
</para>
</section>

<section id="dashLittleE"><title>The -e &quot;testContainerExt&quot; option</title>
<indexterm><primary>testOORexx options</primary>
<secondary>testContainerExt</secondary></indexterm>

<para>
  To Be Written
</para>
</section>

<section id="dashLittleF"><title>The -f &quot;singleFile&quot; option</title>
<indexterm><primary>testOORexx options</primary>
<secondary>singleFile</secondary></indexterm>

<para>
  To Be Written
</para>
</section>

<section id="dashBigF"><title>The -F &quot;fileList&quot; option</title>
<indexterm><primary>testOORexx options</primary>
<secondary>fileList</secondary></indexterm>

<para>
  To Be Written
</para>
</section>

<section id="dashBidI"><title>The -I &quot;testTypeIncludes&quot; option</title>
<indexterm><primary>testOORexx options</primary>
<secondary>testTypeIncludes</secondary></indexterm>

<para>
  To Be Written
</para>
</section>

</section>

<section id="dynamicOptionsTestOORexx"><title>Dynamic Options</title>
<indexterm><primary>testOORexx</primary>
<secondary>dynamic options</secondary></indexterm>

<para>
  Options need not be known to the <computeroutput>testOORexx</computeroutput> program.  Options can be
  specified dynamically by defining the name of the option and its value on the command line, or in the
  options file (<xref linkend="optionsFileTestOORexx" />).  These options are handled generically by
  testOORexx.
</para>
</section>

<section id="optionsFileTestOORexx"><title>The Options File</title>
<indexterm><primary>testOORexx</primary>
<secondary>options file</secondary></indexterm>
<indexterm><primary>options.ooTest</primary></indexterm>

<para>
  To Be Written
</para>
</section>

<section id="dotTestOptsTestOORexx"><title>The .testOpts Directory</title>
<indexterm><primary>testOORexx</primary>
<secondary>.testOpts directory</secondary></indexterm>
<indexterm><primary>.testOpts</primary></indexterm>

<para>
  To Be Written
</para>
</section>

<section id="debugTestOORexx"><title>Some Debug Help</title>
<indexterm><primary>testOORexx</primary>
<secondary>debugging</secondary></indexterm>

<para>
  To Be Written
</para>
</section>

<section id="externalBinariesTestOORexx"><title>External Binaries</title>
<indexterm><primary>testOORexx</primary>
<secondary>external binaries</secondary></indexterm>
<indexterm><primary>external binaries</primary></indexterm>

<para>
  To Be Written
</para>
</section>

</chapter>


