
                 Some Notes on Building rexxgtk on Windows
                 ==========================================

Download and set up GTK runtime and development environment
-----------------------------------------------------------

Note:  Because of the nature of the internet, things change.  The URLs
listed here, were good at the time this was written.  If the URLs are no
longer good, the general concepts remain the same.  You will just need to
find the correct spot to download the files from.  It would be nice, if you
need to use a new link, if you posted the information on the ooRexx-devel
list.

This page has links to all the files you will need:

http://www.gimp.org/~tml/gimp/win32/downloads.html

Create some directory to put all the downloaded zip files in, say

C:\>md gtk
C:\>cd gtk
C:\gtk>

Then use the links and get both the runtime and dev files.  You will need
all of these.  Download them all into the same directory.

glib-2.12.13.zip           <runtime required>
glib-dev-2.12.13.zip       <developement>

gtk+-2.10.14.zip           <runtime required>
gtk+-dev-2.10.14.zip       <developement>

pango-1.16.4.zip           <runtime required>
pango-dev-1.16.4.zip       <developement>

atk-1.12.3.zip             <runtime required>
atk-dev-1.12.3.zip         <developement>

cairo-1.4.8.zip            <runtime required>
cairo-dev-1.4.8.zip        <developement>

GNU libiconv              <runtime required, dev stuff included>

pkg-config-0.20.zip

gettext-0.14.5.zip.       <runtime required>
gettext-dev-0.14.5.zip    <developement>

/* The links on the www.gimp.org/~tml/gimp/win32/downloads.html page for the
 * following 3 packages will take you to the GnuWin32 project.  You need to
 * grab the main file, the dev file, and the dependency file for each of
 * them at the same time.
 */

libpng 1.2.8              <runtime + dev + dependency required>
libjpeg 6b-4              <runtime + dev + dependency required>
libtiff 3.6.1             <runtime + dev + dependency required>

Once you have all the files, simply unzip them all from the same directory.
They create a directory structure that has everything set up correctly.
(You will be prompted about overwritting 3 files, just say yes.)

Then put the bin directory in your path.  Run the gtk-demo and if everything
is set up correctly, it will execute.

C:\gtk>unzip *
C:\gtk>set PATH=C:\gtk\bin;%PATH%
C:\gtk>gtk-demo


Decide which compiler you will use
----------------------------------

The following instructions are for Microsoft's C++ compiler.  Makefile.win
is targeted for this compiler.  The rexxgtk DLL will compile and has been
tested using ???.  If you want to use another compiler, then the following
instructions will not be much help.

It is assumed that your Visual C++ environment is set up, that exercise
is left to the reader.

Use pkg-config to get the needed includes and libs
--------------------------------------------------

The pkg-config utility is great for setting up makefile.win.  You need to
Set PKG_CONFIG_PATH to point to your install of GTK:

C:\gtk>set PKG_CONFIG_PATH=C:\gtk\lib\pkgconfig

Then run this command to to get the inlcudes.  You can copy and paste the
output into the makefile. (See below.)

C:\gtk>pkg-config --msvc-syntax --cflags gtk+-2.0 gdk-2.0 glib-2.0 gthread-2.0

And run this command to get the libs.  (Same idea with copy and paste.)

C:\gtk>pkg-config --msvc-syntax --libs gtk+-2.0 gdk-2.0 glib-2.0 gthread-2.0

Edit makefile.win
----------------

You need to edit the top part of makefile.win.  Please read the make file
for any additonal notes on building.

* Put in the path to the ooRexx installation.

* Then use pkg-config as shown above to get the values for the GTK_IPATH
  macro.  The --cflags command.  The output of this command will have a
  leading -mms-bitfields  That field must be removed.

* Then use pkg-config, the --libs command, to get the value for the GTKLIBS
  macro.

* Once you have finished those edits you can build and link the DLL with
  this command:

  nmake /F Makefile.win

* You can build a debug version with this syntax:

  nmake /F Makefile.win DBG=1

